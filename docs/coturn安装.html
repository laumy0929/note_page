<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>coturnå®‰è£… - Laumyçš„æŠ€æœ¯æ ˆ</title>
    <link rel="stylesheet" href="assets/style.css">
    <!-- MathJaxæ”¯æŒLaTeXæ•°å­¦å…¬å¼ -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          ignoreHtmlClass: 'tex2jax_ignore',
          processHtmlClass: 'tex2jax_process'
        }
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="logo" href="./">Laumyçš„æŠ€æœ¯æ ˆ</a>
        <div class="search">
          <input id="search-input" type="text" placeholder="è¾“å…¥å…³é”®è¯å›è½¦æœç´¢">
        </div>
        <div class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜" id="theme-toggle">â˜¾</div>
        <nav class="top-nav">
          <div class="nav-item"><a href="./">é¦–é¡µ</a></div>
          <div class="nav-item site-link">
            <a href="https://www.laumy.tech" target="_blank" title="è®¿é—®ä¸»ç«™">ä¸»ç«™ç‚¹:www.laumy.tech</a>
          </div>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <aside class="left-nav">
        
        <div class="card">
          <div class="card-title">æ–‡ç« ç›®å½•</div>
          <nav id="toc"><ul><li><a href="#_1">å®‰è£…</a><ul></ul></li><li><a href="#_2">é…ç½®</a><ul></ul></li><li><a href="#_3">å¯åœ</a><ul></ul></li><li><a href="#_4">è°ƒè¯•</a><ul></ul></li><li><a href="#_5">æµ‹è¯•</a><ul></ul></li></ul></nav>
        </div>
        
      </aside>

      <section class="content">
        
<article class="card post">
  <h1>coturnå®‰è£…</h1>
  <div class="meta">
    <span class="meta-item">
      <i class="icon">ğŸ•’</i>
      2024-11-30
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ“‚</i>
      å…¶ä»–
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ‘¤</i>
      laumy
    </span>
  </div>
  <div class="post-content"><h2 id="_1">å®‰è£…</h2>
<div class="codehilite"><pre><span></span><code><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">coturn</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
</code></pre></div>
<h2 id="_2">é…ç½®</h2>
<div class="codehilite"><pre><span></span><code><span class="n">vim</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">coturn</span><span class="o">/</span><span class="n">turnserver</span><span class="p">.</span><span class="n">conf</span>

<span class="n">listening</span><span class="o">-</span><span class="n">port</span><span class="o">=</span><span class="mi">3478</span>
<span class="cp">#æŒ‡å®š coturn ç›‘å¬çš„ç«¯å£ã€‚é»˜è®¤çš„ TURN åè®®ç«¯å£æ˜¯ 3478ï¼Œç”¨äºæ¥æ”¶ TURN å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚</span>
<span class="n">tls</span><span class="o">-</span><span class="n">listening</span><span class="o">-</span><span class="n">port</span><span class="o">=</span><span class="mi">5349</span>
<span class="cp">#æŒ‡å®šç”¨äº TLS (ä¼ è¾“å±‚å®‰å…¨åè®®) åŠ å¯†è¿æ¥çš„ç›‘å¬ç«¯å£ã€‚TURN æ”¯æŒé€šè¿‡ TLS æ¥å¢å¼ºé€šä¿¡çš„å®‰å…¨æ€§ï¼Œé»˜è®¤çš„ç«¯å£æ˜¯ 5349ã€‚</span>
<span class="n">relay</span><span class="o">-</span><span class="n">ip</span><span class="o">=</span><span class="mf">172.20.65.5</span>
<span class="cp">#æŒ‡å®š TURN æœåŠ¡å™¨ç”¨äºä¸­ç»§æµé‡çš„ IP åœ°å€ã€‚è¿™ä¸ª IP åœ°å€é€šå¸¸æ˜¯å†…éƒ¨çš„å±€åŸŸç½‘åœ°å€ï¼Œç”¨äºæ•°æ®ä¸­ç»§ä¼ è¾“ã€‚</span>
<span class="n">relay</span><span class="o">-</span><span class="n">ip</span><span class="o">=</span><span class="n">fe80</span><span class="o">::</span><span class="mi">216</span><span class="o">:</span><span class="mi">3</span><span class="n">eff</span><span class="o">:</span><span class="n">fe01</span><span class="o">:</span><span class="mi">105</span><span class="n">b</span>
<span class="cp">#æŒ‡å®š TURN æœåŠ¡å™¨çš„ IPv6 åœ°å€ï¼Œé€šå¸¸ç”¨äºæ”¯æŒ IPv6 ç½‘ç»œçš„ç¯å¢ƒä¸­ã€‚</span>
<span class="n">external</span><span class="o">-</span><span class="n">ip</span><span class="o">=</span><span class="mf">8.134.108.235</span>
<span class="cp">#æŒ‡å®šTURNæœåŠ¡å™¨çš„å¤–éƒ¨å…¬ç½‘ IP åœ°å€ã€‚å½“ TURN æœåŠ¡å™¨ä½äº NAT åé¢æ—¶ï¼Œexternal-ip ç”¨äºå‘ŠçŸ¥å®¢æˆ·ç«¯å¦‚ä½•è®¿é—®è¯¥æœåŠ¡å™¨ã€‚</span>
<span class="n">relay</span><span class="o">-</span><span class="n">threads</span><span class="o">=</span><span class="mi">50</span>
<span class="cp">#æŒ‡å®šæœåŠ¡å™¨å¤„ç†ä¸­ç»§æµé‡æ—¶ä½¿ç”¨çš„çº¿ç¨‹æ•°é‡ã€‚å¢åŠ çº¿ç¨‹æ•°æœ‰åŠ©äºæé«˜å¹¶å‘è¿æ¥çš„å¤„ç†èƒ½åŠ›ã€‚</span>
<span class="n">min</span><span class="o">-</span><span class="n">port</span><span class="o">=</span><span class="mi">40000</span>
<span class="n">max</span><span class="o">-</span><span class="n">port</span><span class="o">=</span><span class="mi">65535</span>
<span class="cp">#æŒ‡å®š coturn ä½¿ç”¨çš„æœ€å°å’Œæœ€å¤§ç«¯å£èŒƒå›´ã€‚coturn ä¼šåœ¨è¯¥èŒƒå›´å†…é€‰æ‹©ç«¯å£æ¥å»ºç«‹ä¸´æ—¶çš„åª’ä½“è¿æ¥ã€‚è¿™ä¸ªç«¯å£èŒƒå›´é€šå¸¸éœ€è¦å¼€æ”¾ï¼Œä¾›å®¢æˆ·ç«¯è¿›è¡Œé€šè®¯ã€‚</span>
<span class="n">server</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">www</span><span class="p">.</span><span class="n">laumy</span><span class="p">.</span><span class="n">tech</span>
<span class="cp">#æŒ‡å®š TURN æœåŠ¡å™¨çš„åç§°ã€‚è¿™é€šå¸¸ç”¨äºèº«ä»½éªŒè¯æˆ–æ˜¾ç¤ºç»™å®¢æˆ·ç«¯çš„æœåŠ¡å™¨æ ‡è¯†ã€‚</span>
<span class="n">lt</span><span class="o">-</span><span class="n">cred</span><span class="o">-</span><span class="n">mech</span>
<span class="cp"># æ‰“å¼€è¿™ä¸ªè¡¨ç¤ºè¦ä½¿ç”¨åŠ å¯†ï¼Œé»˜è®¤æ˜¯æ‰“å¼€çš„ï¼ŒåŠ å¯†çš„è¯å°±éœ€è¦éªŒè¯usernameå’Œå¯†ç ï¼Œå¦‚ä¸‹çš„userå­—æ®µã€‚</span>
<span class="n">no</span><span class="o">-</span><span class="n">auth</span>
<span class="cp">#å¦‚æœæ‰“å¼€è¿™ä¸ªï¼Œè¡¨ç¤ºä¸éœ€è¦åŠ å¯†ï¼Œå’Œlt-cred-mechæ˜¯äºŒé€‰ä¸€ã€‚</span>
<span class="n">user</span><span class="o">=</span><span class="n">laumy</span><span class="o">:</span><span class="n">A8xxxx22</span>
<span class="cp">#æŒ‡å®šå…è®¸è¿æ¥åˆ° TURN æœåŠ¡å™¨çš„ç”¨æˆ·åå’Œå¯†ç ã€‚æ ¼å¼ä¸º username:passwordï¼Œç”¨äºèº«ä»½éªŒè¯ã€‚laumy æ˜¯ç”¨æˆ·åï¼ŒA8xxxx22 æ˜¯å¯†ç ã€‚</span>
<span class="n">realm</span><span class="o">=</span><span class="n">www</span><span class="p">.</span><span class="n">laumy</span><span class="p">.</span><span class="n">tech</span>
<span class="cp">#æŒ‡å®š TURN æœåŠ¡å™¨çš„â€œåŸŸâ€åï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ªèº«ä»½éªŒè¯åŸŸã€‚è¿™ä¸ªåŸŸé€šå¸¸ä¸ user ç»“åˆä½¿ç”¨ï¼Œç¡®ä¿èº«ä»½éªŒè¯çš„æ­£ç¡®æ€§ã€‚</span>
<span class="n">cert</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">xxx</span><span class="o">/</span><span class="n">cert</span><span class="o">/</span><span class="n">www</span><span class="p">.</span><span class="n">laumy</span><span class="p">.</span><span class="n">tech</span><span class="p">.</span><span class="n">pem</span>
<span class="n">pkey</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">cert</span><span class="o">/</span><span class="n">www</span><span class="p">.</span><span class="n">laumy</span><span class="p">.</span><span class="n">tech</span><span class="p">.</span><span class="n">key</span>
<span class="cp"># è®¾ç½®è¯ä¹¦å¯†é’¥</span>
</code></pre></div>
<h2 id="_3">å¯åœ</h2>
<div class="codehilite"><pre><span></span><code><span class="n">å¯åŠ¨</span><span class="err">ï¼š</span>

<span class="n">systemctl</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">coturn</span>

<span class="n">ps</span><span class="w"> </span><span class="o">-</span><span class="n">ef</span><span class="w"> </span><span class="o">|</span><span class="n">grep</span><span class="w"> </span><span class="n">turnserver</span>

<span class="n">å…³é—­</span><span class="err">ï¼š</span>

<span class="n">systemctl</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">coturn</span>
</code></pre></div>
<h2 id="_4">è°ƒè¯•</h2>
<p>æŸ¥çœ‹å¯åŠ¨æ—¥å¿—</p>
<div class="codehilite"><pre><span></span><code><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">coturn</span><span class="o">/</span><span class="n">turnserver</span><span class="p">.</span><span class="n">log</span>
</code></pre></div>
<h2 id="_5">æµ‹è¯•</h2>
<p><a href="\" title="https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/\">https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/</a></p>
<p>å‚è€ƒï¼š</p>
<ol>
<li><a href="\" title="https://www.zhiboblog.com/2105.html\">https://www.zhiboblog.com/2105.html</a></li>
</ol></div>
  <div class="post-nav">
    <a class="prev" href="éƒ¨ç½²mqttäº‘æœåŠ¡.html">â† éƒ¨ç½²MQTTäº‘æœåŠ¡</a>
    <a class="next" href="stunåè®®.html">STUNåè®® â†’</a>
  </div>
</article>

      </section>

      <aside class="right-panel">
        
      </aside>
    </main>

    <footer class="site-footer">
      <div class="container">Copyright Â©2022-2025 laumy ç‰ˆæƒæ‰€æœ‰</div>
    </footer>

    <script src="assets/site.js"></script>
  </body>
  </html>

