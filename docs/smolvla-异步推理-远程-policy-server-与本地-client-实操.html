<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SmolVLA å¼‚æ­¥æ¨ç†ï¼šè¿œç¨‹ Policy Server ä¸æœ¬åœ° Client å®æ“ - Laumyçš„æŠ€æœ¯æ ˆ</title>
    <link rel="stylesheet" href="assets/style.css">
    <!-- MathJaxæ”¯æŒLaTeXæ•°å­¦å…¬å¼ -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          ignoreHtmlClass: 'tex2jax_ignore',
          processHtmlClass: 'tex2jax_process'
        }
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="logo" href="./">Laumyçš„æŠ€æœ¯æ ˆ</a>
        <div class="search">
          <input id="search-input" type="text" placeholder="è¾“å…¥å…³é”®è¯å›è½¦æœç´¢">
        </div>
        <div class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜" id="theme-toggle">â˜¾</div>
        <nav class="top-nav">
          <div class="nav-item"><a href="./">é¦–é¡µ</a></div>
          <div class="nav-item site-link">
            <a href="https://www.laumy.tech" target="_blank" title="è®¿é—®ä¸»ç«™">ä¸»ç«™ç‚¹:www.laumy.tech</a>
          </div>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <aside class="left-nav">
        
        <div class="card">
          <div class="card-title">æ–‡ç« ç›®å½•</div>
          <nav id="toc"><ul><li><a href="#_1">æ¦‚è¿°</a><ul></ul></li><li><a href="#_2">ç¯å¢ƒå‡†å¤‡</a><ul></ul></li><li><a href="#_3">æœåŠ¡å™¨</a><ul></ul></li><li><a href="#_4">å®¢æˆ·ç«¯</a><ul><li><a href="#ssh">å»ºç«‹SSHè½¬å‘</a></li><li><a href="#_5">æœ¬åœ°è¿è¡Œ</a></li></ul></li><li><a href="#_6">å¸¸è§é—®é¢˜</a><ul></ul></li></ul></nav>
        </div>
        
      </aside>

      <section class="content">
        
<article class="card post">
  <h1>SmolVLA å¼‚æ­¥æ¨ç†ï¼šè¿œç¨‹ Policy Server ä¸æœ¬åœ° Client å®æ“</h1>
  <div class="meta">
    <span class="meta-item">
      <i class="icon">ğŸ•’</i>
      2025-08-28
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ“‚</i>
      ai
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ‘¤</i>
      laumy
    </span>
  </div>
  <div class="post-content"><h2 id="_1">æ¦‚è¿°</h2>
<p>æœ¬æ–‡è®°å½•lerobot smolvlaå¼‚æ­¥æ¨ç†å®è·µï¼Œå°†SmolVLAçš„ç­–ç•¥serveréƒ¨ç½²åˆ°AutoDLä¸Šï¼ŒçœŸæœºclientåœ¨æœ¬åœ°ç¬”è®°æœ¬ä¸Šè¿è¡Œã€‚</p>
<p>ä¸‹é¢æ˜¯ä»£ç çš„æµç¨‹å›¾ï¼š</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_bb33ac4dc20efc15f88512cb477053b2_1756952035.png"><img alt="" src="assets/doc/04-ai/lerobot/smolvlaç­–ç•¥serverä¸clientåˆ†ç¦»éƒ¨ç½²å®è·µ/images/wp_editor_md_bb33ac4dc20efc15f88512cb477053b2_1756952035.png"/></a></p>
<h2 id="_2">ç¯å¢ƒå‡†å¤‡</h2>
<p>å…ˆç™»å½•AutoDLäº‹å…ˆæ­å»ºå¥½lerobotçš„ç¯å¢ƒï¼Œè¿™é‡Œå°±ä¸å†é‡å¤äº†ï¼Œå‚è€ƒå¾€æœŸæ–‡ç« ã€‚lerobotç¯å¢ƒæ­å»ºå¥½åï¼Œéœ€è¦å…ˆå®‰è£…smolvlaå’ŒgRPCã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># å»ºè®®å…ˆå‡çº§æ‰“åŒ…å·¥å…·</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pip</span> <span class="n">setuptools</span> <span class="n">wheel</span>

<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="s2">".[smolvla]"</span>

<span class="c1"># å®‰è£… gRPC åŠç›¸å…³</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">grpcio</span> <span class="n">grpcio</span><span class="o">-</span><span class="n">tools</span> <span class="n">protobuf</span>
</code></pre></div>
<h2 id="_3">æœåŠ¡å™¨</h2>
<div class="codehilite"><pre><span></span><code><span class="n">python</span> <span class="n">src</span><span class="o">/</span><span class="n">lerobot</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">policy_server</span><span class="o">.</span><span class="n">py</span> 
  <span class="o">--</span><span class="n">host</span><span class="o">=</span><span class="mf">127.0.0.1</span> 
  <span class="o">--</span><span class="n">port</span><span class="o">=</span><span class="mi">8080</span> 
  <span class="o">--</span><span class="n">fps</span><span class="o">=</span><span class="mi">30</span> 
  <span class="o">--</span><span class="n">inference_latency</span><span class="o">=</span><span class="mf">0.033</span> 
  <span class="o">--</span><span class="n">obs_queue_timeout</span><span class="o">=</span><span class="mi">2</span>
</code></pre></div>
<p>å¯åŠ¨æˆåŠŸåçš„æ—¥å¿—å¦‚ä¸‹ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="n">python</span> <span class="n">src</span><span class="o">/</span><span class="n">lerobot</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">policy_server</span><span class="o">.</span><span class="n">py</span>   <span class="o">--</span><span class="n">host</span><span class="o">=</span><span class="mf">127.0.0.1</span>   <span class="o">--</span><span class="n">port</span><span class="o">=</span><span class="mi">8080</span>   <span class="o">--</span><span class="n">fps</span><span class="o">=</span><span class="mi">30</span>   <span class="o">--</span><span class="n">inference_latency</span><span class="o">=</span><span class="mi">0</span>   <span class="o">--</span><span class="n">obs_queue_timeout</span><span class="o">=</span><span class="mi">2</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">07</span> <span class="n">y_server</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">384</span> <span class="p">{</span><span class="s1">'fps'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
 <span class="s1">'host'</span><span class="p">:</span> <span class="s1">'127.0.0.1'</span><span class="p">,</span>
 <span class="s1">'inference_latency'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s1">'obs_queue_timeout'</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
 <span class="s1">'port'</span><span class="p">:</span> <span class="mi">8080</span><span class="p">}</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">07</span> <span class="n">y_server</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">394</span> <span class="n">PolicyServer</span> <span class="n">started</span> <span class="n">on</span> <span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8080</span>

<span class="n">è¢«å®¢æˆ·ç«¯è¿æ¥åçš„æ—¥å¿—</span><span class="err">ï¼š</span>

<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">42</span> <span class="n">y_server</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">104</span> <span class="n">Client</span> <span class="n">ipv4</span><span class="p">:</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">45038</span> <span class="n">connected</span> <span class="ow">and</span> <span class="n">ready</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">42</span> <span class="n">y_server</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">130</span> <span class="n">Receiving</span> <span class="n">policy</span> <span class="n">instructions</span> <span class="kn">from</span> <span class="nn">ipv4</span><span class="p">:</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">45038</span> <span class="o">|</span> <span class="n">Policy</span> <span class="nb">type</span><span class="p">:</span> <span class="n">smolvla</span> <span class="o">|</span> <span class="n">Pretrained</span> <span class="n">name</span> <span class="ow">or</span> <span class="n">path</span><span class="p">:</span> <span class="n">outputs</span><span class="o">/</span><span class="n">smolvla_weigh_08181710</span><span class="o">/</span><span class="n">pretrained_model</span> <span class="o">|</span> <span class="n">Actions</span> <span class="n">per</span> <span class="n">chunk</span><span class="p">:</span> <span class="mi">50</span> <span class="o">|</span> <span class="n">Device</span><span class="p">:</span> <span class="n">cuda</span>
<span class="n">Loading</span>  <span class="n">HuggingFaceTB</span><span class="o">/</span><span class="n">SmolVLM2</span><span class="o">-</span><span class="mi">500</span><span class="n">M</span><span class="o">-</span><span class="n">Video</span><span class="o">-</span><span class="n">Instruct</span> <span class="n">weights</span> <span class="o">...</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">54</span> <span class="n">odeling</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">1004</span> <span class="n">We</span> <span class="n">will</span> <span class="n">use</span> <span class="mi">90</span><span class="o">%</span> <span class="n">of</span> <span class="n">the</span> <span class="n">memory</span> <span class="n">on</span> <span class="n">device</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">storing</span> <span class="n">the</span> <span class="n">model</span><span class="p">,</span> <span class="ow">and</span> <span class="mi">10</span><span class="o">%</span> <span class="k">for</span> <span class="n">the</span> <span class="n">buffer</span> <span class="n">to</span> <span class="n">avoid</span> <span class="n">OOM</span><span class="o">.</span> <span class="n">You</span> <span class="n">can</span> <span class="nb">set</span> <span class="err">`</span><span class="n">max_memory</span><span class="err">`</span> <span class="ow">in</span> <span class="n">to</span> <span class="n">a</span> <span class="n">higher</span> <span class="n">value</span> <span class="n">to</span> <span class="n">use</span> <span class="n">more</span> <span class="n">memory</span> <span class="p">(</span><span class="n">at</span> <span class="n">your</span> <span class="n">own</span> <span class="n">risk</span><span class="p">)</span><span class="o">.</span>
<span class="n">Reducing</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">VLM</span> <span class="n">layers</span> <span class="n">to</span> <span class="mi">16</span> <span class="o">...</span>
<span class="n">Loading</span> <span class="n">weights</span> <span class="kn">from</span> <span class="nn">local</span> <span class="n">directory</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">14</span> <span class="n">y_server</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">150</span> <span class="n">Time</span> <span class="n">taken</span> <span class="n">to</span> <span class="n">put</span> <span class="n">policy</span> <span class="n">on</span> <span class="n">cuda</span><span class="p">:</span> <span class="mf">32.3950</span> <span class="n">seconds</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">14</span> <span class="n">ort</span><span class="o">/</span><span class="n">utils</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">74</span> <span class="o">&lt;</span><span class="n">Logger</span> <span class="n">policy_server</span> <span class="p">(</span><span class="n">NOTSET</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">Starting</span> <span class="n">receiver</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">14</span> <span class="n">y_server</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">175</span> <span class="n">Received</span> <span class="n">observation</span> <span class="c1">#0 | Avg FPS: 3.45 | Target: 30.00 | One-way latency: -9.22ms</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">14</span> <span class="n">y_server</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">205</span> <span class="n">Running</span> <span class="n">inference</span> <span class="k">for</span> <span class="n">observation</span> <span class="c1">#0 (must_go: True)</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">ort</span><span class="o">/</span><span class="n">utils</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">74</span> <span class="o">&lt;</span><span class="n">Logger</span> <span class="n">policy_server</span> <span class="p">(</span><span class="n">NOTSET</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">Starting</span> <span class="n">receiver</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">y_server</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">175</span> <span class="n">Received</span> <span class="n">observation</span> <span class="c1">#0 | Avg FPS: 3.45 | Target: 30.00 | One-way latency: -9.58ms</span>
</code></pre></div>
<p>æœåŠ¡å™¨ä»…æœ¬åœ°ç›‘å¬(12.0.0.1)ï¼Œè¿™æ ·ä¸æš´éœ²å…¬ç½‘ï¼Œå®¢æˆ·ç«¯é€šè¿‡SSHéš§é“å®‰å…¨è½¬å‘ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">nohup</span> <span class="n">python</span> <span class="n">src</span><span class="o">/</span><span class="n">lerobot</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">policy_server</span><span class="o">.</span><span class="n">py</span> 
  <span class="o">--</span><span class="n">host</span><span class="o">=</span><span class="mf">127.0.0.1</span> <span class="o">--</span><span class="n">port</span><span class="o">=</span><span class="mi">8080</span> <span class="o">--</span><span class="n">fps</span><span class="o">=</span><span class="mi">30</span> <span class="o">--</span><span class="n">inference_latency</span><span class="o">=</span><span class="mf">0.033</span> <span class="o">--</span><span class="n">obs_queue_timeout</span><span class="o">=</span><span class="mi">2</span> 
  <span class="o">&gt;/</span><span class="n">tmp</span><span class="o">/</span><span class="n">policy_server</span><span class="o">.</span><span class="n">log</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span> <span class="o">&amp;</span>
</code></pre></div>
<p>ä¹Ÿå¯ä»¥é€‰æ‹©åå°è¿è¡Œã€‚</p>
<h2 id="_4">å®¢æˆ·ç«¯</h2>
<h3 id="ssh">å»ºç«‹SSHè½¬å‘</h3>
<p>åœ¨æœ¬åœ°å®¢æˆ·ç«¯çº¿å»ºç«‹SSHæœ¬åœ°ç«¯å£è½¬å‘ï¼ˆéš§é“ï¼‰</p>
<div class="codehilite"><pre><span></span><code><span class="n">ssh</span> <span class="o">-</span><span class="n">p</span> <span class="o">&lt;</span><span class="n">æœåŠ¡å™¨sshçš„port</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">fN</span> <span class="o">-</span><span class="n">L</span> <span class="mi">8080</span><span class="p">:</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8080</span> <span class="o">&lt;</span><span class="n">ç”¨æˆ·å</span><span class="nd">@æœåŠ¡å™¨sshçš„ipæˆ–åŸŸå</span><span class="o">&gt;</span>

<span class="n">å¦‚</span><span class="err">ï¼š</span><span class="n">ssh</span> <span class="o">-</span><span class="n">p</span> <span class="mi">20567</span> <span class="o">-</span><span class="n">fN</span> <span class="o">-</span><span class="n">L</span> <span class="mi">8080</span><span class="p">:</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8080</span> <span class="n">root</span><span class="nd">@connect</span><span class="o">.</span><span class="n">xx</span><span class="o">.</span><span class="n">xxx</span><span class="o">.</span><span class="n">com</span>

<span class="n">å¦‚æœä¸æƒ³åå°è¿è¡Œ</span><span class="err">ï¼Œ</span><span class="n">è¿è¡Œåœ¨å‰å°</span><span class="err">ï¼ˆ</span><span class="n">Crtl</span><span class="o">+</span><span class="n">Cç»“æŸ</span><span class="err">ï¼‰</span>
<span class="n">ssh</span> <span class="o">-</span><span class="n">p</span> <span class="mi">20567</span> <span class="o">-</span><span class="n">N</span> <span class="o">-</span><span class="n">L</span> <span class="mi">8080</span><span class="p">:</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8080</span> <span class="n">root</span><span class="nd">@connect</span><span class="o">.</span><span class="n">xx</span><span class="o">.</span><span class="n">xxx</span><span class="o">.</span><span class="n">com</span>
</code></pre></div>
<h3 id="_5">æœ¬åœ°è¿è¡Œ</h3>
<div class="codehilite"><pre><span></span><code><span class="n">python</span> <span class="n">src</span><span class="o">/</span><span class="n">lerobot</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">robot_client</span><span class="o">.</span><span class="n">py</span> \
  <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">type</span><span class="o">=</span><span class="n">so101_follower</span> <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">port</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyACM0</span> <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">R12252801</span> \
  <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">cameras</span><span class="o">=</span><span class="s2">"{ handeye: {type: opencv, index_or_path: 6, width: 640, height: 480, fps: 30}, fixed: {type: opencv, index_or_path: 0, width: 640, height: 480, fps: 30}}"</span> \
  <span class="o">--</span><span class="n">policy_type</span><span class="o">=</span><span class="n">smolvla</span> \
  <span class="o">--</span><span class="n">pretrained_name_or_path</span><span class="o">=</span><span class="n">outputs</span><span class="o">/</span><span class="n">smolvla_weigh_08181710</span><span class="o">/</span><span class="n">pretrained_model</span> \
  <span class="o">--</span><span class="n">policy_device</span><span class="o">=</span><span class="n">cuda</span> \
  <span class="o">--</span><span class="n">actions_per_chunk</span><span class="o">=</span><span class="mi">50</span> \
  <span class="o">--</span><span class="n">fps</span><span class="o">=</span><span class="mi">30</span> \
  <span class="o">--</span><span class="n">server_address</span><span class="o">=</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span> \
  <span class="o">--</span><span class="n">chunk_size_threshold</span><span class="o">=</span><span class="mf">0.8</span> \
  <span class="o">--</span><span class="n">debug_visualize_queue_size</span><span class="o">=</span><span class="kc">True</span>
</code></pre></div>
<p>å…¶ä»–å‚æ•°</p>
<p>--debug_visualize_queue_size=True: æ‰§è¡Œç»“æŸåå¯è§†åŒ–é˜Ÿåˆ—æƒ…å†µã€‚ éœ€è¦å®‰è£… pip install matplotlibã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_acd9d57dedbda7335db09af347edf982_1756888127.png"><img alt="" src="assets/doc/04-ai/lerobot/smolvlaç­–ç•¥serverä¸clientåˆ†ç¦»éƒ¨ç½²å®è·µ/images/wp_editor_md_acd9d57dedbda7335db09af347edf982_1756888127.png"/></a></p>
<p>--aggregate_fn_name=conservative:å½“æ–°åŠ¨ä½œåˆ°è¾¾æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­å·²ç»å­˜åœ¨ç›¸åŒæ—¶é—´æ­¥çš„åŠ¨ä½œï¼Œç³»ç»Ÿä¼šä½¿ç”¨èšåˆå‡½æ•°æ¥åˆå¹¶å®ƒä»¬ã€‚å¦‚æœä¸ºlatest_onlyï¼ˆé»˜è®¤ï¼‰ï¼Œåªç”¨æœ€æ–°åŠ¨ä½œï¼Œè¿™æ ·å¯èƒ½ä¼šæŠ–åŠ¨å‰§çƒˆã€‚ --pretrained_name_or_path ä¼šåœ¨â€œæœåŠ¡å™¨ä¸Šâ€åŠ è½½ã€‚éœ€è¦ç¡®ä¿æœåŠ¡å™¨ä¸Šoutputs/smolvla_weigh_08181710è·¯å¾„æœ‰æƒé‡æ–‡ä»¶ã€‚</p>
<p>è¿æ¥æ‰§è¡Œçš„æ—¥å¿—å¦‚ä¸‹ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="n">python</span> <span class="n">src</span><span class="o">/</span><span class="n">lerobot</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">robot_client</span><span class="o">.</span><span class="n">py</span>   <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">type</span><span class="o">=</span><span class="n">so101_follower</span> <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">port</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyACM0</span> <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">R12252801</span>   <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">cameras</span><span class="o">=</span><span class="s2">"{ handeye: {type: opencv, index_or_path: 6, width: 320, height: 240, fps: 25}, fixed: {type: opencv, index_or_path: 0, width: 320, height: 240, fps: 25}}"</span>   <span class="o">--</span><span class="n">policy_type</span><span class="o">=</span><span class="n">smolvla</span>   <span class="o">--</span><span class="n">pretrained_name_or_path</span><span class="o">=</span><span class="n">outputs</span><span class="o">/</span><span class="n">smolvla_weigh_08181710</span><span class="o">/</span><span class="n">pretrained_model</span>   <span class="o">--</span><span class="n">policy_device</span><span class="o">=</span><span class="n">cuda</span>   <span class="o">--</span><span class="n">actions_per_chunk</span><span class="o">=</span><span class="mi">50</span> <span class="o">--</span><span class="n">chunk_size_threshold</span><span class="o">=</span><span class="mf">0.8</span>  <span class="o">--</span><span class="n">fps</span><span class="o">=</span><span class="mi">30</span>   <span class="o">--</span><span class="n">server_address</span><span class="o">=</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span> <span class="o">--</span><span class="n">aggregate_fn_name</span><span class="o">=</span><span class="n">average</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">38</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">478</span> <span class="p">{</span><span class="s1">'actions_per_chunk'</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
 <span class="s1">'aggregate_fn_name'</span><span class="p">:</span> <span class="s1">'average'</span><span class="p">,</span>
 <span class="s1">'chunk_size_threshold'</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
 <span class="s1">'debug_visualize_queue_size'</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">'fps'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
 <span class="s1">'policy_device'</span><span class="p">:</span> <span class="s1">'cuda'</span><span class="p">,</span>
 <span class="s1">'policy_type'</span><span class="p">:</span> <span class="s1">'smolvla'</span><span class="p">,</span>
 <span class="s1">'pretrained_name_or_path'</span><span class="p">:</span> <span class="s1">'outputs/smolvla_weigh_08181710/pretrained_model'</span><span class="p">,</span>
 <span class="s1">'robot'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'calibration_dir'</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
           <span class="s1">'cameras'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'fixed'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'color_mode'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ColorMode</span><span class="o">.</span><span class="n">RGB</span><span class="p">:</span> <span class="s1">'rgb'</span><span class="o">&gt;</span><span class="p">,</span>
                                 <span class="s1">'fps'</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
                                 <span class="s1">'height'</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span>
                                 <span class="s1">'index_or_path'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                 <span class="s1">'rotation'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Cv2Rotation</span><span class="o">.</span><span class="n">NO_ROTATION</span><span class="p">:</span> <span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span>
                                 <span class="s1">'warmup_s'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                 <span class="s1">'width'</span><span class="p">:</span> <span class="mi">320</span><span class="p">},</span>
                       <span class="s1">'handeye'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'color_mode'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ColorMode</span><span class="o">.</span><span class="n">RGB</span><span class="p">:</span> <span class="s1">'rgb'</span><span class="o">&gt;</span><span class="p">,</span>
                                   <span class="s1">'fps'</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
                                   <span class="s1">'height'</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span>
                                   <span class="s1">'index_or_path'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
                                   <span class="s1">'rotation'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Cv2Rotation</span><span class="o">.</span><span class="n">NO_ROTATION</span><span class="p">:</span> <span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span>
                                   <span class="s1">'warmup_s'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                   <span class="s1">'width'</span><span class="p">:</span> <span class="mi">320</span><span class="p">}},</span>
           <span class="s1">'disable_torque_on_disconnect'</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
           <span class="s1">'id'</span><span class="p">:</span> <span class="s1">'R12252801'</span><span class="p">,</span>
           <span class="s1">'max_relative_target'</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
           <span class="s1">'port'</span><span class="p">:</span> <span class="s1">'/dev/ttyACM0'</span><span class="p">,</span>
           <span class="s1">'use_degrees'</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
 <span class="s1">'server_address'</span><span class="p">:</span> <span class="s1">'localhost:8080'</span><span class="p">,</span>
 <span class="s1">'task'</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
 <span class="s1">'verify_robot_cameras'</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">40</span> <span class="n">a_opencv</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">179</span> <span class="n">OpenCVCamera</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="n">connected</span><span class="o">.</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">41</span> <span class="n">a_opencv</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">179</span> <span class="n">OpenCVCamera</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">connected</span><span class="o">.</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">41</span> <span class="n">follower</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">104</span> <span class="n">R12252801</span> <span class="n">SO101Follower</span> <span class="n">connected</span><span class="o">.</span>
<span class="n">WARNING</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">42</span> <span class="n">ils</span><span class="o">/</span><span class="n">utils</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">54</span> <span class="n">No</span> <span class="n">accelerated</span> <span class="n">backend</span> <span class="n">detected</span><span class="o">.</span> <span class="n">Using</span> <span class="n">default</span> <span class="n">cpu</span><span class="p">,</span> <span class="n">this</span> <span class="n">will</span> <span class="n">be</span> <span class="n">slow</span><span class="o">.</span>
<span class="n">WARNING</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">42</span> <span class="o">/</span><span class="n">policies</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">80</span> <span class="n">Device</span> <span class="s1">'cuda'</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">available</span><span class="o">.</span> <span class="n">Switching</span> <span class="n">to</span> <span class="s1">'cpu'</span><span class="o">.</span>
<span class="n">WARNING</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">42</span> <span class="n">ils</span><span class="o">/</span><span class="n">utils</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">54</span> <span class="n">No</span> <span class="n">accelerated</span> <span class="n">backend</span> <span class="n">detected</span><span class="o">.</span> <span class="n">Using</span> <span class="n">default</span> <span class="n">cpu</span><span class="p">,</span> <span class="n">this</span> <span class="n">will</span> <span class="n">be</span> <span class="n">slow</span><span class="o">.</span>
<span class="n">WARNING</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">42</span> <span class="o">/</span><span class="n">policies</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">80</span> <span class="n">Device</span> <span class="s1">'cuda'</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">available</span><span class="o">.</span> <span class="n">Switching</span> <span class="n">to</span> <span class="s1">'cpu'</span><span class="o">.</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">42</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">121</span> <span class="n">Initializing</span> <span class="n">client</span> <span class="n">to</span> <span class="n">connect</span> <span class="n">to</span> <span class="n">server</span> <span class="n">at</span> <span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">42</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">140</span> <span class="n">Robot</span> <span class="n">connected</span> <span class="ow">and</span> <span class="n">ready</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">42</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">163</span> <span class="n">Sending</span> <span class="n">policy</span> <span class="n">instructions</span> <span class="n">to</span> <span class="n">policy</span> <span class="n">server</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">14</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">486</span> <span class="n">Starting</span> <span class="n">action</span> <span class="n">receiver</span> <span class="n">thread</span><span class="o">...</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">14</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">454</span> <span class="n">Control</span> <span class="n">loop</span> <span class="n">thread</span> <span class="n">starting</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">14</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">280</span> <span class="n">Action</span> <span class="n">receiving</span> <span class="n">thread</span> <span class="n">starting</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">216</span> <span class="n">Sent</span> <span class="n">observation</span> <span class="c1">#0 | </span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">469</span> <span class="n">Control</span> <span class="n">loop</span> <span class="p">(</span><span class="n">ms</span><span class="p">):</span> <span class="mf">288.72</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">216</span> <span class="n">Sent</span> <span class="n">observation</span> <span class="c1">#0 | </span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">469</span> <span class="n">Control</span> <span class="n">loop</span> <span class="p">(</span><span class="n">ms</span><span class="p">):</span> <span class="mf">132.22</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">216</span> <span class="n">Sent</span> <span class="n">observation</span> <span class="c1">#0 | </span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">469</span> <span class="n">Control</span> <span class="n">loop</span> <span class="p">(</span><span class="n">ms</span><span class="p">):</span> <span class="mf">127.84</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">216</span> <span class="n">Sent</span> <span class="n">observation</span> <span class="c1">#0 | </span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">469</span> <span class="n">Control</span> <span class="n">loop</span> <span class="p">(</span><span class="n">ms</span><span class="p">):</span> <span class="mf">123.95</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">216</span> <span class="n">Sent</span> <span class="n">observation</span> <span class="c1">#0 | </span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">469</span> <span class="n">Control</span> <span class="n">loop</span> <span class="p">(</span><span class="n">ms</span><span class="p">):</span> <span class="mf">140.21</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">469</span> <span class="n">Control</span> <span class="n">loop</span> <span class="p">(</span><span class="n">ms</span><span class="p">):</span> <span class="mf">0.54</span>
<span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">15</span> <span class="n">t_client</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">469</span> <span class="n">Control</span> <span class="n">loop</span> <span class="p">(</span><span class="n">ms</span><span class="p">):</span> <span class="mf">0.42</span>
</code></pre></div>
<p>å¦‚æœä½¿ç”¨ACTç­–ç•¥ï¼Œå¯¹äºACTæ¥è¯´chunk_size_thresholdä¸è¦è®¾ç½®å¤ªå¤§ï¼Œå®æµ‹å‘ç°ä¸ç„¶ä¸€ä¸ªchunkåˆ°ä¸‹ä¸€ä¸ªchunkæŠ–åŠ¨æ¯”è¾ƒä¸¥é‡</p>
<div class="codehilite"><pre><span></span><code><span class="n">python</span> <span class="n">src</span><span class="o">/</span><span class="n">lerobot</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">robot_client</span><span class="o">.</span><span class="n">py</span> \
  <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">type</span><span class="o">=</span><span class="n">so101_follower</span> \
  <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">port</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyACM0</span> \
  <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">R12252801</span> \
  <span class="o">--</span><span class="n">robot</span><span class="o">.</span><span class="n">cameras</span><span class="o">=</span><span class="s2">"{ handeye: {type: opencv, index_or_path: 6, width: 640, height: 480, fps: 30}, fixed: {type: opencv, index_or_path: 0, width: 640, height: 480, fps: 30}}"</span> \
  <span class="o">--</span><span class="n">policy_type</span><span class="o">=</span><span class="n">act</span> \
  <span class="o">--</span><span class="n">pretrained_name_or_path</span><span class="o">=</span><span class="n">outputs</span><span class="o">/</span><span class="n">act_weigh_07271539</span><span class="o">/</span><span class="n">pretrained_model</span> \
  <span class="o">--</span><span class="n">policy_device</span><span class="o">=</span><span class="n">cuda</span> \
  <span class="o">--</span><span class="n">actions_per_chunk</span><span class="o">=</span><span class="mi">100</span> \
  <span class="o">--</span><span class="n">fps</span><span class="o">=</span><span class="mi">30</span> \
  <span class="o">--</span><span class="n">server_address</span><span class="o">=</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span> \
  <span class="o">--</span><span class="n">chunk_size_threshold</span><span class="o">=</span><span class="mf">0.1</span>
</code></pre></div>
<p>ä»¥ä¸Šå°±æ˜¯ç”¨SSHéš§é“çš„æ–¹å¼å®ç°å¼‚æ­¥æ¨ç†çš„è¿‡ç¨‹ã€‚</p>
<p>å‚è€ƒï¼š<a href="https://hugging-face.cn/docs/lerobot/async">https://hugging-face.cn/docs/lerobot/async</a></p>
<h2 id="_6">å¸¸è§é—®é¢˜</h2>
<p><strong>ï¼ˆ0ï¼‰æœåŠ¡å™¨ç›‘æ§æ—¥å¿—åˆ†æ</strong> <a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_b75dc8dedf39195b700bc485ef5d2d88_1756880289.png"><img alt="" src="assets/doc/04-ai/lerobot/smolvlaç­–ç•¥serverä¸clientåˆ†ç¦»éƒ¨ç½²å®è·µ/images/wp_editor_md_b75dc8dedf39195b700bc485ef5d2d88_1756880289.png"/></a></p>
<ul>
<li>Received observation #136ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°ç¬¬136ä¸ªè§‚å¯Ÿæ•°æ®</li>
<li>Avg FPS: 11.52ï¼šå®é™…è§‚æµ‹æ•°æ®å¸§ç‡ï¼Œæ ¹æ®å®¢æˆ·ç«¯æ¯ç§’é‡‡æ ·æ—¶é—´è®¡ç®—ï¼Œè·ŸæœåŠ¡ç«¯æ²¡æœ‰å…³ç³»ã€‚</li>
<li>Target:ç›®æ ‡è®¾ç½®çš„è§‚æµ‹æ•°æ®å¸§ç‡ï¼Œå¦‚15å¸§/sã€‚</li>
<li>One-way latency: å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„å•å‘ç½‘ç»œå»¶è¿Ÿä¸º1.71msã€‚</li>
<li>inference time: æ¨¡å‹æ¨ç†è€—æ—¶æ—¶é•¿ä¸º1667msã€‚</li>
<li>action chunk #136ï¼šç”Ÿæˆäº†ç¬¬136ä¸ªåŠ¨ä½œå—ã€‚</li>
<li>Total time: æ¨ç†+åºåˆ—åŒ–æ€»å¤„ç†æ—¶é•¿ã€‚</li>
</ul>
<p><strong>ï¼ˆ1ï¼‰æœåŠ¡ç«¯å®é™…çš„è§‚æµ‹å¸§ç‡ä½</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">INFO</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span> <span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">05</span> <span class="n">y_server</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">175</span> <span class="n">Received</span> <span class="n">observation</span> <span class="c1">#573 | Avg FPS: 1.20 | Target: 30.00 | One-way latency: 35.78ms</span>
</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„æ”¶åˆ°çš„è§‚æµ‹å¸§ç‡å¹³å‡åªæœ‰1.2ï¼Œçœ‹çœ‹æœåŠ¡ç«¯è®¡ç®—FPSçš„é€»è¾‘ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># æ¯æ¬¡æ¥æ”¶è§‚æµ‹æ—¶è°ƒç”¨</span>
<span class="bp">self</span><span class="o">.</span><span class="n">total_obs_count</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># åŒ…æ‹¬æ‰€æœ‰æ¥æ”¶çš„è§‚æµ‹ï¼ˆåŒ…æ‹¬è¢«è¿‡æ»¤çš„ï¼‰</span>
<span class="n">total_duration</span> <span class="o">=</span> <span class="n">current_timestamp</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_timestamp</span>
<span class="n">avg_fps</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_obs_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total_duration</span>
</code></pre></div>
<p>å½±å“æœåŠ¡ç«¯çš„æ¥å—è§‚æµ‹å¸§å¸§ç‡çš„æœ‰å®¢æˆ·ç«¯è§‚æµ‹å‘é€é¢‘ç‡ä½ï¼ŒæœåŠ¡ç«¯è§‚æµ‹è¢«è¿‡æ»¤ï¼Œæ¨ç†æ—¶é—´é•¿é—´æ¥å½±å“</p>
<p>å…³äºå®¢æˆ·ç«¯è§‚æµ‹æ•°æ®çš„å‘é€é™åˆ¶å¦‚ä¸‹ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># åªæœ‰å½“é˜Ÿåˆ—å¤§å°/åŠ¨ä½œå—å¤§å° &lt;= é˜ˆå€¼æ—¶æ‰å‘é€è§‚æµ‹</span>
<span class="k">if</span> <span class="n">queue_size</span> <span class="o">/</span> <span class="n">action_chunk_size</span> <span class="o">&lt;=</span> <span class="n">chunk_size_threshold</span><span class="p">:</span>
    <span class="n">send_observation</span><span class="p">()</span>
</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°åªæœ‰æ»¡è¶³ä¸Šé¢çš„å°äºåŠ¨ä½œé˜ˆå€¼æ‰ä¼šå‘é€ï¼Œæ‰€ä»¥è¦åŠ å¤§å‘é€çš„å¸§ç‡éœ€è¦æ”¹å¤§é˜ˆå€¼chunk_size_thresholdï¼Œå‡å°‘actions_per_chunkï¼Œå‡å°‘queue_sizeã€‚</p>
<p>å¯¹äºACTç­–ç•¥çš„FPS ä½å¯èƒ½ä¸æ˜¯é—®é¢˜ï¼Œè¿™æ˜¯è§‚å¯Ÿå‘é€é¢‘ç‡ï¼Œä¸æ˜¯æ§åˆ¶é¢‘ç‡ï¼Œå› ä¸ºACT ç­–ç•¥å°±æ˜¯ä½é¢‘è§‚å¯Ÿï¼Œé«˜é¢‘æ‰§è¡Œï¼Œä¸»è¦çœ‹æœºå™¨æ˜¯ä¸æ˜¯ä»¥30FPSåŠ¨ä½œæ‰§è¡Œå°±å¥½ã€‚smolvlaä¹Ÿæ˜¯åŒæ ·çš„ã€‚å› æ­¤æœ‰æ—¶å€™ä¸è¦è¿‡äºè¯¯è§£è¿™ä¸ªè§‚æµ‹å¸§ç‡ï¼Œå¤ªé«˜çš„è§‚æµ‹å¸§ç‡ä¹Ÿä¸ä¸€å®šæ˜¯å¥½äº‹ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰è§‚æµ‹æ•°æ®è¢«è¿‡æ»¤</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">y_server</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">191</span> <span class="n">Observation</span> <span class="c1">#510 has been filtered out</span>
</code></pre></div>
<p>æœåŠ¡ç«¯ä¼šæ ¹æ®è¿™æ¬¡å’Œä¸Šæ¬¡çš„å…³èŠ‚è§’åº¦è®¡ç®—æ¬§æ‹‰æ¥åˆ¤æ–­ç›¸ä¼¼æ€§ï¼Œé»˜è®¤çš„é˜ˆå€¼å‚æ•°æ˜¯1ï¼Œå¯ä»¥æ”¹å°ä¸€ç‚¹ï¼Œå¯¹ç›¸ä¼¼æ€§çš„åˆ¤æ–­ä¸¥è‹›ä¸€ä¸‹ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">observations_similar</span><span class="p">(</span>
    <span class="n">obs1</span><span class="p">:</span> <span class="n">TimedObservation</span><span class="p">,</span> <span class="n">obs2</span><span class="p">:</span> <span class="n">TimedObservation</span><span class="p">,</span> <span class="n">lerobot_features</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="n">atol</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

    <span class="o">......</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">obs1_state</span> <span class="o">-</span> <span class="n">obs2_state</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">atol</span><span class="p">)</span>
</code></pre></div>
<p>å¦‚ä¸Šä¿®æ”¹atolçš„å€¼ï¼Œå¯ä»¥æ”¹å°ä¸ºå¦‚0.5ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<p>å¯¹äºåˆ†å¸ƒå¼æ¨ç†ä¸è¦è¿‡äºå»çº ç»“å®é™…çš„è§‚æµ‹å¸§ç‡ï¼Œè€Œæ˜¯åº”è¯¥çœ‹æ§åˆ¶çš„å®é™…å¸§ç‡ï¼Œåªè¦æ§åˆ¶åŠ¨ä½œçš„å¸§ç‡ï¼ˆå¦‚ä¸‹çš„å»¶æ—¶ï¼Œå¤§æ¦‚å°±æ˜¯30fpsï¼‰æ˜¯æ»¡è¶³çš„å°±æ˜¯å¯ä»¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>åŠ¨ä½œé˜Ÿåˆ—ä¸­åŠ¨ä½œä¸è¦å»è·å–çš„æ—¶å€™æ˜¯ç©º</strong>ã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_3bab26c56077e2d4de46ea01581308bb_1756886124.png"><img alt="" src="assets/doc/04-ai/lerobot/smolvlaç­–ç•¥serverä¸clientåˆ†ç¦»éƒ¨ç½²å®è·µ/images/wp_editor_md_3bab26c56077e2d4de46ea01581308bb_1756886124.png"/></a></p>
<p>å¯¹äºå‚æ•°ä¼˜åŒ–é‡ç‚¹çœ‹æœåŠ¡ç«¯çš„æ¨ç†å»¶æ—¶å’Œå®¢æˆ·ç«¯çš„é˜Ÿåˆ—ç®¡ç†ã€‚</p>
<p>æœåŠ¡ç«¯æ˜¯å¯ä»¥è®¾ç½®æ¨ç†å»¶æ—¶çš„</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># æ¨ç†å»¶è¿Ÿæ§åˆ¶</span>
<span class="o">--</span><span class="n">inference_latency</span><span class="o">=</span><span class="mf">0.033</span>  <span class="c1"># æ¨¡å‹æ¨ç†å»¶è¿Ÿï¼ˆç§’ï¼‰</span>

<span class="c1"># è§‚å¯Ÿé˜Ÿåˆ—ç®¡ç†</span>
<span class="o">--</span><span class="n">obs_queue_timeout</span><span class="o">=</span><span class="mi">2</span>      <span class="c1"># è·å–è§‚æµ‹é˜Ÿåˆ—è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span>
</code></pre></div>
<p>å®¢æˆ·ç«¯åŠ¨ä½œç®¡ç†</p>
<div class="codehilite"><pre><span></span><code><span class="o">--</span><span class="n">actions_per_chunk</span><span class="o">=</span><span class="mi">100</span>    <span class="c1"># ä¸€ä¸ªåŠ¨ä½œå—çš„åºåˆ—å¤§å°ï¼Œè¶Šå¤§æ¨ç†è´Ÿè½½å°±é‡</span>
<span class="o">--</span><span class="n">chunk_size_threshold</span><span class="o">=</span><span class="mf">0.5</span> <span class="c1"># é˜Ÿåˆ—é˜ˆå€¼ï¼Œè¶Šå¤§ç¼“å­˜çš„åŠ¨ä½œåºåˆ—è¶Šå¤šï¼Œè¶Šå°å®æ—¶æ€§è¶Šå¥½ã€‚</span>
<span class="o">--</span><span class="n">fps</span><span class="o">=</span><span class="mi">30</span>                  <span class="c1"># æ§åˆ¶é¢‘ç‡</span>
</code></pre></div>
<p>å¦‚æœè¦ä½å»¶æ—¶é‚£ä¹ˆå°±éœ€è¦æŠŠfpsæé«˜ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡ç«¯çš„æ¨ç†æ—¶é—´è®¾ç½®å°ï¼Œå®¢æˆ·ç«¯çš„chunkã€thresholdè¦å°ï¼Œfpsè¦é«˜ã€‚</p></div>
  <div class="post-nav">
    <a class="prev" href="jetson-nanoå¹³å°éšè®°.html">â† Jetson nanoå¹³å°éšè®°</a>
    <a class="next" href="lerobot-smolvla-ä»è®­ç»ƒåˆ°æ¨ç†é“¾è·¯å‰–æ.html">LeRobot SmolVLAï¼šä»è®­ç»ƒåˆ°æ¨ç†é“¾è·¯å‰–æ â†’</a>
  </div>
</article>

      </section>

      <aside class="right-panel">
        
      </aside>
    </main>

    <footer class="site-footer">
      <div class="container">Copyright Â©2022-2025 laumy ç‰ˆæƒæ‰€æœ‰</div>
    </footer>

    <script src="assets/site.js"></script>
  </body>
  </html>

