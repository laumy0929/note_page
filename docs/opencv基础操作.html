<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>opencvåŸºç¡€æ“ä½œ - Laumyçš„æŠ€æœ¯æ ˆ</title>
    <link rel="stylesheet" href="assets/style.css">
    <!-- MathJaxæ”¯æŒLaTeXæ•°å­¦å…¬å¼ -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          ignoreHtmlClass: 'tex2jax_ignore',
          processHtmlClass: 'tex2jax_process'
        }
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="logo" href="./">Laumyçš„æŠ€æœ¯æ ˆ</a>
        <div class="search">
          <input id="search-input" type="text" placeholder="è¾“å…¥å…³é”®è¯å›è½¦æœç´¢">
        </div>
        <div class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜" id="theme-toggle">â˜¾</div>
        <nav class="top-nav">
          <div class="nav-item"><a href="./">é¦–é¡µ</a></div>
          <div class="nav-item site-link">
            <a href="https://www.laumy.tech" target="_blank" title="è®¿é—®ä¸»ç«™">ä¸»ç«™ç‚¹:www.laumy.tech</a>
          </div>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <aside class="left-nav">
        
        <div class="card">
          <div class="card-title">æ–‡ç« ç›®å½•</div>
          <nav id="toc"><ul><li><a href="#_1">å›¾åƒçš„è¯»å–å’Œæ˜¾ç¤º</a><ul><li><a href="#_2">è¯»å†™å›¾åƒ</a></li><li><a href="#_3">æ˜¾ç¤º</a></li><li><a href="#_4">ç¤ºä¾‹</a></li></ul></li><li><a href="#_5">å‡ ä½•å˜æ¢</a><ul><li><a href="#_6">è£å‰ªä¸ç¼©æ”¾</a></li><li><a href="#_7">æ—‹è½¬</a></li><li><a href="#_8">ç¿»è½¬</a></li></ul></li><li><a href="#_9">é¢œè‰²å˜æ¢</a><ul><li><a href="#_10">é¢œè‰²ç©ºé—´è½¬æ¢</a></li><li><a href="#_11">é€šé“åˆ†ç¦»</a></li></ul></li><li><a href="#_12">æ€»ç»“</a><ul><li><a href="#mat">Mat</a></li><li><a href="#scalar">Scalar</a></li><li><a href="#size">Size</a></li><li><a href="#cvtcolor">cvtColor</a></li></ul></li></ul></nav>
        </div>
        
      </aside>

      <section class="content">
        
<article class="card post">
  <h1>opencvåŸºç¡€æ“ä½œ</h1>
  <div class="meta">
    <span class="meta-item">
      <i class="icon">ğŸ•’</i>
      2025-05-27
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ“‚</i>
      ai
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ‘¤</i>
      laumy
    </span>
  </div>
  <div class="post-content"><h2 id="_1">å›¾åƒçš„è¯»å–å’Œæ˜¾ç¤º</h2>
<h3 id="_2">è¯»å†™å›¾åƒ</h3>
<div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">"image.jpg"</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">IMREAD_COLOR</span><span class="p">);</span>
</code></pre></div>
<p>ä½¿ç”¨imreadå‡½æ•°è¯»å–å›¾åƒï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›¾åƒæ–‡ä»¶çš„è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è§£é‡Šå›¾åƒçš„é¢œè‰²å’Œæ ¼å¼ï¼ˆå¦‚å½©è‰²å›¾åƒã€ç°åº¦å›¾åƒç­‰ï¼‰ã€‚ç¬¬äºŒä¸ªå‚æ•°å¯çœç•¥ï¼Œé»˜è®¤æ˜¯cv::IMREAD_COLORï¼Œä»¥å½©è‰²å›¾åƒè¯»å–ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">::</span><span class="n">imwrite</span><span class="p">(</span><span class="s">"output.jpg"</span><span class="p">,</span><span class="w"> </span><span class="n">image</span><span class="p">);</span>
</code></pre></div>
<p>ä½¿ç”¨imwriteå­˜å‚¨å›¾åƒã€‚</p>
<h3 id="_3">æ˜¾ç¤º</h3>
<p><strong>ä½¿ç”¨imshowåŸºäºå›¾åƒç”¨æˆ·ç•Œé¢çš„æ˜¾ç¤ºæ–¹å¼</strong>ï¼Œè¿™ç§æ–¹å¼ç”¨äºæ¡Œé¢çš„è®¡ç®—æœºï¼Œç›´æ¥åœ¨å±å¹•ä¸Šå±•ç¤ºå›¾åƒã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">"Window title"</span><span class="p">,</span><span class="w"> </span><span class="n">image</span><span class="p">);</span>
<span class="n">cv</span><span class="o">::</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// ç­‰å¾…æŒ‰é”®æŒ‰ä¸‹</span>
</code></pre></div>
<p><strong>é€šè¿‡/dev/fb0èŠ‚ç‚¹å†™å…¥</strong>ï¼Œè¿™ç§æ–¹å¼ä¸€èˆ¬åº”ç”¨åœ¨åµŒå…¥å¼å¹³å°ä¸Šï¼Œå†™å…¥å±å¹•çš„é©±åŠ¨ä¸­ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="w"> </span><span class="n">ofs</span><span class="p">(</span><span class="s">"/dev/fb0"</span><span class="p">);</span>

<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">;</span>
<span class="n">å®šä¹‰ä¸€ä¸ªå­˜å‚¨å›¾åƒåƒç´ æ•°æ®çš„å®¹å™¨</span>

<span class="nf">cv::cvtColor</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_BGR2BGR565</span><span class="p">);</span>
<span class="n">å°†å›¾åƒæ ¼å¼è¿›è¡Œè½¬æ¢ä¸ºä¸é©±åŠ¨æ”¯æŒçš„æ ¼å¼BGR565</span>

<span class="n">ofs</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">framebuffer</span><span class="p">.</span><span class="n">ptr</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">.</span><span class="n">total</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">.</span><span class="n">elemSize</span><span class="p">());</span>

<span class="c1">//ç°å°†framebufferå¼ºåˆ¶è½¬æ¢ä¸ºchar*æ ¼å¼ï¼Œç¡®ä¿å†…å­˜æ•°æ®æŒ‰å­—èŠ‚è¿›è¡Œå¤„ç†ã€‚</span>
<span class="c1">//framebuffer.total()è¿”å›çš„æ˜¯åƒç´ æ€»å…ƒç´ æ•°é‡ï¼Œå¦‚æœframebufferæ˜¯å¤šé€šé“ï¼Œé‚£å°±è¿”å›æ€»æ•°</span>
<span class="c1">//framebuffer.elemSize()è¿”å›çš„æ˜¯æ¯ä¸ªåƒç´ å­—èŠ‚å¤§å°ã€‚</span>
<span class="c1">//éœ€è¦æ³¨æ„çš„æ˜¯ä½¿ç”¨ä¸€æ¬¡æ€§å†™å…¥ï¼Œè¦æ³¨æ„fbçš„ä½ç½®ï¼Œæ¯æ¬¡å†™éœ€è¦é‡æ–°å®šä½</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code><span class="n">è¿˜æœ‰å¦å¤–ä¸€ç§å†™æ³•</span><span class="err">ï¼Œ</span><span class="n">æ¯ä¸€è¡Œæ¯ä¸€è¡Œçš„åˆ·æ–°</span>

<span class="n">cv</span><span class="o">::</span><span class="n">Size2f</span><span class="w"> </span><span class="n">frame_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>

<span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span><span class="w"> </span><span class="n">framebuffer_compat</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_BGR2BGR565</span><span class="p">);</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">frame_size</span><span class="p">.</span><span class="n">height</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ofs</span><span class="p">.</span><span class="n">seekp</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">framebuffer_width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">    </span><span class="c1">//å®šä½ä¸€è¡Œçš„ä½ç½®ï¼Œframebuffer_widthæ˜¯å®½ï¼Œå³æ¯è¡Œå¤šå°‘ä¸ªåƒç´ </span>
<span class="w">    </span><span class="c1">//*2æ˜¯æ¯ä¸ªåƒç´ å¤šå°‘ä¸ªå­—èŠ‚ï¼ŒBGR565æ˜¯2ä¸ªå­—èŠ‚ã€‚</span>
<span class="w">    </span><span class="n">ofs</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">framebuffer_compat</span><span class="p">.</span><span class="n">ptr</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span><span class="w"> </span><span class="n">frame_size</span><span class="p">.</span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">    </span><span class="c1">//å†™å…¥ä¸€è¡Œæ•°æ®ï¼Œä¸€è¡Œçš„æ•°æ®é‡ä¸ºframe_size.width * 2</span>
<span class="p">}</span>

<span class="n">ä¸‹é¢æ˜¯å°è£…çš„ç¤ºä¾‹å‡½æ•°</span>
<span class="kt">void</span><span class="w"> </span><span class="n">display_image</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="o">&amp;</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">framebuffer_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">720</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="w"> </span><span class="n">ofs</span><span class="p">(</span><span class="s">"/dev/fb0"</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">ofs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Error: Could not open framebuffer device!"</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">channels</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_GRAY2BGRA</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">channels</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_BGR2BGRA</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">channels</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">image</span><span class="p">.</span><span class="n">copyTo</span><span class="p">(</span><span class="n">framebuffer</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Error: Unsupported image format!"</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Size2f</span><span class="w"> </span><span class="n">frame_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">frame_size</span><span class="p">.</span><span class="n">width</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">framebuffer_width</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// è®¡ç®—æ–°çš„å®½é«˜ï¼Œä¿æŒå›¾åƒçš„çºµæ¨ªæ¯”</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">aspect_ratio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frame_size</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">frame_size</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">newWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">framebuffer_width</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">newHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">newWidth</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">aspect_ratio</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// è°ƒæ•´å›¾åƒå¤§å°</span>
<span class="w">        </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">resizedImage</span><span class="p">;</span>
<span class="w">        </span><span class="n">cv</span><span class="o">::</span><span class="n">resize</span><span class="p">(</span><span class="n">framebuffer</span><span class="p">,</span><span class="w"> </span><span class="n">resizedImage</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">Size</span><span class="p">(</span><span class="n">newWidth</span><span class="p">,</span><span class="w"> </span><span class="n">newHeight</span><span class="p">));</span>
<span class="w">        </span><span class="n">framebuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resizedImage</span><span class="p">;</span>
<span class="w">        </span><span class="n">frame_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resizedImage</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">frame_size</span><span class="p">.</span><span class="n">height</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ofs</span><span class="p">.</span><span class="n">seekp</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">framebuffer_width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>
<span class="w">        </span><span class="n">ofs</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">framebuffer</span><span class="p">.</span><span class="n">ptr</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span><span class="w"> </span><span class="n">frame_size</span><span class="p">.</span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_4">ç¤ºä¾‹</h3>
<div class="codehilite"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">test_image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">"test.jpg"</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">test_image</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Could not open the image"</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="w"> </span><span class="n">ofs</span><span class="p">(</span><span class="s">"/dev/fb0"</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">ofs</span><span class="p">.</span><span class="n">is_open</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Failed to open framebuffer device."</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// å°† BGR å›¾åƒè½¬æ¢ä¸º BGRA æ ¼å¼ï¼ˆRGB8888ï¼‰</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">;</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">test_image</span><span class="p">,</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_BGR2BGRA</span><span class="p">);</span>

<span class="w">    </span><span class="n">ofs</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">framebuffer</span><span class="p">.</span><span class="n">ptr</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span><span class="w"> </span>
<span class="w">        </span><span class="n">framebuffer</span><span class="p">.</span><span class="n">total</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">.</span><span class="n">elemSize</span><span class="p">());</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="_5">å‡ ä½•å˜æ¢</h2>
<p>è¿™é‡Œçš„å˜æ¢æŒ‡çš„æ˜¯ç¼©æ”¾ã€æ—‹è½¬ã€å¹³ç§»ã€ç¿»è½¬ã€‚</p>
<h3 id="_6">è£å‰ªä¸ç¼©æ”¾</h3>
<p>ç¼©æ”¾</p>
<div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">resizedImage</span><span class="p">;</span>
<span class="n">cv</span><span class="o">::</span><span class="n">resize</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">resizedImage</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">Size</span><span class="p">(</span><span class="n">newWidth</span><span class="p">,</span><span class="w"> </span><span class="n">newHeight</span><span class="p">));</span>
</code></pre></div>
<p>è£å‰ª</p>
<div class="codehilite"><pre><span></span><code><span class="n">Rect</span><span class="w"> </span><span class="nf">roi</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span><span class="w"> </span><span class="c1">// (x, y, width, height)</span>
<span class="c1">//å…ˆäºx,yåæ ‡å¼€å§‹ï¼Œå†æŒ‰ç…§widthï¼Œheightå®šä¹‰ä¸€ä¸ªçŸ©å½¢æ¡†ã€‚</span>
<span class="n">Mat</span><span class="w"> </span><span class="n">croppedImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">image</span><span class="p">(</span><span class="n">roi</span><span class="p">);</span>
<span class="c1">//å°†çŸ©å½¢æ¡†ä½œç”¨åœ¨imageä¸Šï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å›¾åƒcroppedImage</span>
</code></pre></div>
<h3 id="_7">æ—‹è½¬</h3>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="c1">// cv::Point2fç”¨äºè¡¨ç¤ºäºŒç»´æµ®ç‚¹åæ ‡çš„ç±»ï¼Œä¸‹é¢æ˜¯è®¡ç®—æ—‹è½¬ä¸­å¿ƒç‚¹ã€‚</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Point2f</span><span class="w"> </span><span class="nf">center</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">cols</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="n">image</span><span class="p">.</span><span class="n">rows</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// ç”¨äºè®¡ç®—äºŒç»´æ—‹è½¬çš„ä»¿å°„å˜æ¢çŸ©é˜µï¼Œ45æ˜¯æ—‹è½¬è§’åº¦ï¼Œ1.0æ˜¯ç¼©æ”¾æ¯”ä¾‹ã€‚</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">rotationMatrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">getRotationMatrix2D</span><span class="p">(</span><span class="n">center</span><span class="p">,</span><span class="w"> </span><span class="mf">45.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// å£°æ˜å­˜å‚¨æ—‹è½¬åå›¾åƒçš„å˜é‡</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">rotatedImage</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// æ‰§è¡Œä»¿å°„å˜æ¢è¿›è¡Œå›¾åƒæ—‹è½¬</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">rotatedImage</span><span class="p">,</span><span class="w"> </span><span class="n">rotationMatrix</span><span class="p">,</span><span class="w"> </span><span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
</code></pre></div>
<h3 id="_8">ç¿»è½¬</h3>
<div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">flippedImage</span><span class="p">;</span>
<span class="n">cv</span><span class="o">::</span><span class="n">flip</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">flippedImage</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// 1è¡¨ç¤ºæ°´å¹³ç¿»è½¬ï¼Œ0è¡¨ç¤ºå‚ç›´ç¿»è½¬</span>
</code></pre></div>
<h2 id="_9">é¢œè‰²å˜æ¢</h2>
<p>å›¾åƒçš„é¢œè‰²ç©ºé—´åŒ…æ‹¬RGBã€ç°åº¦å’ŒHSVç­‰ã€‚</p>
<ul>
<li>RGBï¼šRGBæ˜¯æœ€å¸¸è§çš„é¢œè‰²ç©ºé—´ï¼Œè¡¨ç¤ºçº¢ã€ç»¿ã€è“ä¸‰ä¸ªé€šé“ã€‚</li>
<li>ç°åº¦ï¼šç°åº¦å›¾åƒåªæœ‰ä¸€ä¸ªé€šé“ï¼Œè¡¨ç¤ºäº®åº¦ã€‚</li>
<li>HSVï¼šHSVé¢œè‰²ç©ºé—´è¡¨ç¤ºè‰²è°ƒï¼ˆHueï¼‰ã€é¥±å’Œåº¦ï¼ˆSaturationï¼‰å’Œäº®åº¦ï¼ˆValueï¼‰ã€‚</li>
</ul>
<h3 id="_10">é¢œè‰²ç©ºé—´è½¬æ¢</h3>
<p><strong>RGBè½¬ç°åº¦</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">grayImage</span><span class="p">;</span>
<span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">grayImage</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_BGR2GRAY</span><span class="p">);</span>
</code></pre></div>
<p><strong>RGBè½¬HSV</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">hsvImage</span><span class="p">;</span>
<span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">hsvImage</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_BGR2HSV</span><span class="p">);</span>
</code></pre></div>
<p><strong>RGBè½¬RGB565</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">rgb565Image</span><span class="p">;</span>
<span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">rgb565Image</span><span class="p">,</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_BGR2BGR565</span><span class="p">);</span>
</code></pre></div>
<h3 id="_11">é€šé“åˆ†ç¦»</h3>
<p>è¿™é‡Œçš„é€šé“æŒ‡çš„æ˜¯å›¾åƒé€šé“æ¯”å¦‚RGBçš„R/G/B 3ä¸ªé€šé“ã€‚é€šé“åˆ†ç¦»çš„åœºæ™¯æ˜¯åˆ†ææ¯ä¸ªé¢œè‰²é€šé“çš„åƒç´ å€¼ï¼Œæ¯”å¦‚åœ¨æ£€æµ‹çº¢è‰²ç‰©ä½“æ—¶ï¼Œå¯ä»¥å•ç‹¬åˆ†æçº¢è‰²é€šé“ã€‚å¦å¤–è¿˜å¯ä»¥ç”¨åšå›¾åƒå¢å¼ºï¼Œå¯¹ä¸åŒé€šé“åº”ç”¨ä¸åŒçš„å¢å¼ºç®—æ³•ï¼Œç„¶åå†åˆå¹¶ã€‚</p>
<p><strong>é€šé“åˆ†ç¦»</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="o">&gt;</span><span class="w"> </span><span class="n">channels</span><span class="p">;</span><span class="w"> </span><span class="c1">//åˆ†ç¦»å‡ºçš„é€šé“å­˜å‚¨åˆ°channelsä¸­</span>
<span class="n">cv</span><span class="o">::</span><span class="n">split</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">channels</span><span class="p">);</span>
</code></pre></div>
<p><strong>é€šé“åˆå¹¶</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">mergedImage</span><span class="p">;</span>
<span class="n">cv</span><span class="o">::</span><span class="n">merge</span><span class="p">(</span><span class="n">channels</span><span class="p">,</span><span class="w"> </span><span class="n">mergedImage</span><span class="p">);</span>
</code></pre></div>
<p>ç¤ºä¾‹ä»£ç </p>
<div class="codehilite"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">test_image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">"test.jpg"</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">test_image</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Could not open the image"</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">90</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// è®¡ç®—æ—‹è½¬ä¸­å¿ƒç‚¹</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Point2f</span><span class="w"> </span><span class="n">center</span><span class="p">(</span><span class="n">test_image</span><span class="p">.</span><span class="n">cols</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="n">test_image</span><span class="p">.</span><span class="n">rows</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="c1">// è®¡ç®—æ—‹è½¬çŸ©é˜µ</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">rotationMatrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">getRotationMatrix2D</span><span class="p">(</span><span class="n">center</span><span class="p">,</span><span class="w"> </span><span class="n">angle</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="c1">// å£°æ˜å­˜å‚¨æ—‹è½¬åå›¾åƒçš„å˜é‡</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">rotatedImage</span><span class="p">;</span><span class="w"> </span>
<span class="w">    </span><span class="c1">// æ‰§è¡Œä»¿å°„å˜æ¢è¿›è¡Œå›¾åƒæ—‹è½¬</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">test_image</span><span class="p">,</span><span class="w"> </span><span class="n">rotatedImage</span><span class="p">,</span><span class="w"> </span><span class="n">rotationMatrix</span><span class="p">,</span><span class="w"> </span><span class="n">test_image</span><span class="p">.</span><span class="n">size</span><span class="p">());</span><span class="w"> </span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="w"> </span><span class="n">ofs</span><span class="p">(</span><span class="s">"/dev/fb0"</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">ofs</span><span class="p">.</span><span class="n">is_open</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Failed to open framebuffer device."</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// å°† BGR å›¾åƒè½¬æ¢ä¸º BGRA æ ¼å¼ï¼ˆRGB8888ï¼‰</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">;</span>
<span class="w">    </span><span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">rotatedImage</span><span class="p">,</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_BGR2BGRA</span><span class="p">);</span>

<span class="w">    </span><span class="n">ofs</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">framebuffer</span><span class="p">.</span><span class="n">ptr</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span><span class="w"> </span>
<span class="w">        </span><span class="n">framebuffer</span><span class="p">.</span><span class="n">total</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">framebuffer</span><span class="p">.</span><span class="n">elemSize</span><span class="p">());</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="_12">æ€»ç»“</h2>
<p>æœ¬ç« èŠ‚æ€»ç»“opencvæ“ä½œå¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚</p>
<h3 id="mat">Mat</h3>
<p>Matå¯¹è±¡çš„ç”¨é€”ä¸»è¦ä¸ºå­˜å‚¨å›¾åƒã€åˆ›å»ºå’Œæ“ä½œå¤šç»´çŸ©é˜µã€‚Matæ•°æ®ç±»å‹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šä¿¡æ¯å¤´+æŒ‡å‘åƒç´ æ•°æ®çš„çŸ©é˜µæŒ‡é’ˆï¼Œä¿¡æ¯å¤´å­˜å‚¨çš„æ˜¯å›¾åƒçš„å°ºå¯¸ã€å­˜å‚¨æ–¹æ³•ã€å­˜å‚¨åœ°å€ã€‚æŒ‡å‘åƒç´ çš„çŸ©é˜µæŒ‡é’ˆä¸ºå­—é¢æ„æ€ï¼Œå³æŒ‡å‘å­˜å‚¨æ‰€æœ‰åƒç´ å€¼çš„çŸ©é˜µæŒ‡é’ˆã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">Mat</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">C</span><span class="p">;</span><span class="w">  </span><span class="c1">//åªåˆ›å»ºä¿¡æ¯å¤´</span>
<span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">imread</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">IMREAD_COLOR</span><span class="p">);</span><span class="w"> </span><span class="c1">//ä¸ºçŸ©é˜µå¼€è¾Ÿå†…å­˜ç©ºé—´ã€‚</span>
<span class="n">Mat</span><span class="w"> </span><span class="nf">B</span><span class="p">(</span><span class="n">A</span><span class="p">);</span><span class="w"> </span><span class="c1">// Use the copy constructor</span>
<span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">;</span><span class="w"> </span><span class="c1">// Assignment operator</span>
</code></pre></div>
<p>å¦‚æœåœ¨è¯»å–å›¾åƒçš„æ—¶å€™åªæƒ³è·å–å›¾åƒä¸­çš„éƒ¨åˆ†å›¾åƒï¼ˆæ„Ÿå…´è¶£çš„åŒºåŸŸROIï¼‰ï¼Œå¯ä»¥ä½¿ç”¨Rectå’ŒRangeæ¥æ ‡ä¸­æ•°æ®ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">Mat</span><span class="w"> </span><span class="nf">D</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">Rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// using a rectangle</span>
<span class="n">Mat</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="n">Range</span><span class="o">::</span><span class="n">all</span><span class="p">(),</span><span class="w"> </span><span class="n">Range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">));</span><span class="w"> </span><span class="c1">// using row and column boundaries</span>
</code></pre></div>
<p>å…¶ä¸­Rect(10,10,100,100)å‰ä¸¤ä½æ˜¯åæ ‡ï¼Œåä¸¤ä½æŒ‡å®šå®½é«˜ï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/05/wp_editor_md_f2fcbb2b2eab15e13b085cd3f38d21ff.jpg"><img alt="" src="assets/doc/04-ai/opencv/opencvåŸºç¡€æ“ä½œ/images/wp_editor_md_f2fcbb2b2eab15e13b085cd3f38d21ff.jpg"/></a></p>
<p>Range::all()é€‰ä¸­æ‰€æœ‰çš„è¡Œï¼ŒRangeï¼ˆ1,3ï¼‰é€‰ä¸­1~3åˆ—ã€‚</p>
<p>Matå¯¹è±¡ä½œä¸ºé€šç”¨çŸ©é˜µç±»å’Œå›¾åƒå®¹å™¨ï¼Œå®¹å™¨ä¸­å­˜å‚¨çš„æ˜¯åŸå§‹çš„åƒç´ å€¼ã€‚åœ¨opencvä¸­æè¿°è¿™äº›åƒç´ å€¼æœ‰ä¸“é—¨çš„æ•°æ®æ ¼å¼ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">Mat</span><span class="w"> </span><span class="nf">Img</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="n">CV_8UC3</span><span class="p">);</span>
</code></pre></div>
<p>ä¸Šè¿°ä¸­640*640å¤§å°çš„å›¾åƒï¼Œå­˜å‚¨çš„æ•°æ®ç±»å‹æ˜¯CV_U8C3,è¿™é‡Œçš„CV_U8C3æ ¼å¼ä¸ºåŸºæœ¬æ•°æ®ç±»å‹+é€šé“æ•°ã€‚"CV_"è¡¨ç¤ºå‰ç¼€ï¼Œ"8"è¡¨ç¤ºæ¯ä¸ªåƒç´ å€¼çš„ä½æ·±æ¯”ç‰¹æ•°ï¼Œæœ‰8/16/32/64bitsï¼Œ"U"è¡¨ç¤ºæ•°æ®ç±»å‹ä¸ºæ— ç¬¦å·ï¼Œ"C3"è¡¨ç¤ºé€šé“æ•°RGBã€‚å…³äºé€šé“ä¸€èˆ¬æœ‰å‡ ç§ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>1é€šé“ï¼šç°åº¦å›¾åƒ</li>
<li>3é€šé“ï¼šRGBé€šé“ï¼Œå›¾åƒç”±çº¢ã€ç»¿ã€è“ä¸‰è‰²ç»„æˆã€‚</li>
<li>4é€šé“ï¼šåœ¨RGBé€šé“åŸºç¡€ä¸Šï¼ŒåŠ ä¸€ä¸ªé€æ˜é€šé“ã€‚</li>
</ul>
<h3 id="scalar">Scalar</h3>
<p>Scalarç”¨äºè¡¨ç¤ºé¢œè‰²æˆ–åƒç´ çš„å€¼ï¼Œä»–æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œå­˜å‚¨äº†4ä¸ªå€¼ï¼Œæ¯ä¸ªå€¼ä»£è¡¨å›¾åƒçš„é¢œè‰²é€šé“ï¼Œå¦‚BGRæˆ–HSVã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">_Tp</span><span class="o">&gt;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Scalar_</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="o">:</span><span class="w"> </span><span class="n">_Tp</span><span class="w"> </span><span class="n">val</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span><span class="w"> </span><span class="c1">// é¢œè‰²å€¼ï¼Œæœ€å¤šæ”¯æŒå››ä¸ªé€šé“</span>
<span class="w">    </span><span class="p">....</span>
<span class="p">};</span>

<span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">);</span><span class="w"> </span><span class="c1">// çº¢è‰² BGR é¢œè‰²ï¼Œè¡¨ç¤º (è“è‰² = 0, ç»¿è‰² = 0, çº¢è‰² = 255) cv::Scalar(255, 0, 0); // è“è‰² BGR é¢œè‰²ï¼Œè¡¨ç¤º (è“è‰² = 255, ç»¿è‰² = 0, çº¢è‰² = 0) cv::Scalar(0, 255, 0); // ç»¿è‰² BGR é¢œè‰²ï¼Œè¡¨ç¤º (è“è‰² = 0, ç»¿è‰² = 255, çº¢è‰² = 0)</span>

<span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">128</span><span class="p">);</span><span class="w"> </span><span class="c1">// åŠé€æ˜ç»¿è‰²</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">);</span><span class="w"> </span><span class="c1">// å®Œå…¨ä¸é€æ˜çš„è“è‰²</span>
</code></pre></div>
<h3 id="size">Size</h3>
<p>Sizeç±»ç”¨æ¥è¡¨ç¤ºå›¾åƒçš„å¤§å°ã€çŸ©é˜µçš„å°ºå¯¸ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Size</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Size</span><span class="p">();</span>
<span class="w">    </span><span class="n">Size</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">_width</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">_height</span><span class="p">);</span>
<span class="w">    </span><span class="n">Size</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_width</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">_height</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">width</span><span class="p">;</span><span class="w"> </span><span class="c1">// å›¾åƒå®½åº¦</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">height</span><span class="p">;</span><span class="w"> </span><span class="c1">// å›¾åƒé«˜åº¦</span>
<span class="p">};</span>
</code></pre></div>
<p>ä¸‹é¢æ˜¯å¸¸ç”¨çš„ç”¨æ³•ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">è®¾ç½®å›¾åƒçš„å°ºå¯¸</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">"image.jpg"</span><span class="p">);</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Size</span><span class="w"> </span><span class="nf">new_size</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p">);</span><span class="w"> </span><span class="c1">// æ–°çš„å°ºå¯¸</span>
<span class="n">cv</span><span class="o">::</span><span class="n">resize</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">new_size</span><span class="p">);</span><span class="w"> </span><span class="c1">// å°†å›¾åƒè°ƒæ•´ä¸ºæ–°å°ºå¯¸</span>

<span class="n">è·å–å›¾åƒçš„å°ºå¯¸</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">"image.jpg"</span><span class="p">);</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Size</span><span class="w"> </span><span class="n">image_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="c1">// è·å–å›¾åƒå°ºå¯¸</span>

<span class="n">åˆ›å»ºä¸€ä¸ªå°ºå¯¸å¤§å°çš„çŸ©é˜µ</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">mat</span><span class="p">(</span><span class="n">cv</span><span class="o">::</span><span class="n">Size</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">),</span><span class="w"> </span><span class="n">CV_8UC1</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 400x300 çš„å•é€šé“å›¾åƒ</span>
</code></pre></div>
<h3 id="cvtcolor">cvtColor</h3>
<p>cvtColorç”¨äºé¢œè‰²ç©ºé—´çš„è½¬åŒ–ï¼Œå›¾åƒçš„é¢œè‰²ç©ºé—´ä¸€èˆ¬æœ‰RGB,BGRï¼ˆRGBå­˜å‚¨é¡ºåºçš„ä¸åŒï¼‰,HSV,Labç­‰ï¼Œå…¶å¯ä»¥å°†å›¾åƒä»ä¸€ç§é¢œè‰²ç©ºé—´å˜æ¢ä¸ºå¦ä¸€ç§é¢œè‰²ç©ºé—´ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="nf">cv::cvtColor</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="o">&amp;</span><span class="w"> </span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="o">&amp;</span><span class="w"> </span><span class="n">dst</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">dstCn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>srcï¼š è¾“å…¥å›¾åƒ</li>
<li>dstï¼šè¾“å‡ºå›¾åƒ</li>
<li>code:æŒ‡å®šè½¬åŒ–æ ¼å¼ï¼Œå¦‚ cv::COLOR_BGR2GRAYï¼Œcv::COLOR_BGR2HSVã€‚</li>
<li>dstCn:è¾“å‡ºé€šé“æ•°ï¼Œå¦‚æœæ˜¯0ï¼Œè¡¨ç¤ºé€šé“æ•°ä¸ç›®æ ‡é¢œè‰²ç©ºé—´é€šé“åŒ¹é…ã€‚</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="n">RGBè½¬BGR</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">"image.jpg"</span><span class="p">);</span><span class="w"> </span><span class="c1">// è¯»å– RGB å›¾åƒï¼ˆå¦‚æœå›¾åƒæ˜¯ RGB æ ¼å¼çš„è¯ï¼‰</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">bgr</span><span class="p">;</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="n">bgr</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_RGB2BGR</span><span class="p">);</span><span class="w"> </span><span class="c1">// è½¬æ¢ä¸º BGR å›¾åƒ</span>

<span class="n">HSBè½¬BRG</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">hsv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">"image_hsv.jpg"</span><span class="p">);</span><span class="w"> </span><span class="c1">// è¯»å– HSV å›¾åƒ </span>
<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">bgr</span><span class="p">;</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">hsv</span><span class="p">,</span><span class="w"> </span><span class="n">bgr</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_HSV2BGR</span><span class="p">);</span><span class="w"> </span><span class="c1">// è½¬æ¢ä¸º BGR å›¾åƒ</span>

<span class="n">BRGè½¬ç°åº¦</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">"image.jpg"</span><span class="p">);</span><span class="w"> </span><span class="c1">// è¯»å– BGR å›¾åƒ</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="n">gray</span><span class="p">;</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="n">gray</span><span class="p">,</span><span class="w"> </span><span class="n">cv</span><span class="o">::</span><span class="n">COLOR_BGR2GRAY</span><span class="p">);</span><span class="w"> </span><span class="c1">// è½¬æ¢ä¸ºç°åº¦å›¾</span>
</code></pre></div></div>
  <div class="post-nav">
    <a class="prev" href="opencvå›¾åƒå¤„ç†.html">â† opencvå›¾åƒå¤„ç†</a>
    <a class="next" href="opencvè§†é¢‘æµ.html">opencvè§†é¢‘æµ â†’</a>
  </div>
</article>

      </section>

      <aside class="right-panel">
        
      </aside>
    </main>

    <footer class="site-footer">
      <div class="container">Copyright Â©2022-2025 laumy ç‰ˆæƒæ‰€æœ‰</div>
    </footer>

    <script src="assets/site.js"></script>
  </body>
  </html>

