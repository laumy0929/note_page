<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>看wireshark报文技巧 - Laumy的技术栈</title>
    <link rel="stylesheet" href="assets/style.css">
    <!-- MathJax支持LaTeX数学公式 -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          ignoreHtmlClass: 'tex2jax_ignore',
          processHtmlClass: 'tex2jax_process'
        }
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="logo" href="./">Laumy的技术栈</a>
        <div class="search">
          <input id="search-input" type="text" placeholder="输入关键词回车搜索">
        </div>
        <div class="theme-toggle" title="切换主题" id="theme-toggle">☾</div>
        <nav class="top-nav">
          <div class="nav-item"><a href="./">首页</a></div>
          <div class="nav-item site-link">
            <a href="https://www.laumy.tech" target="_blank" title="访问主站">主站点:www.laumy.tech</a>
          </div>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <aside class="left-nav">
        
        <div class="card">
          <div class="card-title">文章目录</div>
          <nav id="toc"><ul><li><a href="#tcp">TCP握手与挥手</a><ul><li><a href="#syncack">握手看SYNC与ACK</a></li><li><a href="#fin">挥手看FIN</a></li></ul></li><li><a href="#_1">报文交互</a><ul><li><a href="#_2">正常交互</a></li><li><a href="#_3">警告交互</a></li></ul></li></ul></nav>
        </div>
        
      </aside>

      <section class="content">
        
<article class="card post">
  <h1>看wireshark报文技巧</h1>
  <div class="meta">
    <span class="meta-item">
      <i class="icon">🕒</i>
      2024-11-23
    </span>
    <span class="meta-item">
      <i class="icon">📂</i>
      网络
    </span>
    <span class="meta-item">
      <i class="icon">👤</i>
      laumy
    </span>
  </div>
  <div class="post-content"><h2 id="tcp">TCP握手与挥手</h2>
<p><a href="https://www.laumy.tech/wp-content/uploads/2024/11/wp_editor_md_15c18286b29b68b5e81affedc114f545.jpg"><img alt="" src="assets/doc/09-网络/关于看wireshark报技巧/images/wp_editor_md_15c18286b29b68b5e81affedc114f545.jpg"/></a></p>
<h3 id="syncack">握手看SYNC与ACK</h3>
<p><a href="https://www.laumy.tech/wp-content/uploads/2024/11/wp_editor_md_0b76ff3c1095a775f6561e404082a17a.jpg"><img alt="" src="assets/doc/09-网络/关于看wireshark报技巧/images/wp_editor_md_0b76ff3c1095a775f6561e404082a17a.jpg"/></a></p>
<p>第一次握手[SYNC]标志, 第二次握手看[SYNC,ACK]标志，第三次ACK。</p>
<h3 id="fin">挥手看FIN</h3>
<p><a href="https://www.laumy.tech/wp-content/uploads/2024/11/wp_editor_md_74a4a9f4a97db492803b8b344c3ed893.jpg"><img alt="" src="assets/doc/09-网络/关于看wireshark报技巧/images/wp_editor_md_74a4a9f4a97db492803b8b344c3ed893.jpg"/></a></p>
<h2 id="_1">报文交互</h2>
<h3 id="_2">正常交互</h3>
<p><a href="https://www.laumy.tech/wp-content/uploads/2024/11/wp_editor_md_57a1b92781a03545a4354152f8a9896d.jpg"><img alt="" src="assets/doc/09-网络/关于看wireshark报技巧/images/wp_editor_md_57a1b92781a03545a4354152f8a9896d.jpg"/></a></p>
<ul>
<li>先看len，当长度为0,这个包是ack包，长度不为0表示是发送的数据包。</li>
<li>再看ack，表示该值以前的序号都收到了。ack是对端上一个报文的seq+len，同时也是期望对端下一个发包。</li>
</ul>
<h3 id="_3">警告交互</h3>
<h4 id="tcp-dup-ack">TCP Dup ACK</h4>
<p><a href="https://www.laumy.tech/wp-content/uploads/2024/11/wp_editor_md_d2c0306a428e6cc86fea8d3fad2a1323.jpg"><img alt="" src="assets/doc/09-网络/关于看wireshark报技巧/images/wp_editor_md_d2c0306a428e6cc86fea8d3fad2a1323.jpg"/></a></p>
<p>重传ACK[TCP dup ack AAA#B],其中A表示重复发送的是哪个number的报文（注意不是seq），B表示这是第几次重复发送ACK。主要有以下场景会导致。</p>
<p>回复的ACK丢了导致对端没有收到，导致对端重复发送报文，以至于期望接收的报文没有收到，需要重复发送ACK。</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2024/11/wp_editor_md_1bdbe614125db82830b425cca9164d31.jpg"><img alt="" src="assets/doc/09-网络/关于看wireshark报技巧/images/wp_editor_md_1bdbe614125db82830b425cca9164d31.jpg"/></a></p>
<p>序列468的重发实际是多余，接收者在466序列已经收到了。</p>
<h4 id="tcp-out-of-order">TCP Out-of-Order</h4>
<p>报文乱序，发送报文的seq不对，一般情况下是对TCP Dup ACK的重传。</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2024/11/wp_editor_md_7a5488ed6e1b1a746aee81e5bd145c28.jpg"><img alt="" src="assets/doc/09-网络/关于看wireshark报技巧/images/wp_editor_md_7a5488ed6e1b1a746aee81e5bd145c28.jpg"/></a></p></div>
  <div class="post-nav">
    <a class="prev" href="libpeer分析.html">← libpeer分析</a>
    <a class="next" href="mqtt协议分析.html">MQTT协议分析 →</a>
  </div>
</article>

      </section>

      <aside class="right-panel">
        
      </aside>
    </main>

    <footer class="site-footer">
      <div class="container">Copyright ©2022-2025 laumy 版权所有</div>
    </footer>

    <script src="assets/site.js"></script>
  </body>
  </html>

