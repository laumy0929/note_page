<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ROS2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€TFã€Gazeboã€rosbagã€rqt - Laumyçš„æŠ€æœ¯æ ˆ</title>
    <link rel="stylesheet" href="assets/style.css">
    <!-- MathJaxæ”¯æŒLaTeXæ•°å­¦å…¬å¼ -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          ignoreHtmlClass: 'tex2jax_ignore',
          processHtmlClass: 'tex2jax_process'
        }
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="logo" href="./">Laumyçš„æŠ€æœ¯æ ˆ</a>
        <div class="search">
          <input id="search-input" type="text" placeholder="è¾“å…¥å…³é”®è¯å›è½¦æœç´¢">
        </div>
        <div class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜" id="theme-toggle">â˜¾</div>
        <nav class="top-nav">
          <div class="nav-item"><a href="./">é¦–é¡µ</a></div>
          <div class="nav-item site-link">
            <a href="https://www.laumy.tech" target="_blank" title="è®¿é—®ä¸»ç«™">ä¸»ç«™ç‚¹:www.laumy.tech</a>
          </div>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <aside class="left-nav">
        
        <div class="card">
          <div class="card-title">æ–‡ç« ç›®å½•</div>
          <nav id="toc"><ul><li><a href="#launch">launch</a><ul><li><a href="#launch_1">launchæ–‡ä»¶ç»“æ„</a></li><li><a href="#_1">ä½¿ç”¨æ­¥éª¤</a></li><li><a href="#_2">è¿›é˜¶åŠŸèƒ½</a></li></ul></li><li><a href="#tf">TF</a><ul><li><a href="#_3">å¹¿æ’­ä¸æŸ¥è¯¢</a></li></ul></li><li><a href="#gazebo">Gazebo</a><ul><li><a href="#_4">å®‰è£…</a></li><li><a href="#_5">æœºå™¨ä»¿çœŸç¤ºä¾‹</a></li><li><a href="#_6">ä¼ æ„Ÿå™¨ç¤ºä¾‹</a></li></ul></li><li><a href="#rviz">RViz</a><ul><li><a href="#tf_1">ç¤ºä¾‹ï¼štfæ•°æ®å¯è§†åŒ–</a></li><li><a href="#_7">ç¤ºä¾‹ï¼šå›¾åƒæ•°æ®å¯è§†åŒ–</a></li></ul></li><li><a href="#rosbag">rosbag</a><ul><li><a href="#_8">è®°å½•æ•°æ®</a></li><li><a href="#_9">å›æ”¾æ•°æ®</a></li></ul></li><li><a href="#rqt">rqt</a><ul><li><a href="#_10">æ—¥å¿—æ˜¾ç¤º</a></li><li><a href="#_11">å›¾åƒæ˜¾ç¤º</a></li><li><a href="#_12">å‘å¸ƒè¯é¢˜/æœåŠ¡æ•°æ®</a></li><li><a href="#_13">ç»˜åˆ¶æ•°æ®æ›²çº¿</a></li><li><a href="#_14">èŠ‚ç‚¹å¯è§†åŒ–</a></li></ul></li></ul></nav>
        </div>
        
      </aside>

      <section class="content">
        
<article class="card post">
  <h1>ROS2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€TFã€Gazeboã€rosbagã€rqt</h1>
  <div class="meta">
    <span class="meta-item">
      <i class="icon">ğŸ•’</i>
      2025-09-18
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ“‚</i>
      rosç³»ç»Ÿ
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ‘¤</i>
      laumy
    </span>
  </div>
  <div class="post-content"><h2 id="launch">launch</h2>
<p>åœ¨ROS2ä¸­ï¼Œlauchæ˜¯ä¸€ä¸ªç¨‹åºå¯åŠ¨å™¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¸€æ¡å‘½ä»¤å¯ä»¥å¯åŠ¨å¤šä¸ªèŠ‚ç‚¹ï¼ŒåŠ è½½å‚æ•°æ–‡ä»¶ï¼ˆYAMLï¼‰ï¼Œé‡æ˜ å°„è¯é¢˜/æœåŠ¡/åŠ¨ä½œåç§°ï¼Œæ¡ä»¶å¯åŠ¨ï¼ˆä»¿çœŸ/çœŸæœºåˆ‡æ¢ï¼‰ï¼ŒåµŒå¥—è°ƒç”¨å…¶ä»–launchæ–‡ä»¶ã€‚</p>
<p>lauchæ–‡ä»¶æ”¯æŒ3ç§æ ¼å¼</p>
<table>
<thead>
<tr>
<th>æ ¼å¼</th>
<th>åç¼€</th>
<th>ç‰¹ç‚¹</th>
<th>æ¨èåº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td>Python</td>
<td><code>.launch.py</code></td>
<td>åŠŸèƒ½æœ€å¼ºï¼Œå¯å†™é€»è¾‘ã€æ¡ä»¶ï¼Œå®˜æ–¹æ¨è</td>
<td>â­â­â­â­â­</td>
</tr>
<tr>
<td>XML</td>
<td><code>.launch.xml</code></td>
<td>ç±»ä¼¼ ROS1ï¼Œç»“æ„æ¸…æ™°ï¼Œä½†çµæ´»æ€§å·®</td>
<td>â­â­</td>
</tr>
<tr>
<td>YAML</td>
<td><code>.launch.yaml</code></td>
<td>ç®€æ´é…ç½®ï¼ŒåŠŸèƒ½æœ€å¼±</td>
<td>â­</td>
</tr>
</tbody>
</table>
<p>ä½†åœ¨ROS2ä¸­ç›®å‰æ›´å¤šçš„ä½¿ç”¨.launch.pyã€‚è¿™é‡Œæˆ‘ä»¬é‡ç‚¹ä»‹ç»æ­¤ç§æ–¹å¼ã€‚</p>
<h3 id="launch_1">launchæ–‡ä»¶ç»“æ„</h3>
<p>æœ€å°çš„ç»“æ„ç¤ºä¾‹</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
        <span class="n">Node</span><span class="p">(</span><span class="n">package</span><span class="o">=</span><span class="s1">'pkg_name'</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="s1">'exe_name'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'node_name'</span><span class="p">)</span>
    <span class="p">])</span>
</code></pre></div>
<p>åˆ›å»ºlaunchæ–‡ä»¶éœ€è¦å¯¼å…¥launchå’Œlaunch_rosæ¨¡å—ï¼Œå…¥å£å‡½æ•°ä¸ºgenerate_launch_description()ï¼Œè¯¥å‡½æ•°ä¸­å®šä¹‰äº†è¦å¯åŠ¨çš„èŠ‚ç‚¹ï¼Œé€šè¿‡LaunchDescriptionæ¥æè¿°èŠ‚ç‚¹å¦‚åŒ…ã€æ‰§è¡Œç¨‹åºã€åç§°ã€‚</p>
<h3 id="_1">ä½¿ç”¨æ­¥éª¤</h3>
<p><strong>ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªåŒ…</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">cd</span> <span class="o">~/</span><span class="n">dev_ws</span><span class="o">/</span><span class="n">src</span>
<span class="n">ros2</span> <span class="n">pkg</span> <span class="n">create</span>  <span class="o">--</span><span class="n">build</span><span class="o">-</span><span class="nb">type</span> <span class="n">ament_python</span> <span class="n">launch_demo</span>
</code></pre></div>
<p><strong>ï¼ˆ2ï¼‰æ–°å»ºlaunchç›®å½•</strong></p>
<p>ä¸€èˆ¬launchæ–‡ä»¶éƒ½ä¼šæœ‰ä¸ªå•ç‹¬çš„ç›®å½•ï¼Œå› æ­¤æ–°å»ºç›®å½•ç”¨äºå­˜æ”¾launchæ–‡ä»¶ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">cd</span> <span class="n">launch_demo</span>
<span class="n">mkdir</span> <span class="n">launch</span>
</code></pre></div>
<p><strong>ï¼ˆ3ï¼‰ç¼–å†™lauchæ–‡ä»¶</strong></p>
<p>demo.launch.py</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
        <span class="n">Node</span><span class="p">(</span><span class="n">package</span><span class="o">=</span><span class="s1">'learn_topic_cpp'</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="s1">'topic_helloworld_pub'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'pub'</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">'screen'</span><span class="p">),</span>
        <span class="n">Node</span><span class="p">(</span><span class="n">package</span><span class="o">=</span><span class="s1">'learn_topic_cpp'</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="s1">'topic_helloworld_sub'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'sub'</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">'screen'</span><span class="p">)</span>
    <span class="p">])</span>
</code></pre></div>
<p><strong>ï¼ˆ4ï¼‰ä¿®æ”¹setup.py</strong></p>
<p>æ³¨å†Œlaunchæ–‡ä»¶ï¼Œä¸»è¦æ˜¯å°†.launchæ–‡ä»¶è¦æ‹·è´åˆ°install/share/xxx/launchç›®å½•ä¸‹ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">find_packages</span><span class="p">,</span> <span class="n">setup</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="o">......</span>
<span class="n">data_files</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">'share'</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="s1">'launch'</span><span class="p">),</span> <span class="n">glob</span><span class="p">(</span><span class="s1">'launch/*.launch.py'</span><span class="p">)),</span>
<span class="p">]</span>
<span class="o">.....</span>
</code></pre></div>
<p>éœ€è¦å¯¼å…¥setuptoolsã€osã€globè¿™å‡ ä¸ªæ¨¡å—ã€‚</p>
<p><strong>ï¼ˆ5ï¼‰ç¼–è¯‘&amp;ç¯å¢ƒåˆ·æ–°</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">cd</span> <span class="o">~/</span><span class="n">dev_ws</span>
<span class="n">colcon</span> <span class="n">build</span>
<span class="n">source</span> <span class="n">install</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span>
</code></pre></div>
<p><strong>ï¼ˆ6ï¼‰è¿è¡Œæµ‹è¯•</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">ros2</span> <span class="n">launch</span> <span class="n">launch_demo</span> <span class="n">demo</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span>
</code></pre></div>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_a5e39581a222a753954ea0749bb42147_1758091020.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_a5e39581a222a753954ea0749bb42147_1758091020.png"/></a></p>
<h3 id="_2">è¿›é˜¶åŠŸèƒ½</h3>
<p><strong>ï¼ˆ1ï¼‰åŠ è½½å‚æ•°</strong></p>
<p>config/params.yaml</p>
<div class="codehilite"><pre><span></span><code><span class="n">my_node</span><span class="p">:</span>
  <span class="n">ros__parameters</span><span class="p">:</span>
    <span class="n">use_sim_time</span><span class="p">:</span> <span class="n">true</span>
    <span class="n">max_speed</span><span class="p">:</span> <span class="mf">2.0</span>
</code></pre></div>
<p>launch æ–‡ä»¶ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">'my_pkg'</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">'my_node'</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="s1">'config/params.yaml'</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>
<p><strong>ï¼ˆ2ï¼‰å‘½ä»¤è¡Œå‚æ•°</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span>
<span class="kn">from</span> <span class="nn">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span>

<span class="n">DeclareLaunchArgument</span><span class="p">(</span><span class="s1">'use_sim_time'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="s1">'false'</span><span class="p">)</span>

<span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">'my_pkg'</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">'my_node'</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[{</span><span class="s1">'use_sim_time'</span><span class="p">:</span> <span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">'use_sim_time'</span><span class="p">)}]</span>
<span class="p">)</span>
</code></pre></div>
<p>åœ¨è¿è¡Œçš„æ—¶å€™å¯ä»¥ä¼ é€’å‚æ•°</p>
<div class="codehilite"><pre><span></span><code><span class="n">ros2</span> <span class="n">launch</span> <span class="n">my_pkg</span> <span class="n">demo</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span> <span class="n">use_sim_time</span><span class="o">:=</span><span class="n">true</span>
</code></pre></div>
<p><strong>ï¼ˆ3ï¼‰æ¡ä»¶å¯åŠ¨</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">launch.conditions</span> <span class="kn">import</span> <span class="n">IfCondition</span>

<span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">'gazebo_ros'</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">'gzserver'</span><span class="p">,</span>
    <span class="n">condition</span><span class="o">=</span><span class="n">IfCondition</span><span class="p">(</span><span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">'use_gazebo'</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<p>åªæœ‰å½“æ¡ä»¶use_gazeboæ»¡è¶³æ—¶æ‰ä¼šå¯åŠ¨ï¼Œå¦‚è¿è¡Œã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">ros2</span> <span class="n">launch</span> <span class="n">my_pkg</span> <span class="n">demo</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span> <span class="n">use_gazebo</span><span class="o">:=</span><span class="n">true</span>
</code></pre></div>
<p><strong>ï¼ˆ4ï¼‰è¯é¢˜é‡æ˜ å°„</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">'my_pkg'</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">'controller'</span><span class="p">,</span>
    <span class="n">remappings</span><span class="o">=</span><span class="p">[(</span><span class="s1">'/cmd_vel'</span><span class="p">,</span> <span class="s1">'/robot1/cmd_vel'</span><span class="p">)]</span>
<span class="p">)</span>
</code></pre></div>
<p>å¯ä»¥å°†èŠ‚ç‚¹ä¸­çš„è¯é¢˜è¿›è¡Œé‡æ˜ å°„ï¼Œå¦‚æŠŠèŠ‚ç‚¹å†…éƒ¨ç”¨åˆ°çš„ /cmd_vel æ”¹åä¸º /robot1/cmd_velï¼Œåœ¨å®é™…åœºæ™¯ä¸­å¤šæœºå™¨äººç³»ç»Ÿå¯ä»¥é¿å…å†²çªã€‚</p>
<h2 id="tf">TF</h2>
<p>TFæ˜¯transformçš„ç¼©å†™ï¼Œå…¶ä½œç”¨ä¸»è¦æ˜¯ç»´æŠ¤å¹¶æŸ¥è¯¢æœºå™¨äººç³»ç»Ÿä¸­å„ä¸ªåæ ‡ç³»ä¹‹é—´çš„å…³ç³»ï¼ˆåŒ…æ‹¬ä½ç½®+å§¿æ€ï¼‰ã€‚å…¶ä¸»è¦çš„æ ¸å¿ƒåŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç®¡ç†å¤šä¸ªåæ ‡ç³»çš„çˆ¶å­å…³ç³»ï¼ˆå„ä¸ªåæ ‡ç³»ä¹‹é—´å½¢æˆä¸€é¢—TFæ ‘ï¼‰</li>
<li>æä¾›ä»»æ„ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„å˜æ¢ï¼ˆå¹³ç§»+æ—‹è½¬ï¼‰</li>
<li>è¯•è¯•å¹¿æ’­ã€æŸ¥è¯¢åæ ‡å…³ç³»ã€‚</li>
</ul>
<p>å¯ä»¥ç†è§£ä¸ºTFå°±åƒæ˜¯ä¸€ä¸ªå…¨å±€çš„æ—¶ç©ºå­—å…¸ï¼Œæ¯ä¸ªåæ ‡ç³»ï¼ˆFrameï¼‰éƒ½æ˜¯å­—å…¸é‡Œçš„keyï¼Œè€Œå˜åŒ–å…³ç³»æ˜¯keyä¹‹é—´çš„linkã€‚</p>
<p>å¸¸è§çš„åæ ‡ç³»æœ‰</p>
<ul>
<li>mapï¼šä¸–ç•Œåœ°å›¾åæ ‡ç³»ï¼Œä¸€èˆ¬æ˜¯é™æ€çš„ï¼Œå½“æœºå™¨äººå®šä½å®Œæˆåï¼Œmapæ˜¯å…¨å±€çš„å‚è€ƒã€‚</li>
<li>odomï¼šé‡Œç¨‹è®¡åæ ‡ç³»ï¼ˆç›¸å¯¹ï¼‰ï¼Œä¼šéšç€æ—¶é—´æ¨ç§»ä¼šæ¼‚ç§»ã€‚</li>
<li>base_linkï¼šæœºå™¨äººæœ¬åœ°ä¸­å¿ƒï¼Œæ˜¯æ‰€æœ‰ä¼ æ„Ÿå™¨å’Œæ§åˆ¶æŒ‡ä»¤çš„åŸºå‡†ã€‚</li>
<li>camera_linkï¼šæ‘„åƒå¤´åæ ‡ç³»ã€‚</li>
<li>laser_linkï¼šé›·è¾¾åæ ‡ç³»ã€‚</li>
</ul>
<p>å…¸å‹çš„TFæ ‘</p>
<div class="codehilite"><pre><span></span><code>map<span class="w"> </span>â†’<span class="w"> </span>odom<span class="w"> </span>â†’<span class="w"> </span>base_link<span class="w"> </span>â†’<span class="w"> </span>camera_link
<span class="w">                     </span>â†’<span class="w"> </span>laser_link
</code></pre></div>
<p>æ¯ä¸ªåæ ‡éƒ½æœ‰ä¸€ä¸ªçˆ¶åæ ‡ç³»ï¼ˆé™¤äº†æ ¹mapï¼‰ï¼Œå˜æ¢æ˜¯å•é¡¹å®šä¹‰çš„ã€‚å­™å­çš„åæ ‡ç³»çš„ä½å§¿ç­‰äºâ€œçˆ¶åæ ‡ç³»çš„ä½å§¿+å­åæ ‡ç³»çš„ç›¸å¯¹ä½å§¿â€ã€‚å¦‚ä¸Šè¦çŸ¥é“mapä¸camera_linkçš„å…³ç³»ã€‚åˆ™T_map_camera = T_map_odom Ã— T_odom_base Ã— T_base_camera</p>
<p>è¿è¡Œå‘½ä»¤ï¼ŒæŸ¥è¯¢ turtle2 åæ ‡ç³»ç›¸å¯¹äº turtle1 åæ ‡ç³»çš„å˜æ¢å…³ç³»ã€‚</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>tf2_ros<span class="w"> </span>tf2_echo<span class="w"> </span>turtle2<span class="w"> </span>turtle1
</code></pre></div>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_a1bd70bfb5fa8f5210fde3f1babec5c2_1758102430.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_a1bd70bfb5fa8f5210fde3f1babec5c2_1758102430.png"/></a></p>
<p>æ‰“å°æ•°æ®å¦‚ä¸‹ï¼š</p>
<div class="codehilite"><pre><span></span><code>At<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1758102120</span>.301409314
-<span class="w"> </span>Translation:<span class="w"> </span><span class="o">[</span><span class="m">3</span>.679,<span class="w"> </span>-0.208,<span class="w"> </span><span class="m">0</span>.000<span class="o">]</span>
-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>Quaternion<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.003,<span class="w"> </span><span class="m">1</span>.000<span class="o">]</span>
-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>RPY<span class="w"> </span><span class="o">(</span>radian<span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span>-0.000,<span class="w"> </span><span class="m">0</span>.006<span class="o">]</span>
-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>RPY<span class="w"> </span><span class="o">(</span>degree<span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span>-0.000,<span class="w"> </span><span class="m">0</span>.364<span class="o">]</span>
-<span class="w"> </span>Matrix:
<span class="w">  </span><span class="m">1</span>.000<span class="w"> </span>-0.006<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">3</span>.679
<span class="w">  </span><span class="m">0</span>.006<span class="w">  </span><span class="m">1</span>.000<span class="w">  </span><span class="m">0</span>.000<span class="w"> </span>-0.208
<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">1</span>.000<span class="w">  </span><span class="m">0</span>.000
<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">1</span>.000
</code></pre></div>
<ul>
<li>Translationï¼šå¹³ç§»ï¼Œå­åæ ‡ç³»çš„åŸç‚¹ï¼Œç›¸å¯¹äºçˆ¶åæ ‡ç³»çš„ä½ç½®æ˜¯x = 3.679 m,y = -0.208 m,z = 0 mã€‚</li>
<li>Quaternionï¼šæ—‹è½¬ï¼Œå•ä½å››å…ƒæ•°ã€‚</li>
<li>RPY ï¼šæ¬§æ‹‰è§’ã€‚</li>
<li>Matrixï¼šå˜æ¢çŸ©é˜µã€‚</li>
</ul>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨rviz2æ¥ç›´è§‚æ„Ÿå—ä¸€ä¸‹ <a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_adc85a552af5ec74255a9db516d6f4fa_1758105218.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_adc85a552af5ec74255a9db516d6f4fa_1758105218.png"/></a></p>
<h3 id="_3">å¹¿æ’­ä¸æŸ¥è¯¢</h3>
<p>ä¸¾ä¾‹ä¸€ä¸ªåœºæ™¯æœºå™¨äººæœ¬ä½“ base_link â†’ ä¼ æ„Ÿå™¨ camera_linkã€‚</p>
<p><strong>ï¼ˆ1ï¼‰å¹¿æ’­çˆ¶å­åæ ‡</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">rclpy</span>
<span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">TransformStamped</span>
<span class="kn">from</span> <span class="nn">tf2_ros</span> <span class="kn">import</span> <span class="n">TransformBroadcaster</span>
<span class="kn">import</span> <span class="nn">tf_transformations</span>  <span class="c1"># å››å…ƒæ•°å·¥å…·</span>

<span class="k">class</span> <span class="nc">FrameBroadcaster</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">'frame_broadcaster'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">broadcaster</span> <span class="o">=</span> <span class="n">TransformBroadcaster</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">broadcast_tf</span><span class="p">)</span>  <span class="c1"># 10Hz å‘å¸ƒ</span>

    <span class="k">def</span> <span class="nf">broadcast_tf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">TransformStamped</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">to_msg</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="s1">'base_link'</span>     <span class="c1"># çˆ¶åæ ‡ç³»</span>
        <span class="n">t</span><span class="o">.</span><span class="n">child_frame_id</span> <span class="o">=</span> <span class="s1">'camera_link'</span>   <span class="c1"># å­åæ ‡ç³»</span>

        <span class="c1"># å¹³ç§»: ç›¸æœºåœ¨æœºå™¨äººå‰æ–¹ 0.2mï¼Œé«˜ 0.5m</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.2</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.5</span>

        <span class="c1"># æ—‹è½¬: æ— æ—‹è½¬</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">tf_transformations</span><span class="o">.</span><span class="n">quaternion_from_euler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">broadcaster</span><span class="o">.</span><span class="n">sendTransform</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">FrameBroadcaster</span><span class="p">()</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<p>è°ƒç”¨TransformBroadcasterç”¨äºå¹¿æ’­åæ ‡å˜æ¢çˆ¶-&gt;å­ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰æŸ¥è¯¢åæ ‡</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">rclpy</span>
<span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">tf2_ros</span> <span class="kn">import</span> <span class="n">Buffer</span><span class="p">,</span> <span class="n">TransformListener</span>

<span class="k">class</span> <span class="nc">FrameListener</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">'frame_listener'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tf_buffer</span> <span class="o">=</span> <span class="n">Buffer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">listener</span> <span class="o">=</span> <span class="n">TransformListener</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tf_buffer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_tf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">lookup_tf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># æŸ¥è¯¢ base_link åœ¨ map ä¸‹çš„å˜æ¢</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tf_buffer</span><span class="o">.</span><span class="n">lookup_transform</span><span class="p">(</span>
                <span class="s1">'map'</span><span class="p">,</span>         <span class="c1"># çˆ¶åæ ‡ç³»</span>
                <span class="s1">'base_link'</span><span class="p">,</span>   <span class="c1"># å­åæ ‡ç³»</span>
                <span class="n">rclpy</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Time</span><span class="p">())</span>

            <span class="n">t</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">"ä½ç½®: x=</span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">x</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, y=</span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">y</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, z=</span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">z</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">; "</span>
                <span class="sa">f</span><span class="s2">"å››å…ƒæ•°: [</span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">x</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">y</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">z</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">w</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">]"</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">"æŸ¥è¯¢å¤±è´¥: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">FrameListener</span><span class="p">()</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<p>è°ƒç”¨TransformListener + BufferæŸ¥è¯¢åæ ‡ï¼Œæ‰“å°å¦‚ä¸‹ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="n">ä½ç½®</span><span class="p">:</span> <span class="n">x</span><span class="o">=</span><span class="mf">3.68</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">0.21</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">0.00</span><span class="p">;</span> <span class="n">å››å…ƒæ•°</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.000</span><span class="p">,</span> <span class="mf">0.000</span><span class="p">,</span> <span class="mf">0.003</span><span class="p">,</span> <span class="mf">1.000</span><span class="p">]</span>
</code></pre></div>
<p>ä¹Ÿå¯ä»¥ç”¨å‘½ä»¤è¡Œï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="n">ros2</span> <span class="n">run</span> <span class="n">tf2_ros</span> <span class="n">tf2_echo</span> <span class="n">base_link</span> <span class="n">camera_link</span>
</code></pre></div>
<h2 id="gazebo">Gazebo</h2>
<h3 id="_4">å®‰è£…</h3>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>lsb-release<span class="w"> </span>gnupg

sudo<span class="w"> </span>curl<span class="w"> </span>https://packages.osrfoundation.org/gazebo.gpg<span class="w"> </span>--output<span class="w"> </span>/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg
<span class="nb">echo</span><span class="w"> </span><span class="s2">"deb [arch=</span><span class="k">$(</span>dpkg<span class="w"> </span>--print-architecture<span class="k">)</span><span class="s2"> signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] https://packages.osrfoundation.org/gazebo/ubuntu-stable </span><span class="k">$(</span>lsb_release<span class="w"> </span>-cs<span class="k">)</span><span class="s2"> main"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/gazebo-stable.list<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>gz-harmonic
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>ros-jazzy-ros-gz
</code></pre></div>
<p>è¯¦æƒ…å‚è€ƒ<a href="https://gazebosim.org/docs/all/install_ubuntu/" title="Binary Installation on Ubuntu">Binary Installation on Ubuntu</a>ã€‚</p>
<p>å®‰è£…å®Œæˆåï¼Œå¯åŠ¨ä¸‹é¢å‘½ä»¤æ­£å¸¸å¯åŠ¨å°±è¯´æ˜å®‰è£…å¥½äº†ã€‚</p>
<div class="codehilite"><pre><span></span><code>gz<span class="w"> </span>sim
</code></pre></div>
<h3 id="_5">æœºå™¨ä»¿çœŸç¤ºä¾‹</h3>
<p>å¯åŠ¨ä¸€ä¸ªæœºå™¨ä»¿çœŸç¯å¢ƒ</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>ros_gz_sim_demos<span class="w"> </span>diff_drive.launch.py
</code></pre></div>
<p>å¯åŠ¨ä¸€ä¸ªé”®ç›˜æ§åˆ¶èŠ‚ç‚¹</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>teleop_twist_keyboard<span class="w"> </span>teleop_twist_keyboard<span class="w"> </span>--ros-args<span class="w"> </span>-r<span class="w"> </span>cmd_vel:<span class="o">=</span>model/vehicle_blue/cmd_vel
</code></pre></div>
<p>ä½¿ç”¨i/j/,/lå››ä¸ªæŒ‰é”®å¯ä»¥æ§åˆ¶æœºå™¨äººå‰åå·¦å³åŠ¨ä½œã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_65be785cdd6b7a86c0bb6f460fd8985c_1758166434.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_65be785cdd6b7a86c0bb6f460fd8985c_1758166434.png"/></a></p>
<h3 id="_6">ä¼ æ„Ÿå™¨ç¤ºä¾‹</h3>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>ros_gz_sim_demos<span class="w"> </span>rgbd_camera_bridge.launch.py
</code></pre></div>
<p>ä»¿çœŸæ‘„åƒå¤´ï¼Œè¿è¡Œä¸Šé¢å‘½ä»¤åä¼šæ‰“å¼€Gazeboä»¿çœŸç•Œé¢å’ŒRVizä¸Šä½æœºã€‚å¯ä»¥åœ¨Gazeboä¸­ç›´æ¥çœ‹åˆ°RGBDç›¸æœºä»¿çœŸåå‘å¸ƒçš„å›¾åƒæ•°æ®ã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_c275a2dc923a14c248ea0bb6827f57f8_1758166554.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_c275a2dc923a14c248ea0bb6827f57f8_1758166554.png"/></a></p>
<h2 id="rviz">RViz</h2>
<p>RViz å…¨ç§° ROS Visualizationï¼Œæ˜¯ ROSï¼ˆRobot Operating Systemï¼‰é‡Œä¸€ä¸ªéå¸¸é‡è¦çš„ä¸‰ç»´å¯è§†åŒ–å·¥å…·ã€‚å®ƒçš„ä½œç”¨ä¸»è¦æ˜¯å¸®åŠ©å¼€å‘è€… ç›´è§‚åœ°æŸ¥çœ‹æœºå™¨äººç³»ç»Ÿä¸­çš„æ•°æ®å’ŒçŠ¶æ€ã€‚</p>
<p>RVizçš„ä½œç”¨ä¸»è¦æœ‰åæ ‡ç³»å¯è§†åŒ–ã€ä¼ æ„Ÿå™¨æ•°æ®å±•ç¤ºã€æœºå™¨äººæ¨¡å‹æ˜¾ç¤ºã€è·¯å¾„ä¸è½¨è¿¹å¯è§†åŒ–ã€è°ƒè¯•ä¸éªŒè¯ç­‰ç­‰ã€‚</p>
<p>RVizçš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ä¸»è¦æœ‰Displaysã€Viewsã€Toolsã€Topicsè®¢é˜…ã€‚</p>
<p>RVizåªè´Ÿè´£å¯è§†åŒ–ï¼ˆæ¥å—æ•°æ®æ˜¾ç¤ºï¼‰ä¸ä¼šè¿›è¡Œç‰©ç†ä»¿çœŸï¼Œè€ŒGazeboæ˜¯ç‰©ç†ä»¿çœŸå™¨ï¼Œå¯ä»¥æ¨¡æ‹Ÿæœºå™¨äººè¿åŠ¨ã€ç¯å¢ƒäº¤äº’ã€‚å¸¸ç”¨çš„åšæ³•æ˜¯Gazeboè´Ÿè´£ä»¿çœŸå°†æ•°æ®å‘å¸ƒåˆ°ROS ç„¶åé€šè¿‡RVizæ˜¾ç¤ºæ•°æ®ã€‚</p>
<p>RVizå·²ç»é›†æˆåˆ°å®Œæ•´ç‰ˆçš„ROSä¸­ï¼Œä¸€èˆ¬ä¸éœ€è¦é¢å¤–å•ç‹¬å®‰è£…ã€‚</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>rviz2<span class="w"> </span>rviz2
</code></pre></div>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_6e287a103ead4640aadb405501d02e7c_1758167314.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_6e287a103ead4640aadb405501d02e7c_1758167314.png"/></a></p>
<h3 id="tf_1">ç¤ºä¾‹ï¼štfæ•°æ®å¯è§†åŒ–</h3>
<p>åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ªç»ˆç«¯ï¼Œè¿è¡Œæµ·é¾Ÿè·Ÿéšè¿åŠ¨ã€‚</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>learning_tf<span class="w"> </span>turtle_following_demo.launch.py
ros2<span class="w"> </span>run<span class="w"> </span>turtlesim<span class="w"> </span>turtle_teleop_key
</code></pre></div>
<p>æ¥ç€è¿è¡Œrviz2</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>rviz2<span class="w"> </span>rviz2
</code></pre></div>
<p>æ·»åŠ TF</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_dc81303093308eaa3460ba3edbeaa604_1758169539.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_dc81303093308eaa3460ba3edbeaa604_1758169539.png"/></a></p>
<p>åæ ‡ç³»æ˜¾ç¤º</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_a94e7fc47cb9a118d16b678928afab0c_1758169498.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_a94e7fc47cb9a118d16b678928afab0c_1758169498.png"/></a></p>
<h3 id="_7">ç¤ºä¾‹ï¼šå›¾åƒæ•°æ®å¯è§†åŒ–</h3>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>usb_cam<span class="w"> </span>usb_cam_node_exe
</code></pre></div>
<p>æ‰§è¡Œå¯åŠ¨ç›¸æœºé©±åŠ¨ï¼Œå¦‚æœæ‰¾ä¸åˆ°å‘½ä»¤å°±å…ˆå®‰è£…sudo apt install ros-jazzy-usb-cam</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_1872609a128d4bb5aab96215fa1ac80a_1758169821.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_1872609a128d4bb5aab96215fa1ac80a_1758169821.png"/></a></p>
<p>æŒ‰ç…§ä¸Šé¢çš„æ–¹å¼æ·»åŠ imageï¼Œå¦‚æœæŠ¥é”™</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_8b37f4db26423954c472a2a90f8d0406_1758169931.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_8b37f4db26423954c472a2a90f8d0406_1758169931.png"/></a></p>
<p>éœ€è¦æŠŠtopicè®¢é˜…æ”¹ä¸º/image_raw <a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_f71c024c07558aa4f489797ca2e734e9_1758170900.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_f71c024c07558aa4f489797ca2e734e9_1758170900.png"/></a></p>
<h2 id="rosbag">rosbag</h2>
<p>rosbag æ˜¯ ROSï¼ˆRobot Operating Systemï¼‰ä¸­çš„ä¸€ç§æ•°æ®è®°å½•ä¸å›æ”¾å·¥å…·ï¼Œç”¨æ¥ä¿å­˜å’Œé‡æ”¾æœºå™¨äººè¿è¡Œæ—¶äº§ç”Ÿçš„å„ç§æ¶ˆæ¯æ•°æ®ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒå°±åƒâ€œé»‘åŒ£å­â€ï¼Œèƒ½æŠŠæœºå™¨äººè¿è¡Œæ—¶çš„ä¼ æ„Ÿå™¨ã€è¯é¢˜æ¶ˆæ¯ã€æ§åˆ¶æŒ‡ä»¤ç­‰å…¨éƒ¨è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿åæœŸè°ƒè¯•å’Œå¤ç°å®éªŒã€‚</p>
<h3 id="_8">è®°å½•æ•°æ®</h3>
<p>å…ˆå¯åŠ¨"è€æ¼”å‘˜"</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w">  </span>turtlesim<span class="w"> </span>turtlesim_node
ros2<span class="w"> </span>run<span class="w"> </span>turtlesim<span class="w"> </span>turtle_teleop_key
</code></pre></div>
<p>ç„¶ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾å½•åˆ¶æ•°æ®</p>
<div class="codehilite"><pre><span></span><code>mkdir<span class="w"> </span>~/bagfiles
<span class="nb">cd</span><span class="w"> </span>~/bagfiles/
</code></pre></div>
<p>åˆ—å‡ºå½“å‰æœ‰å“ªäº›è¯é¢˜</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>topic<span class="w"> </span>list<span class="w"> </span>-v
Published<span class="w"> </span>topics:
<span class="w"> </span>*<span class="w"> </span>/parameter_events<span class="w"> </span><span class="o">[</span>rcl_interfaces/msg/ParameterEvent<span class="o">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>publishers
<span class="w"> </span>*<span class="w"> </span>/rosout<span class="w"> </span><span class="o">[</span>rcl_interfaces/msg/Log<span class="o">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>publishers
<span class="w"> </span>*<span class="w"> </span>/turtle1/cmd_vel<span class="w"> </span><span class="o">[</span>geometry_msgs/msg/Twist<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>publisher
<span class="w"> </span>*<span class="w"> </span>/turtle1/color_sensor<span class="w"> </span><span class="o">[</span>turtlesim/msg/Color<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>publisher
<span class="w"> </span>*<span class="w"> </span>/turtle1/pose<span class="w"> </span><span class="o">[</span>turtlesim/msg/Pose<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>publisher

Subscribed<span class="w"> </span>topics:
<span class="w"> </span>*<span class="w"> </span>/parameter_events<span class="w"> </span><span class="o">[</span>rcl_interfaces/msg/ParameterEvent<span class="o">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>subscribers
<span class="w"> </span>*<span class="w"> </span>/turtle1/cmd_vel<span class="w"> </span><span class="o">[</span>geometry_msgs/msg/Twist<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>subscriber
</code></pre></div>
<p>æ¥ä¸‹æ¥å°±è®°å½•/turtle1/cmd_velè¯é¢˜ã€‚</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>bag<span class="w"> </span>record<span class="w"> </span>/turtle1/cmd_vel
</code></pre></div>
<p>è¿™æ ·åªè¦åœ¨é”®ç›˜ç»ˆç«¯æ§åˆ¶æµ·é¾Ÿä¸æ–­ç§»åŠ¨ï¼Œå°±å¯ä»¥è®°å½•ä¸‹æ•°æ®äº†ã€‚åœæ­¢è®°å½•Ctrl+Cã€‚</p>
<div class="codehilite"><pre><span></span><code>laumy@ThinkBook-14-G7-IAH:~/bagfiles$<span class="w"> </span>tree
.
â””â”€â”€<span class="w"> </span>rosbag2_2025_09_18-12_52_52
<span class="w">    </span>â”œâ”€â”€<span class="w"> </span>metadata.yaml
<span class="w">    </span>â””â”€â”€<span class="w"> </span>rosbag2_2025_09_18-12_52_52_0.mcap

<span class="m">2</span><span class="w"> </span>directories,<span class="w"> </span><span class="m">2</span><span class="w"> </span>files
</code></pre></div>
<h3 id="_9">å›æ”¾æ•°æ®</h3>
<p>å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤æŸ¥çœ‹æ•°æ®æ–‡ä»¶ä¿¡æ¯ã€‚</p>
<div class="codehilite"><pre><span></span><code>laumy@ThinkBook-14-G7-IAH:~/bagfiles$<span class="w"> </span>ros2<span class="w"> </span>bag<span class="w"> </span>info<span class="w"> </span>rosbag2_2025_09_18-13_01_53/

Files:<span class="w">             </span>rosbag2_2025_09_18-13_01_53_0.mcap
Bag<span class="w"> </span>size:<span class="w">          </span><span class="m">29</span>.8<span class="w"> </span>KiB
Storage<span class="w"> </span>id:<span class="w">        </span>mcap
ROS<span class="w"> </span>Distro:<span class="w">        </span>jazzy
Duration:<span class="w">          </span><span class="m">26</span>.796084773s
Start:<span class="w">             </span>Sep<span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">2025</span><span class="w"> </span><span class="m">13</span>:01:58.126984611<span class="w"> </span><span class="o">(</span><span class="m">1758171718</span>.126984611<span class="o">)</span>
End:<span class="w">               </span>Sep<span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">2025</span><span class="w"> </span><span class="m">13</span>:02:24.923069384<span class="w"> </span><span class="o">(</span><span class="m">1758171744</span>.923069384<span class="o">)</span>
Messages:<span class="w">          </span><span class="m">251</span>
Topic<span class="w"> </span>information:<span class="w"> </span>Topic:<span class="w"> </span>/turtle1/cmd_vel<span class="w"> </span><span class="p">|</span><span class="w"> </span>Type:<span class="w"> </span>geometry_msgs/msg/Twist<span class="w"> </span><span class="p">|</span><span class="w"> </span>Count:<span class="w"> </span><span class="m">251</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>Serialization<span class="w"> </span>Format:<span class="w"> </span>cdr
Service:<span class="w">           </span><span class="m">0</span>
Service<span class="w"> </span>information:<span class="w"> </span>
</code></pre></div>
<p>å›æ”¾å‘½ä»¤ï¼š</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>bag<span class="w"> </span>play<span class="w"> </span>rosbag2_2025_09_18-13_01_53/
</code></pre></div>
<p>è¿™æ ·æµ·é¾Ÿå°±ä¼šå¤åˆ¶åˆšæ‰é”®ç›˜æ‰§è¡Œçš„è¿åŠ¨è·¯å¾„ã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_8575e1aa1ccda4a723beefaf0ff9e965_1758171946.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_8575e1aa1ccda4a723beefaf0ff9e965_1758171946.png"/></a></p>
<h2 id="rqt">rqt</h2>
<p>rqt æ˜¯ ROS å®˜æ–¹æä¾›çš„ä¸€ä¸ªåŸºäº Qt çš„ GUI æ¡†æ¶ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª æ’ä»¶ç®¡ç†å’Œå¯è§†åŒ–å¹³å°ã€‚</p>
<p>å®ƒçš„è®¾è®¡ç†å¿µæ˜¯ï¼šROS ç³»ç»Ÿæ˜¯åˆ†å¸ƒå¼çš„ï¼ŒèŠ‚ç‚¹ã€è¯é¢˜ã€æœåŠ¡ã€å‚æ•°ç­‰å¾ˆå¤šï¼Œè°ƒè¯•å’Œç›‘æ§å…‰é å‘½ä»¤è¡Œä¸ç›´è§‚ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„ å›¾å½¢åŒ–å·¥å…·ç®± æ¥è§‚å¯Ÿå’Œæ“ä½œã€‚</p>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥å®‰è£…</p>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>ros-jazzy-rqt
</code></pre></div>
<p>å®‰è£…å®Œæˆä¹‹åï¼Œæ‰§è¡Œ</p>
<div class="codehilite"><pre><span></span><code>rqt
</code></pre></div>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_1ebbf7fb5c85fa7cbd0138d145d8ed5f_1758172194.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_1ebbf7fb5c85fa7cbd0138d145d8ed5f_1758172194.png"/></a></p>
<p>rqté»˜è®¤æ˜¯æ²¡æœ‰é€‰æ‹©ä»»ä½•æ’ä»¶ã€‚è¦æ·»åŠ æ’ä»¶ï¼Œéœ€è¦ä»æ’ä»¶èœå•ä¸­é€‰æ‹©é¡¹ç›®ã€‚</p>
<h3 id="_10">æ—¥å¿—æ˜¾ç¤º</h3>
<p>æ—¥å¿—æ˜¾ç¤ºæœ‰ä¸¤ç§æ‰“å¼€æ–¹å¼ä¸€ç§æ˜¯æ‰§è¡Œrqtåï¼Œåœ¨Plugins-&gt;Logging-&gt;Console-æ‰“å¼€ï¼Œå¦å¤–ä¸€ç§æ˜¯æ‰§è¡Œä¸‹é¢å‘½ä»¤</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>rqt_console<span class="w"> </span>rqt_console
</code></pre></div>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_10036221bb01235b203a7c4fae073621_1758172723.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_10036221bb01235b203a7c4fae073621_1758172723.png"/></a></p>
<h3 id="_11">å›¾åƒæ˜¾ç¤º</h3>
<p>åœ¨å¯åŠ¨ä¹‹å‰å…ˆè¿è¡Œusb</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>usb_cam<span class="w"> </span>usb_cam_node_exe
</code></pre></div>
<p>UIç•Œé¢å¯åŠ¨"Plugins-&gt;Visualization&gt;Image View"æˆ–è€…é€šè¿‡å‘½ä»¤çš„æ–¹å¼ï¼š</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>rqt_image_view<span class="w"> </span>rqt_image_view
</code></pre></div>
<p>æ¥ç€æ·»åŠ è®¢é˜…çš„è¯é¢˜</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_bb85c02700393ba7bab028790adceb6b_1758172924.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_bb85c02700393ba7bab028790adceb6b_1758172924.png"/></a></p>
<h3 id="_12">å‘å¸ƒè¯é¢˜/æœåŠ¡æ•°æ®</h3>
<p>ä¸ä»…å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­å‘å¸ƒè¯é¢˜æˆ–æœåŠ¡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡rqtå·¥å…·å‘å¸ƒã€‚</p>
<p>å…ˆå¯åŠ¨turtlesim</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w">  </span>turtlesim<span class="w"> </span>turtlesim_node
</code></pre></div>
<p>ç„¶åä½¿ç”¨rqtçš„"Plugin-&gt;Topics-&gt;MessagePublish"ã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_c3f774986af1242247a054e920a42645_1758173103.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_c3f774986af1242247a054e920a42645_1758173103.png"/></a></p>
<h3 id="_13">ç»˜åˆ¶æ•°æ®æ›²çº¿</h3>
<p>rqtè¿˜å¯ä»¥ç»˜åˆ¶æ•°æ®æ›²çº¿ï¼Œå°†éœ€è¦æ˜¾ç¤ºçš„xyåæ ‡ä½¿ç”¨æ›²çº¿æè¿°å‡ºæ¥ï¼Œä¾¿äºä½“ç°æœºå™¨äººçš„é€Ÿåº¦ã€ä½ç½®ç­‰ä¿¡æ¯éšæ—¶é—´å˜åŒ–çš„è¶‹åŠ¿ã€‚</p>
<p>"Plugins-&gt;Visualization&gt;plot"</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_de20b66c2b619a86736cc4dd69780a79_1758174439.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_de20b66c2b619a86736cc4dd69780a79_1758174439.png"/></a></p>
<p>ç„¶åä¾æ¬¡æ·»åŠ topicï¼Œå°±å¯ä»¥è®°å½•è½¨è¿¹äº†ã€‚</p>
<h3 id="_14">èŠ‚ç‚¹å¯è§†åŒ–</h3>
<p>æ‰“å¼€â€œintrospection-&gt;Node Graphâ€å¯ä»¥çœ‹åˆ°ç³»ç»Ÿä¸­æ‰€æœ‰çš„èŠ‚ç‚¹å…³ç³»ã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_4a9b0944c60469d7b6b5a59e5b60acfa_1758174625.png"><img alt="" src="assets/doc/05-rosç³»ç»Ÿ/ros2å¸¸ç”¨å¼€å‘å·¥å…·ï¼šlaunchã€tfã€gazeboã€rosbagã€rqt/images/wp_editor_md_4a9b0944c60469d7b6b5a59e5b60acfa_1758174625.png"/></a></p>
<p>é™„å½•ï¼šæœ¬æ–‡æ¥è‡ªã€ŠROS2æ™ºèƒ½æœºå™¨äººå¼€å‘å®è·µã€‹ç¬”è®°</p></div>
  <div class="post-nav">
    <a class="prev" href="ros2æœºå™¨æ„ŸçŸ¥-ç›¸æœº-é›·è¾¾-imu.html">â† ROS2æœºå™¨æ„ŸçŸ¥ï¼šç›¸æœºã€é›·è¾¾ã€IMU</a>
    <a class="next" href="ros2æœºå™¨äººä»¿çœŸ-urdfæ¨¡å‹-gaezboä»¿çœŸ.html">ROS2æœºå™¨äººä»¿çœŸï¼šurdfæ¨¡å‹ã€gaezboä»¿çœŸ â†’</a>
  </div>
</article>

      </section>

      <aside class="right-panel">
        
      </aside>
    </main>

    <footer class="site-footer">
      <div class="container">Copyright Â©2022-2025 laumy ç‰ˆæƒæ‰€æœ‰</div>
    </footer>

    <script src="assets/site.js"></script>
  </body>
  </html>

