<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ROS2常用开发工具：launch、TF、Gazebo、rosbag、rqt - Laumy的技术栈</title>
    <link rel="stylesheet" href="assets/style.css">
    <!-- MathJax支持LaTeX数学公式 -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          ignoreHtmlClass: 'tex2jax_ignore',
          processHtmlClass: 'tex2jax_process'
        }
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="logo" href="./">Laumy的技术栈</a>
        <div class="search">
          <input id="search-input" type="text" placeholder="输入关键词回车搜索">
        </div>
        <div class="theme-toggle" title="切换主题" id="theme-toggle">☾</div>
        <nav class="top-nav">
          <div class="nav-item"><a href="./">首页</a></div>
          <div class="nav-item site-link">
            <a href="https://www.laumy.tech" target="_blank" title="访问主站">主站点:www.laumy.tech</a>
          </div>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <aside class="left-nav">
        
        <div class="card">
          <div class="card-title">文章目录</div>
          <nav id="toc"><ul><li><a href="#launch">launch</a><ul><li><a href="#launch_1">launch文件结构</a></li><li><a href="#_1">使用步骤</a></li><li><a href="#_2">进阶功能</a></li></ul></li><li><a href="#tf">TF</a><ul><li><a href="#_3">广播与查询</a></li></ul></li><li><a href="#gazebo">Gazebo</a><ul><li><a href="#_4">安装</a></li><li><a href="#_5">机器仿真示例</a></li><li><a href="#_6">传感器示例</a></li></ul></li><li><a href="#rviz">RViz</a><ul><li><a href="#tf_1">示例：tf数据可视化</a></li><li><a href="#_7">示例：图像数据可视化</a></li></ul></li><li><a href="#rosbag">rosbag</a><ul><li><a href="#_8">记录数据</a></li><li><a href="#_9">回放数据</a></li></ul></li><li><a href="#rqt">rqt</a><ul><li><a href="#_10">日志显示</a></li><li><a href="#_11">图像显示</a></li><li><a href="#_12">发布话题/服务数据</a></li><li><a href="#_13">绘制数据曲线</a></li><li><a href="#_14">节点可视化</a></li></ul></li></ul></nav>
        </div>
        
      </aside>

      <section class="content">
        
<article class="card post">
  <h1>ROS2常用开发工具：launch、TF、Gazebo、rosbag、rqt</h1>
  <div class="meta">
    <span class="meta-item">
      <i class="icon">🕒</i>
      2025-09-18
    </span>
    <span class="meta-item">
      <i class="icon">📂</i>
      ros系统
    </span>
    <span class="meta-item">
      <i class="icon">👤</i>
      laumy
    </span>
  </div>
  <div class="post-content"><h2 id="launch">launch</h2>
<p>在ROS2中，lauch是一个程序启动器，它的作用是一条命令可以启动多个节点，加载参数文件（YAML），重映射话题/服务/动作名称，条件启动（仿真/真机切换），嵌套调用其他launch文件。</p>
<p>lauch文件支持3种格式</p>
<table>
<thead>
<tr>
<th>格式</th>
<th>后缀</th>
<th>特点</th>
<th>推荐度</th>
</tr>
</thead>
<tbody>
<tr>
<td>Python</td>
<td><code>.launch.py</code></td>
<td>功能最强，可写逻辑、条件，官方推荐</td>
<td>⭐⭐⭐⭐⭐</td>
</tr>
<tr>
<td>XML</td>
<td><code>.launch.xml</code></td>
<td>类似 ROS1，结构清晰，但灵活性差</td>
<td>⭐⭐</td>
</tr>
<tr>
<td>YAML</td>
<td><code>.launch.yaml</code></td>
<td>简洁配置，功能最弱</td>
<td>⭐</td>
</tr>
</tbody>
</table>
<p>但在ROS2中目前更多的使用.launch.py。这里我们重点介绍此种方式。</p>
<h3 id="launch_1">launch文件结构</h3>
<p>最小的结构示例</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
        <span class="n">Node</span><span class="p">(</span><span class="n">package</span><span class="o">=</span><span class="s1">'pkg_name'</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="s1">'exe_name'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'node_name'</span><span class="p">)</span>
    <span class="p">])</span>
</code></pre></div>
<p>创建launch文件需要导入launch和launch_ros模块，入口函数为generate_launch_description()，该函数中定义了要启动的节点，通过LaunchDescription来描述节点如包、执行程序、名称。</p>
<h3 id="_1">使用步骤</h3>
<p><strong>（1）创建一个包</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">cd</span> <span class="o">~/</span><span class="n">dev_ws</span><span class="o">/</span><span class="n">src</span>
<span class="n">ros2</span> <span class="n">pkg</span> <span class="n">create</span>  <span class="o">--</span><span class="n">build</span><span class="o">-</span><span class="nb">type</span> <span class="n">ament_python</span> <span class="n">launch_demo</span>
</code></pre></div>
<p><strong>（2）新建launch目录</strong></p>
<p>一般launch文件都会有个单独的目录，因此新建目录用于存放launch文件。</p>
<div class="codehilite"><pre><span></span><code><span class="n">cd</span> <span class="n">launch_demo</span>
<span class="n">mkdir</span> <span class="n">launch</span>
</code></pre></div>
<p><strong>（3）编写lauch文件</strong></p>
<p>demo.launch.py</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
        <span class="n">Node</span><span class="p">(</span><span class="n">package</span><span class="o">=</span><span class="s1">'learn_topic_cpp'</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="s1">'topic_helloworld_pub'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'pub'</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">'screen'</span><span class="p">),</span>
        <span class="n">Node</span><span class="p">(</span><span class="n">package</span><span class="o">=</span><span class="s1">'learn_topic_cpp'</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="s1">'topic_helloworld_sub'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'sub'</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">'screen'</span><span class="p">)</span>
    <span class="p">])</span>
</code></pre></div>
<p><strong>（4）修改setup.py</strong></p>
<p>注册launch文件，主要是将.launch文件要拷贝到install/share/xxx/launch目录下。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">find_packages</span><span class="p">,</span> <span class="n">setup</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="o">......</span>
<span class="n">data_files</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">'share'</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="s1">'launch'</span><span class="p">),</span> <span class="n">glob</span><span class="p">(</span><span class="s1">'launch/*.launch.py'</span><span class="p">)),</span>
<span class="p">]</span>
<span class="o">.....</span>
</code></pre></div>
<p>需要导入setuptools、os、glob这几个模块。</p>
<p><strong>（5）编译&amp;环境刷新</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">cd</span> <span class="o">~/</span><span class="n">dev_ws</span>
<span class="n">colcon</span> <span class="n">build</span>
<span class="n">source</span> <span class="n">install</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span>
</code></pre></div>
<p><strong>（6）运行测试</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">ros2</span> <span class="n">launch</span> <span class="n">launch_demo</span> <span class="n">demo</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span>
</code></pre></div>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_a5e39581a222a753954ea0749bb42147_1758091020.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_a5e39581a222a753954ea0749bb42147_1758091020.png"/></a></p>
<h3 id="_2">进阶功能</h3>
<p><strong>（1）加载参数</strong></p>
<p>config/params.yaml</p>
<div class="codehilite"><pre><span></span><code><span class="n">my_node</span><span class="p">:</span>
  <span class="n">ros__parameters</span><span class="p">:</span>
    <span class="n">use_sim_time</span><span class="p">:</span> <span class="n">true</span>
    <span class="n">max_speed</span><span class="p">:</span> <span class="mf">2.0</span>
</code></pre></div>
<p>launch 文件：</p>
<div class="codehilite"><pre><span></span><code><span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">'my_pkg'</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">'my_node'</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="s1">'config/params.yaml'</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>
<p><strong>（2）命令行参数</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span>
<span class="kn">from</span> <span class="nn">launch.substitutions</span> <span class="kn">import</span> <span class="n">LaunchConfiguration</span>

<span class="n">DeclareLaunchArgument</span><span class="p">(</span><span class="s1">'use_sim_time'</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="s1">'false'</span><span class="p">)</span>

<span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">'my_pkg'</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">'my_node'</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[{</span><span class="s1">'use_sim_time'</span><span class="p">:</span> <span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">'use_sim_time'</span><span class="p">)}]</span>
<span class="p">)</span>
</code></pre></div>
<p>在运行的时候可以传递参数</p>
<div class="codehilite"><pre><span></span><code><span class="n">ros2</span> <span class="n">launch</span> <span class="n">my_pkg</span> <span class="n">demo</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span> <span class="n">use_sim_time</span><span class="o">:=</span><span class="n">true</span>
</code></pre></div>
<p><strong>（3）条件启动</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">launch.conditions</span> <span class="kn">import</span> <span class="n">IfCondition</span>

<span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">'gazebo_ros'</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">'gzserver'</span><span class="p">,</span>
    <span class="n">condition</span><span class="o">=</span><span class="n">IfCondition</span><span class="p">(</span><span class="n">LaunchConfiguration</span><span class="p">(</span><span class="s1">'use_gazebo'</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<p>只有当条件use_gazebo满足时才会启动，如运行。</p>
<div class="codehilite"><pre><span></span><code><span class="n">ros2</span> <span class="n">launch</span> <span class="n">my_pkg</span> <span class="n">demo</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span> <span class="n">use_gazebo</span><span class="o">:=</span><span class="n">true</span>
</code></pre></div>
<p><strong>（4）话题重映射</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">'my_pkg'</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">'controller'</span><span class="p">,</span>
    <span class="n">remappings</span><span class="o">=</span><span class="p">[(</span><span class="s1">'/cmd_vel'</span><span class="p">,</span> <span class="s1">'/robot1/cmd_vel'</span><span class="p">)]</span>
<span class="p">)</span>
</code></pre></div>
<p>可以将节点中的话题进行重映射，如把节点内部用到的 /cmd_vel 改名为 /robot1/cmd_vel，在实际场景中多机器人系统可以避免冲突。</p>
<h2 id="tf">TF</h2>
<p>TF是transform的缩写，其作用主要是维护并查询机器人系统中各个坐标系之间的关系（包括位置+姿态）。其主要的核心功能如下：</p>
<ul>
<li>管理多个坐标系的父子关系（各个坐标系之间形成一颗TF树）</li>
<li>提供任意两个坐标系之间的变换（平移+旋转）</li>
<li>试试广播、查询坐标关系。</li>
</ul>
<p>可以理解为TF就像是一个全局的时空字典，每个坐标系（Frame）都是字典里的key，而变化关系是key之间的link。</p>
<p>常见的坐标系有</p>
<ul>
<li>map：世界地图坐标系，一般是静态的，当机器人定位完成后，map是全局的参考。</li>
<li>odom：里程计坐标系（相对），会随着时间推移会漂移。</li>
<li>base_link：机器人本地中心，是所有传感器和控制指令的基准。</li>
<li>camera_link：摄像头坐标系。</li>
<li>laser_link：雷达坐标系。</li>
</ul>
<p>典型的TF树</p>
<div class="codehilite"><pre><span></span><code>map<span class="w"> </span>→<span class="w"> </span>odom<span class="w"> </span>→<span class="w"> </span>base_link<span class="w"> </span>→<span class="w"> </span>camera_link
<span class="w">                     </span>→<span class="w"> </span>laser_link
</code></pre></div>
<p>每个坐标都有一个父坐标系（除了根map），变换是单项定义的。孙子的坐标系的位姿等于“父坐标系的位姿+子坐标系的相对位姿”。如上要知道map与camera_link的关系。则T_map_camera = T_map_odom × T_odom_base × T_base_camera</p>
<p>运行命令，查询 turtle2 坐标系相对于 turtle1 坐标系的变换关系。</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>tf2_ros<span class="w"> </span>tf2_echo<span class="w"> </span>turtle2<span class="w"> </span>turtle1
</code></pre></div>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_a1bd70bfb5fa8f5210fde3f1babec5c2_1758102430.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_a1bd70bfb5fa8f5210fde3f1babec5c2_1758102430.png"/></a></p>
<p>打印数据如下：</p>
<div class="codehilite"><pre><span></span><code>At<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1758102120</span>.301409314
-<span class="w"> </span>Translation:<span class="w"> </span><span class="o">[</span><span class="m">3</span>.679,<span class="w"> </span>-0.208,<span class="w"> </span><span class="m">0</span>.000<span class="o">]</span>
-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>Quaternion<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.003,<span class="w"> </span><span class="m">1</span>.000<span class="o">]</span>
-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>RPY<span class="w"> </span><span class="o">(</span>radian<span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span>-0.000,<span class="w"> </span><span class="m">0</span>.006<span class="o">]</span>
-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>RPY<span class="w"> </span><span class="o">(</span>degree<span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span>-0.000,<span class="w"> </span><span class="m">0</span>.364<span class="o">]</span>
-<span class="w"> </span>Matrix:
<span class="w">  </span><span class="m">1</span>.000<span class="w"> </span>-0.006<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">3</span>.679
<span class="w">  </span><span class="m">0</span>.006<span class="w">  </span><span class="m">1</span>.000<span class="w">  </span><span class="m">0</span>.000<span class="w"> </span>-0.208
<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">1</span>.000<span class="w">  </span><span class="m">0</span>.000
<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">0</span>.000<span class="w">  </span><span class="m">1</span>.000
</code></pre></div>
<ul>
<li>Translation：平移，子坐标系的原点，相对于父坐标系的位置是x = 3.679 m,y = -0.208 m,z = 0 m。</li>
<li>Quaternion：旋转，单位四元数。</li>
<li>RPY ：欧拉角。</li>
<li>Matrix：变换矩阵。</li>
</ul>
<p>也可以使用rviz2来直观感受一下 <a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_adc85a552af5ec74255a9db516d6f4fa_1758105218.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_adc85a552af5ec74255a9db516d6f4fa_1758105218.png"/></a></p>
<h3 id="_3">广播与查询</h3>
<p>举例一个场景机器人本体 base_link → 传感器 camera_link。</p>
<p><strong>（1）广播父子坐标</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">rclpy</span>
<span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">TransformStamped</span>
<span class="kn">from</span> <span class="nn">tf2_ros</span> <span class="kn">import</span> <span class="n">TransformBroadcaster</span>
<span class="kn">import</span> <span class="nn">tf_transformations</span>  <span class="c1"># 四元数工具</span>

<span class="k">class</span> <span class="nc">FrameBroadcaster</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">'frame_broadcaster'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">broadcaster</span> <span class="o">=</span> <span class="n">TransformBroadcaster</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">broadcast_tf</span><span class="p">)</span>  <span class="c1"># 10Hz 发布</span>

    <span class="k">def</span> <span class="nf">broadcast_tf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">TransformStamped</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">to_msg</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="s1">'base_link'</span>     <span class="c1"># 父坐标系</span>
        <span class="n">t</span><span class="o">.</span><span class="n">child_frame_id</span> <span class="o">=</span> <span class="s1">'camera_link'</span>   <span class="c1"># 子坐标系</span>

        <span class="c1"># 平移: 相机在机器人前方 0.2m，高 0.5m</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.2</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.5</span>

        <span class="c1"># 旋转: 无旋转</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">tf_transformations</span><span class="o">.</span><span class="n">quaternion_from_euler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">t</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">broadcaster</span><span class="o">.</span><span class="n">sendTransform</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">FrameBroadcaster</span><span class="p">()</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<p>调用TransformBroadcaster用于广播坐标变换父-&gt;子。</p>
<p><strong>（2）查询坐标</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">rclpy</span>
<span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">tf2_ros</span> <span class="kn">import</span> <span class="n">Buffer</span><span class="p">,</span> <span class="n">TransformListener</span>

<span class="k">class</span> <span class="nc">FrameListener</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">'frame_listener'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tf_buffer</span> <span class="o">=</span> <span class="n">Buffer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">listener</span> <span class="o">=</span> <span class="n">TransformListener</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tf_buffer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_tf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">lookup_tf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># 查询 base_link 在 map 下的变换</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tf_buffer</span><span class="o">.</span><span class="n">lookup_transform</span><span class="p">(</span>
                <span class="s1">'map'</span><span class="p">,</span>         <span class="c1"># 父坐标系</span>
                <span class="s1">'base_link'</span><span class="p">,</span>   <span class="c1"># 子坐标系</span>
                <span class="n">rclpy</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Time</span><span class="p">())</span>

            <span class="n">t</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">"位置: x=</span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">x</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, y=</span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">y</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, z=</span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">z</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">; "</span>
                <span class="sa">f</span><span class="s2">"四元数: [</span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">x</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">y</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">z</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">w</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">]"</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">"查询失败: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">FrameListener</span><span class="p">()</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<p>调用TransformListener + Buffer查询坐标，打印如下：</p>
<div class="codehilite"><pre><span></span><code><span class="n">位置</span><span class="p">:</span> <span class="n">x</span><span class="o">=</span><span class="mf">3.68</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">0.21</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">0.00</span><span class="p">;</span> <span class="n">四元数</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.000</span><span class="p">,</span> <span class="mf">0.000</span><span class="p">,</span> <span class="mf">0.003</span><span class="p">,</span> <span class="mf">1.000</span><span class="p">]</span>
</code></pre></div>
<p>也可以用命令行：</p>
<div class="codehilite"><pre><span></span><code><span class="n">ros2</span> <span class="n">run</span> <span class="n">tf2_ros</span> <span class="n">tf2_echo</span> <span class="n">base_link</span> <span class="n">camera_link</span>
</code></pre></div>
<h2 id="gazebo">Gazebo</h2>
<h3 id="_4">安装</h3>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>lsb-release<span class="w"> </span>gnupg

sudo<span class="w"> </span>curl<span class="w"> </span>https://packages.osrfoundation.org/gazebo.gpg<span class="w"> </span>--output<span class="w"> </span>/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg
<span class="nb">echo</span><span class="w"> </span><span class="s2">"deb [arch=</span><span class="k">$(</span>dpkg<span class="w"> </span>--print-architecture<span class="k">)</span><span class="s2"> signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] https://packages.osrfoundation.org/gazebo/ubuntu-stable </span><span class="k">$(</span>lsb_release<span class="w"> </span>-cs<span class="k">)</span><span class="s2"> main"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/gazebo-stable.list<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>gz-harmonic
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>ros-jazzy-ros-gz
</code></pre></div>
<p>详情参考<a href="https://gazebosim.org/docs/all/install_ubuntu/" title="Binary Installation on Ubuntu">Binary Installation on Ubuntu</a>。</p>
<p>安装完成后，启动下面命令正常启动就说明安装好了。</p>
<div class="codehilite"><pre><span></span><code>gz<span class="w"> </span>sim
</code></pre></div>
<h3 id="_5">机器仿真示例</h3>
<p>启动一个机器仿真环境</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>ros_gz_sim_demos<span class="w"> </span>diff_drive.launch.py
</code></pre></div>
<p>启动一个键盘控制节点</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>teleop_twist_keyboard<span class="w"> </span>teleop_twist_keyboard<span class="w"> </span>--ros-args<span class="w"> </span>-r<span class="w"> </span>cmd_vel:<span class="o">=</span>model/vehicle_blue/cmd_vel
</code></pre></div>
<p>使用i/j/,/l四个按键可以控制机器人前后左右动作。</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_65be785cdd6b7a86c0bb6f460fd8985c_1758166434.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_65be785cdd6b7a86c0bb6f460fd8985c_1758166434.png"/></a></p>
<h3 id="_6">传感器示例</h3>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>ros_gz_sim_demos<span class="w"> </span>rgbd_camera_bridge.launch.py
</code></pre></div>
<p>仿真摄像头，运行上面命令后会打开Gazebo仿真界面和RViz上位机。可以在Gazebo中直接看到RGBD相机仿真后发布的图像数据。</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_c275a2dc923a14c248ea0bb6827f57f8_1758166554.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_c275a2dc923a14c248ea0bb6827f57f8_1758166554.png"/></a></p>
<h2 id="rviz">RViz</h2>
<p>RViz 全称 ROS Visualization，是 ROS（Robot Operating System）里一个非常重要的三维可视化工具。它的作用主要是帮助开发者 直观地查看机器人系统中的数据和状态。</p>
<p>RViz的作用主要有坐标系可视化、传感器数据展示、机器人模型显示、路径与轨迹可视化、调试与验证等等。</p>
<p>RViz的核心功能模块主要有Displays、Views、Tools、Topics订阅。</p>
<p>RViz只负责可视化（接受数据显示）不会进行物理仿真，而Gazebo是物理仿真器，可以模拟机器人运动、环境交互。常用的做法是Gazebo负责仿真将数据发布到ROS 然后通过RViz显示数据。</p>
<p>RViz已经集成到完整版的ROS中，一般不需要额外单独安装。</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>rviz2<span class="w"> </span>rviz2
</code></pre></div>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_6e287a103ead4640aadb405501d02e7c_1758167314.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_6e287a103ead4640aadb405501d02e7c_1758167314.png"/></a></p>
<h3 id="tf_1">示例：tf数据可视化</h3>
<p>分别启动两个终端，运行海龟跟随运动。</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>learning_tf<span class="w"> </span>turtle_following_demo.launch.py
ros2<span class="w"> </span>run<span class="w"> </span>turtlesim<span class="w"> </span>turtle_teleop_key
</code></pre></div>
<p>接着运行rviz2</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>rviz2<span class="w"> </span>rviz2
</code></pre></div>
<p>添加TF</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_dc81303093308eaa3460ba3edbeaa604_1758169539.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_dc81303093308eaa3460ba3edbeaa604_1758169539.png"/></a></p>
<p>坐标系显示</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_a94e7fc47cb9a118d16b678928afab0c_1758169498.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_a94e7fc47cb9a118d16b678928afab0c_1758169498.png"/></a></p>
<h3 id="_7">示例：图像数据可视化</h3>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>usb_cam<span class="w"> </span>usb_cam_node_exe
</code></pre></div>
<p>执行启动相机驱动，如果找不到命令就先安装sudo apt install ros-jazzy-usb-cam</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_1872609a128d4bb5aab96215fa1ac80a_1758169821.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_1872609a128d4bb5aab96215fa1ac80a_1758169821.png"/></a></p>
<p>按照上面的方式添加image，如果报错</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_8b37f4db26423954c472a2a90f8d0406_1758169931.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_8b37f4db26423954c472a2a90f8d0406_1758169931.png"/></a></p>
<p>需要把topic订阅改为/image_raw <a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_f71c024c07558aa4f489797ca2e734e9_1758170900.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_f71c024c07558aa4f489797ca2e734e9_1758170900.png"/></a></p>
<h2 id="rosbag">rosbag</h2>
<p>rosbag 是 ROS（Robot Operating System）中的一种数据记录与回放工具，用来保存和重放机器人运行时产生的各种消息数据。简单来说，它就像“黑匣子”，能把机器人运行时的传感器、话题消息、控制指令等全部记录下来，方便后期调试和复现实验。</p>
<h3 id="_8">记录数据</h3>
<p>先启动"老演员"</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w">  </span>turtlesim<span class="w"> </span>turtlesim_node
ros2<span class="w"> </span>run<span class="w"> </span>turtlesim<span class="w"> </span>turtle_teleop_key
</code></pre></div>
<p>然后创建一个文件夹用于存放录制数据</p>
<div class="codehilite"><pre><span></span><code>mkdir<span class="w"> </span>~/bagfiles
<span class="nb">cd</span><span class="w"> </span>~/bagfiles/
</code></pre></div>
<p>列出当前有哪些话题</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>topic<span class="w"> </span>list<span class="w"> </span>-v
Published<span class="w"> </span>topics:
<span class="w"> </span>*<span class="w"> </span>/parameter_events<span class="w"> </span><span class="o">[</span>rcl_interfaces/msg/ParameterEvent<span class="o">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>publishers
<span class="w"> </span>*<span class="w"> </span>/rosout<span class="w"> </span><span class="o">[</span>rcl_interfaces/msg/Log<span class="o">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>publishers
<span class="w"> </span>*<span class="w"> </span>/turtle1/cmd_vel<span class="w"> </span><span class="o">[</span>geometry_msgs/msg/Twist<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>publisher
<span class="w"> </span>*<span class="w"> </span>/turtle1/color_sensor<span class="w"> </span><span class="o">[</span>turtlesim/msg/Color<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>publisher
<span class="w"> </span>*<span class="w"> </span>/turtle1/pose<span class="w"> </span><span class="o">[</span>turtlesim/msg/Pose<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>publisher

Subscribed<span class="w"> </span>topics:
<span class="w"> </span>*<span class="w"> </span>/parameter_events<span class="w"> </span><span class="o">[</span>rcl_interfaces/msg/ParameterEvent<span class="o">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>subscribers
<span class="w"> </span>*<span class="w"> </span>/turtle1/cmd_vel<span class="w"> </span><span class="o">[</span>geometry_msgs/msg/Twist<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>subscriber
</code></pre></div>
<p>接下来就记录/turtle1/cmd_vel话题。</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>bag<span class="w"> </span>record<span class="w"> </span>/turtle1/cmd_vel
</code></pre></div>
<p>这样只要在键盘终端控制海龟不断移动，就可以记录下数据了。停止记录Ctrl+C。</p>
<div class="codehilite"><pre><span></span><code>laumy@ThinkBook-14-G7-IAH:~/bagfiles$<span class="w"> </span>tree
.
└──<span class="w"> </span>rosbag2_2025_09_18-12_52_52
<span class="w">    </span>├──<span class="w"> </span>metadata.yaml
<span class="w">    </span>└──<span class="w"> </span>rosbag2_2025_09_18-12_52_52_0.mcap

<span class="m">2</span><span class="w"> </span>directories,<span class="w"> </span><span class="m">2</span><span class="w"> </span>files
</code></pre></div>
<h3 id="_9">回放数据</h3>
<p>可以使用下面命令查看数据文件信息。</p>
<div class="codehilite"><pre><span></span><code>laumy@ThinkBook-14-G7-IAH:~/bagfiles$<span class="w"> </span>ros2<span class="w"> </span>bag<span class="w"> </span>info<span class="w"> </span>rosbag2_2025_09_18-13_01_53/

Files:<span class="w">             </span>rosbag2_2025_09_18-13_01_53_0.mcap
Bag<span class="w"> </span>size:<span class="w">          </span><span class="m">29</span>.8<span class="w"> </span>KiB
Storage<span class="w"> </span>id:<span class="w">        </span>mcap
ROS<span class="w"> </span>Distro:<span class="w">        </span>jazzy
Duration:<span class="w">          </span><span class="m">26</span>.796084773s
Start:<span class="w">             </span>Sep<span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">2025</span><span class="w"> </span><span class="m">13</span>:01:58.126984611<span class="w"> </span><span class="o">(</span><span class="m">1758171718</span>.126984611<span class="o">)</span>
End:<span class="w">               </span>Sep<span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">2025</span><span class="w"> </span><span class="m">13</span>:02:24.923069384<span class="w"> </span><span class="o">(</span><span class="m">1758171744</span>.923069384<span class="o">)</span>
Messages:<span class="w">          </span><span class="m">251</span>
Topic<span class="w"> </span>information:<span class="w"> </span>Topic:<span class="w"> </span>/turtle1/cmd_vel<span class="w"> </span><span class="p">|</span><span class="w"> </span>Type:<span class="w"> </span>geometry_msgs/msg/Twist<span class="w"> </span><span class="p">|</span><span class="w"> </span>Count:<span class="w"> </span><span class="m">251</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>Serialization<span class="w"> </span>Format:<span class="w"> </span>cdr
Service:<span class="w">           </span><span class="m">0</span>
Service<span class="w"> </span>information:<span class="w"> </span>
</code></pre></div>
<p>回放命令：</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>bag<span class="w"> </span>play<span class="w"> </span>rosbag2_2025_09_18-13_01_53/
</code></pre></div>
<p>这样海龟就会复制刚才键盘执行的运动路径。</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_8575e1aa1ccda4a723beefaf0ff9e965_1758171946.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_8575e1aa1ccda4a723beefaf0ff9e965_1758171946.png"/></a></p>
<h2 id="rqt">rqt</h2>
<p>rqt 是 ROS 官方提供的一个基于 Qt 的 GUI 框架，本质上是一个 插件管理和可视化平台。</p>
<p>它的设计理念是：ROS 系统是分布式的，节点、话题、服务、参数等很多，调试和监控光靠命令行不直观，因此需要一个统一的 图形化工具箱 来观察和操作。</p>
<p>使用如下命令来安装</p>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>ros-jazzy-rqt
</code></pre></div>
<p>安装完成之后，执行</p>
<div class="codehilite"><pre><span></span><code>rqt
</code></pre></div>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_1ebbf7fb5c85fa7cbd0138d145d8ed5f_1758172194.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_1ebbf7fb5c85fa7cbd0138d145d8ed5f_1758172194.png"/></a></p>
<p>rqt默认是没有选择任何插件。要添加插件，需要从插件菜单中选择项目。</p>
<h3 id="_10">日志显示</h3>
<p>日志显示有两种打开方式一种是执行rqt后，在Plugins-&gt;Logging-&gt;Console-打开，另外一种是执行下面命令</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>rqt_console<span class="w"> </span>rqt_console
</code></pre></div>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_10036221bb01235b203a7c4fae073621_1758172723.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_10036221bb01235b203a7c4fae073621_1758172723.png"/></a></p>
<h3 id="_11">图像显示</h3>
<p>在启动之前先运行usb</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>usb_cam<span class="w"> </span>usb_cam_node_exe
</code></pre></div>
<p>UI界面启动"Plugins-&gt;Visualization&gt;Image View"或者通过命令的方式：</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>rqt_image_view<span class="w"> </span>rqt_image_view
</code></pre></div>
<p>接着添加订阅的话题</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_bb85c02700393ba7bab028790adceb6b_1758172924.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_bb85c02700393ba7bab028790adceb6b_1758172924.png"/></a></p>
<h3 id="_12">发布话题/服务数据</h3>
<p>不仅可以在命令行中发布话题或服务，也可以通过rqt工具发布。</p>
<p>先启动turtlesim</p>
<div class="codehilite"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w">  </span>turtlesim<span class="w"> </span>turtlesim_node
</code></pre></div>
<p>然后使用rqt的"Plugin-&gt;Topics-&gt;MessagePublish"。</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_c3f774986af1242247a054e920a42645_1758173103.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_c3f774986af1242247a054e920a42645_1758173103.png"/></a></p>
<h3 id="_13">绘制数据曲线</h3>
<p>rqt还可以绘制数据曲线，将需要显示的xy坐标使用曲线描述出来，便于体现机器人的速度、位置等信息随时间变化的趋势。</p>
<p>"Plugins-&gt;Visualization&gt;plot"</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_de20b66c2b619a86736cc4dd69780a79_1758174439.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_de20b66c2b619a86736cc4dd69780a79_1758174439.png"/></a></p>
<p>然后依次添加topic，就可以记录轨迹了。</p>
<h3 id="_14">节点可视化</h3>
<p>打开“introspection-&gt;Node Graph”可以看到系统中所有的节点关系。</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/09/wp_editor_md_4a9b0944c60469d7b6b5a59e5b60acfa_1758174625.png"><img alt="" src="assets/doc/05-ros系统/ros2常用开发工具：launch、tf、gazebo、rosbag、rqt/images/wp_editor_md_4a9b0944c60469d7b6b5a59e5b60acfa_1758174625.png"/></a></p>
<p>附录：本文来自《ROS2智能机器人开发实践》笔记</p></div>
  <div class="post-nav">
    <a class="prev" href="ros2机器感知-相机-雷达-imu.html">← ROS2机器感知：相机、雷达、IMU</a>
    <a class="next" href="ros2机器人仿真-urdf模型-gaezbo仿真.html">ROS2机器人仿真：urdf模型、gaezbo仿真 →</a>
  </div>
</article>

      </section>

      <aside class="right-panel">
        
      </aside>
    </main>

    <footer class="site-footer">
      <div class="container">Copyright ©2022-2025 laumy 版权所有</div>
    </footer>

    <script src="assets/site.js"></script>
  </body>
  </html>

