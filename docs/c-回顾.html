<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>C++å›é¡¾ - Laumyçš„æŠ€æœ¯æ ˆ</title>
    <link rel="stylesheet" href="assets/style.css">
    <!-- MathJaxæ”¯æŒLaTeXæ•°å­¦å…¬å¼ -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          ignoreHtmlClass: 'tex2jax_ignore',
          processHtmlClass: 'tex2jax_process'
        }
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="logo" href="./">Laumyçš„æŠ€æœ¯æ ˆ</a>
        <div class="search">
          <input id="search-input" type="text" placeholder="è¾“å…¥å…³é”®è¯å›è½¦æœç´¢">
        </div>
        <div class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜" id="theme-toggle">â˜¾</div>
        <nav class="top-nav">
          <div class="nav-item"><a href="./">é¦–é¡µ</a></div>
          <div class="nav-item site-link">
            <a href="https://www.laumy.tech" target="_blank" title="è®¿é—®ä¸»ç«™">ä¸»ç«™ç‚¹:www.laumy.tech</a>
          </div>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <aside class="left-nav">
        
        <div class="card">
          <div class="card-title">æ–‡ç« ç›®å½•</div>
          <nav id="toc"><ul><li><a href="#_1">å•ä¾‹æ¨¡å¼</a><ul></ul></li><li><a href="#_2">æ™ºèƒ½æŒ‡é’ˆ</a><ul></ul></li><li><a href="#lambda">Lambda è¡¨è¾¾å¼</a><ul></ul></li><li><a href="#stdmove">ç§»åŠ¨è¯­ä¹‰std::move</a><ul></ul></li><li><a href="#_3">æ¨¡ç‰ˆ</a><ul><li><a href="#_4">å‡½æ•°æ¨¡ç‰ˆ</a></li><li><a href="#_5">ç±»æ¨¡ç‰ˆ</a></li></ul></li></ul></nav>
        </div>
        
      </aside>

      <section class="content">
        
<article class="card post">
  <h1>C++å›é¡¾</h1>
  <div class="meta">
    <span class="meta-item">
      <i class="icon">ğŸ•’</i>
      2025-03-27
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ“‚</i>
      è¯­è¨€
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ‘¤</i>
      laumy
    </span>
  </div>
  <div class="post-content"><p>å¹³æ—¶ç”¨C++æ¯”è¾ƒå°‘ï¼Œæœ€è¿‘é¡¹ç›®éœ€è¦ç”¨åˆ°C++,ç°ç®€å•å†å›é¡¾ä¸€ä¸‹ã€‚</p>
<h2 id="_1">å•ä¾‹æ¨¡å¼</h2>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä¸€ä¸ªç±»åªéœ€è¦æœ‰ä¸€ä¸ªå®ä¾‹å°±è¶³å¤Ÿäº†ï¼Œä¾‹å¦‚é…ç½®ç®¡ç†ç±»ã€æ—¥å¿—è®°å½•å™¨ã€æ•°æ®åº“è¿æ¥æ± ç­‰ã€‚ä½¿ç”¨å•ä¾‹æ¨¡å¼å¯ä»¥é¿å…åˆ›å»ºå¤šä¸ªå®ä¾‹å¯¼è‡´çš„èµ„æºæµªè´¹ã€æ•°æ®ä¸ä¸€è‡´ç­‰é—®é¢˜ã€‚</p>
<p>å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹æ¥è·å–è¯¥å®ä¾‹ã€‚åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œè¿™ä¸ªç±»çš„å®ä¾‹å§‹ç»ˆåªæœ‰ä¸€ä¸ªï¼Œæ‰€æœ‰å¯¹è¯¥ç±»å®ä¾‹çš„è®¿é—®éƒ½é€šè¿‡è¿™ä¸ªå…¨å±€è®¿é—®ç‚¹è¿›è¡Œã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>

<span class="n">class</span><span class="w"> </span><span class="n">Board</span><span class="w"> </span><span class="p">{</span>
<span class="n">private</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨å®ä¾‹åŒ–</span>
<span class="w">    </span><span class="n">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="c1">// ç¦æ­¢æ‹·è´æ„é€ å‡½æ•°</span>
<span class="w">    </span><span class="n">Board</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Board</span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">delete</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ç¦æ­¢èµ‹å€¼è¿ç®—ç¬¦</span>
<span class="w">    </span><span class="n">Board</span><span class="o">&amp;</span><span class="w"> </span><span class="n">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Board</span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">delete</span><span class="p">;</span>

<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">Board</span><span class="o">*</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>

<span class="n">public</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// é™æ€æ–¹æ³•ï¼Œç”¨äºè·å–å”¯ä¸€å®ä¾‹</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">Board</span><span class="o">&amp;</span><span class="w"> </span><span class="n">GetInstance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">instance</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Board</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">printMessage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"This is the Board instance."</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="c1">// åˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡</span>
<span class="n">Board</span><span class="o">*</span><span class="w"> </span><span class="n">Board</span><span class="o">::</span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nullptr</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Board</span><span class="o">&amp;</span><span class="w"> </span><span class="n">board</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Board</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">();</span>
<span class="w">    </span><span class="n">board</span><span class="p">.</span><span class="n">printMessage</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="_2">æ™ºèƒ½æŒ‡é’ˆ</h2>
<p>åœ¨ä¼ ç»Ÿçš„ C++ ä¸­ï¼Œä½¿ç”¨ new è¿ç®—ç¬¦æ‰‹åŠ¨åˆ†é…å†…å­˜ï¼Œéœ€è¦ä½¿ç”¨ delete è¿ç®—ç¬¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ã€‚å¦‚æœå¿˜è®°é‡Šæ”¾å†…å­˜ï¼Œå°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå¯ä»¥è‡ªåŠ¨ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚</p>
<p>std::make_unique æ˜¯ C++14 å¼•å…¥çš„ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œç”¨äºåˆ›å»º std::unique_ptr å¯¹è±¡ã€‚std::unique_ptr æ˜¯ä¸€ç§æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒå¯¹æ‰€æŒ‡å‘çš„å¯¹è±¡æ‹¥æœ‰å”¯ä¸€æ‰€æœ‰æƒï¼Œå³åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ª std::unique_ptr æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚å½“ std::unique_ptr è¢«é”€æ¯æ—¶ï¼Œå®ƒæ‰€æŒ‡å‘çš„å¯¹è±¡ä¹Ÿä¼šè¢«è‡ªåŠ¨é”€æ¯ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;memory&gt;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">MyClass</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"MyClass constructor"</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">~</span><span class="n">MyClass</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"MyClass destructor"</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">doSomething</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Doing something..."</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ä½¿ç”¨ std::make_unique åˆ›å»º std::unique_ptr</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">MyClass</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="n">ptr</span><span class="o">-&gt;</span><span class="n">doSomething</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// å½“ ptr ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼ŒMyClass å¯¹è±¡ä¼šè‡ªåŠ¨é”€æ¯</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="lambda">Lambda è¡¨è¾¾å¼</h2>
<p>Lambda è¡¨è¾¾å¼çš„ä¸»è¦ä¼˜ç‚¹æ˜¯ç®€æ´æ€§å’Œçµæ´»æ€§ã€‚åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œè€Œä¸”è¿™ä¸ªå‡½æ•°åªåœ¨æŸä¸ªç‰¹å®šçš„åœ°æ–¹ä½¿ç”¨ä¸€æ¬¡ï¼Œä½¿ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥é¿å…å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„å‘½åå‡½æ•°ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´ã€‚ Lambda è¡¨è¾¾å¼æ˜¯ C++11 å¼•å…¥çš„ä¸€ç§åŒ¿åå‡½æ•°æœºåˆ¶ï¼Œå®ƒå…è®¸åœ¨ä»£ç ä¸­å®šä¹‰ä¸€ä¸ªä¸´æ—¶çš„ã€æ²¡æœ‰åç§°çš„å‡½æ•°ã€‚Lambda è¡¨è¾¾å¼å¯ä»¥æ•è·å¤–éƒ¨å˜é‡ï¼Œä»è€Œåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨è¿™äº›å˜é‡ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">capture</span><span class="w"> </span><span class="n">list</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">parameter</span><span class="w"> </span><span class="n">list</span><span class="p">)</span><span class="w"> </span><span class="k">mutable</span><span class="p">(</span><span class="n">å¯é€‰</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">type</span><span class="p">(</span><span class="n">å¯é€‰</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>å®ä¾‹ï¼Œlambdaä¸€èˆ¬ç”¨äºè®¾ç½®å›è°ƒå‡½æ•°ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">codec</span><span class="o">-&gt;</span><span class="n">OnInputReady</span><span class="p">([</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="n">codec</span><span class="p">]()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// æ•è·åˆ—è¡¨ [this, codec] è¡¨ç¤ºæ•è·å½“å‰å¯¹è±¡å’Œ codec å˜é‡</span>
<span class="w">    </span><span class="n">xEventGroupSetBitsFromISR</span><span class="p">(...);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">...;</span>
<span class="p">});</span>
</code></pre></div>
<h2 id="stdmove">ç§»åŠ¨è¯­ä¹‰std::move</h2>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„æ‹·è´æ“ä½œå¯èƒ½ä¼šéå¸¸æ˜‚è´µï¼Œä¾‹å¦‚å¯¹è±¡åŒ…å«å¤§é‡çš„æ•°æ®æˆ–è€…åŠ¨æ€åˆ†é…çš„å†…å­˜ã€‚ä½¿ç”¨ç§»åŠ¨è¯­ä¹‰å¯ä»¥é¿å…è¿™äº›ä¸å¿…è¦çš„æ‹·è´æ“ä½œï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚</p>
<p>ç§»åŠ¨è¯­ä¹‰æ˜¯ C++11 å¼•å…¥çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå®ƒå…è®¸å°†å¯¹è±¡çš„èµ„æºæ‰€æœ‰æƒä»ä¸€ä¸ªå¯¹è±¡è½¬ç§»åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œé¿å…ä¸å¿…è¦çš„æ‹·è´æ“ä½œã€‚std::move æ˜¯ä¸€ä¸ªæ ‡å‡†åº“å‡½æ•°ï¼Œç”¨äºå°†å·¦å€¼è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ï¼Œä»è€Œè§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MyVector</span><span class="w"> </span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">MyVector</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">vec</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="err">\</span><span class="s">"Copy constructor called</span><span class="se">\"</span><span class="s"> &lt;&lt; std::endl;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ç§»åŠ¨æ„é€ å‡½æ•°</span>
<span class="w">    </span><span class="n">MyVector</span><span class="p">(</span><span class="n">MyVector</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"> </span><span class="k">noexcept</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">data</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="err">\</span><span class="s">"Move constructor called</span><span class="se">\"</span><span class="s"> &lt;&lt; std::endl;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">printSize</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="err">\</span><span class="s">"Size: </span><span class="se">\"</span><span class="s"> &lt;&lt; data.size() &lt;&lt; std::endl;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">};</span>
<span class="w">    </span><span class="n">MyVector</span><span class="w"> </span><span class="n">v1</span><span class="p">(</span><span class="n">vec</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// ä½¿ç”¨ std::move è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°</span>
<span class="w">    </span><span class="n">MyVector</span><span class="w"> </span><span class="n">v2</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">v1</span><span class="p">));</span>
<span class="w">    </span><span class="n">v2</span><span class="p">.</span><span class="n">printSize</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œstd::move(v1) å°† v1 è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ï¼Œä»è€Œè°ƒç”¨ MyVector çš„ç§»åŠ¨æ„é€ å‡½æ•°ã€‚ç§»åŠ¨æ„é€ å‡½æ•°å°† v1 çš„ data èµ„æºæ‰€æœ‰æƒè½¬ç§»åˆ° v2ï¼Œé¿å…äº†ä¸å¿…è¦çš„æ‹·è´æ“ä½œã€‚</p>
<h2 id="_3">æ¨¡ç‰ˆ</h2>
<p>C++ æ¨¡æ¿ï¼ˆTemplateï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„ç¼–ç¨‹ç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ ç¼–å†™æ³›å‹ä»£ç ï¼Œä½¿å¾—ä»£ç èƒ½å¤Ÿåœ¨ä¸åŒæ•°æ®ç±»å‹ä¸Šé‡å¤ä½¿ç”¨ã€‚æ¨¡æ¿æ”¯æŒå‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ï¼Œå®ƒä»¬èƒ½åœ¨ç¼–è¯‘æ—¶æ ¹æ®å…·ä½“ç±»å‹ç”Ÿæˆä»£ç ï¼Œä»è€Œæé«˜ä»£ç çš„å¤ç”¨æ€§å’Œçµæ´»æ€§ã€‚</p>
<h3 id="_4">å‡½æ•°æ¨¡ç‰ˆ</h3>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="n">T</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//template &lt;typename T&gt;ï¼šè¿™æ˜¯å‡½æ•°æ¨¡æ¿çš„å£°æ˜ã€‚T æ˜¯ç±»å‹å‚æ•°ï¼Œè¡¨ç¤ºå‡½æ•°å¯ä»¥å¤„ç†ä»»ä½•ç±»å‹ã€‚</span>
<span class="c1">//T add(T a, T b)ï¼šå®šä¹‰äº†ä¸€ä¸ªæ¥å—ä¸¤ä¸ª T ç±»å‹å‚æ•°å¹¶è¿”å›ä¸€ä¸ª T ç±»å‹ç»“æœçš„å‡½æ•°ã€‚</span>

<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w">  </span><span class="c1">// è°ƒç”¨æ¨¡æ¿å‡½æ•°ï¼Œç±»å‹ä¸º int</span>
<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="mf">3.5</span><span class="p">,</span><span class="w"> </span><span class="mf">5.5</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w">  </span><span class="c1">// è°ƒç”¨æ¨¡æ¿å‡½æ•°ï¼Œç±»å‹ä¸º double</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_5">ç±»æ¨¡ç‰ˆ</h3>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Box</span><span class="w"> </span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">setValue</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="n">getValue</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>

<span class="c1">//template &lt;typename T&gt;ï¼šå®šä¹‰ç±»æ¨¡æ¿ï¼ŒT æ˜¯ç±»å‹å‚æ•°ã€‚</span>
<span class="c1">//T valueï¼šç±»ä¸­çš„æˆå‘˜å˜é‡ value æ˜¯ç±»å‹ Tã€‚</span>
<span class="c1">//setValue(T v) å’Œ getValue()ï¼šæˆå‘˜å‡½æ•°ä¹Ÿä½¿ç”¨æ¨¡æ¿ç±»å‹ Tã€‚</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Box</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">intBox</span><span class="p">;</span>
<span class="w">    </span><span class="n">intBox</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">intBox</span><span class="p">.</span><span class="n">getValue</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w">  </span><span class="c1">// è¾“å‡ºï¼š5</span>

<span class="w">    </span><span class="n">Box</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">doubleBox</span><span class="p">;</span>
<span class="w">    </span><span class="n">doubleBox</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">3.14</span><span class="p">);</span>
<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">doubleBox</span><span class="p">.</span><span class="n">getValue</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w">  </span><span class="c1">// è¾“å‡ºï¼š3.14</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
  <div class="post-nav">
    <a class="prev" href="å°æ™ºaiè¯­éŸ³äº¤äº’ç®€è¦åˆ†æ.html">â† å°æ™ºAiè¯­éŸ³äº¤äº’ç®€è¦åˆ†æ</a>
    <a class="next" href="è£å‰ªè„šæœ¬.html">è£å‰ªè„šæœ¬ â†’</a>
  </div>
</article>

      </section>

      <aside class="right-panel">
        
      </aside>
    </main>

    <footer class="site-footer">
      <div class="container">Copyright Â©2022-2025 laumy ç‰ˆæƒæ‰€æœ‰</div>
    </footer>

    <script src="assets/site.js"></script>
  </body>
  </html>

