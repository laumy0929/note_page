<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>llama.cppéƒ¨ç½²å¤§æ¨¡å‹ - Laumyçš„æŠ€æœ¯æ ˆ</title>
    <link rel="stylesheet" href="assets/style.css">
    <!-- MathJaxæ”¯æŒLaTeXæ•°å­¦å…¬å¼ -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          ignoreHtmlClass: 'tex2jax_ignore',
          processHtmlClass: 'tex2jax_process'
        }
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="logo" href="./">Laumyçš„æŠ€æœ¯æ ˆ</a>
        <div class="search">
          <input id="search-input" type="text" placeholder="è¾“å…¥å…³é”®è¯å›è½¦æœç´¢">
        </div>
        <div class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜" id="theme-toggle">â˜¾</div>
        <nav class="top-nav">
          <div class="nav-item"><a href="./">é¦–é¡µ</a></div>
          <div class="nav-item site-link">
            <a href="https://www.laumy.tech" target="_blank" title="è®¿é—®ä¸»ç«™">ä¸»ç«™ç‚¹:www.laumy.tech</a>
          </div>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <aside class="left-nav">
        
        <div class="card">
          <div class="card-title">æ–‡ç« ç›®å½•</div>
          <nav id="toc"><ul><li><a href="#llamacpp">å®‰è£…llama.cpp</a><ul></ul></li><li><a href="#_1">æ¨¡å‹ä¸‹è½½</a><ul></ul></li><li><a href="#_2">æ¨¡å‹æµ‹è¯•</a><ul></ul></li></ul></nav>
        </div>
        
      </aside>

      <section class="content">
        
<article class="card post">
  <h1>llama.cppéƒ¨ç½²å¤§æ¨¡å‹</h1>
  <div class="meta">
    <span class="meta-item">
      <i class="icon">ğŸ•’</i>
      2025-06-16
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ“‚</i>
      ai
    </span>
    <span class="meta-item">
      <i class="icon">ğŸ‘¤</i>
      laumy
    </span>
  </div>
  <div class="post-content"><h2 id="llamacpp">å®‰è£…llama.cpp</h2>
<p>ä»GitHubä¸Šä¸‹è½½å®˜æ–¹çš„æºç ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//github.com/ggml-org/llama.cpp.git</span>

<span class="n">cd</span><span class="w"> </span><span class="n">llama</span><span class="p">.</span><span class="n">cpp</span>
</code></pre></div>
<p>ä½¿ç”¨camkeè¿›è¡Œç¼–è¯‘ï¼Œå…ˆåˆ›å»ºbuildç¯å¢ƒ</p>
<div class="codehilite"><pre><span></span><code><span class="n">cmake</span><span class="w"> </span><span class="o">-</span><span class="n">B</span><span class="w"> </span><span class="n">build</span>
</code></pre></div>
<p>å‘ç°æœ‰æŠ¥é”™curlæ²¡æœ‰å®‰è£…ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="o">--</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">compiler</span><span class="w"> </span><span class="n">identification</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">GNU</span><span class="w"> </span><span class="mf">11.3.0</span>
<span class="o">--</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">CXX</span><span class="w"> </span><span class="n">compiler</span><span class="w"> </span><span class="n">identification</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">GNU</span><span class="w"> </span><span class="mf">11.3.0</span>
<span class="o">--</span><span class="w"> </span><span class="n">Detecting</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">compiler</span><span class="w"> </span><span class="n">ABI</span><span class="w"> </span><span class="n">info</span>
<span class="o">--</span><span class="w"> </span><span class="n">Detecting</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">compiler</span><span class="w"> </span><span class="n">ABI</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">done</span>
<span class="o">--</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">compiler</span><span class="o">:</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">cc</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">skipped</span>
<span class="o">--</span><span class="w"> </span><span class="n">Detecting</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="n">features</span>
<span class="o">--</span><span class="w"> </span><span class="n">Detecting</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">done</span>
<span class="o">--</span><span class="w"> </span><span class="n">Detecting</span><span class="w"> </span><span class="n">CXX</span><span class="w"> </span><span class="n">compiler</span><span class="w"> </span><span class="n">ABI</span><span class="w"> </span><span class="n">info</span>
<span class="o">--</span><span class="w"> </span><span class="n">Detecting</span><span class="w"> </span><span class="n">CXX</span><span class="w"> </span><span class="n">compiler</span><span class="w"> </span><span class="n">ABI</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">done</span>
<span class="o">--</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">CXX</span><span class="w"> </span><span class="n">compiler</span><span class="o">:</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">c</span><span class="o">++</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">skipped</span>
<span class="o">--</span><span class="w"> </span><span class="n">Detecting</span><span class="w"> </span><span class="n">CXX</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="n">features</span>
<span class="o">--</span><span class="w"> </span><span class="n">Detecting</span><span class="w"> </span><span class="n">CXX</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">done</span>
<span class="o">--</span><span class="w"> </span><span class="n">Found</span><span class="w"> </span><span class="n">Git</span><span class="o">:</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">git</span><span class="w"> </span><span class="p">(</span><span class="n">found</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">"2.34.1"</span><span class="p">)</span>
<span class="o">--</span><span class="w"> </span><span class="n">Looking</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">pthread</span><span class="p">.</span><span class="n">h</span>
<span class="o">--</span><span class="w"> </span><span class="n">Looking</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">pthread</span><span class="p">.</span><span class="n">h</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">found</span>
<span class="o">--</span><span class="w"> </span><span class="n">Performing</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="n">CMAKE_HAVE_LIBC_PTHREAD</span>
<span class="o">--</span><span class="w"> </span><span class="n">Performing</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="n">CMAKE_HAVE_LIBC_PTHREAD</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Success</span>
<span class="o">--</span><span class="w"> </span><span class="n">Found</span><span class="w"> </span><span class="n">Threads</span><span class="o">:</span><span class="w"> </span><span class="n">TRUE</span>
<span class="o">--</span><span class="w"> </span><span class="n">Warning</span><span class="o">:</span><span class="w"> </span><span class="n">ccache</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">consider</span><span class="w"> </span><span class="n">installing</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">compilation</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">disable</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">GGML_CCACHE</span><span class="o">=</span><span class="n">OFF</span>
<span class="o">--</span><span class="w"> </span><span class="n">CMAKE_SYSTEM_PROCESSOR</span><span class="o">:</span><span class="w"> </span><span class="n">x86_64</span>
<span class="o">--</span><span class="w"> </span><span class="n">GGML_SYSTEM_ARCH</span><span class="o">:</span><span class="w"> </span><span class="n">x86</span>
<span class="o">--</span><span class="w"> </span><span class="n">Including</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">backend</span>
<span class="o">--</span><span class="w"> </span><span class="n">Found</span><span class="w"> </span><span class="n">OpenMP_C</span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="n">fopenmp</span><span class="w"> </span><span class="p">(</span><span class="n">found</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">"4.5"</span><span class="p">)</span>
<span class="o">--</span><span class="w"> </span><span class="n">Found</span><span class="w"> </span><span class="n">OpenMP_CXX</span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="n">fopenmp</span><span class="w"> </span><span class="p">(</span><span class="n">found</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">"4.5"</span><span class="p">)</span>
<span class="o">--</span><span class="w"> </span><span class="n">Found</span><span class="w"> </span><span class="n">OpenMP</span><span class="o">:</span><span class="w"> </span><span class="n">TRUE</span><span class="w"> </span><span class="p">(</span><span class="n">found</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">"4.5"</span><span class="p">)</span>
<span class="o">--</span><span class="w"> </span><span class="n">x86</span><span class="w"> </span><span class="n">detected</span>
<span class="o">--</span><span class="w"> </span><span class="n">Adding</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">backend</span><span class="w"> </span><span class="n">variant</span><span class="w"> </span><span class="n">ggml</span><span class="o">-</span><span class="n">cpu</span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="n">march</span><span class="o">=</span><span class="n">native</span>
<span class="o">--</span><span class="w"> </span><span class="n">Could</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">CURL</span><span class="w"> </span><span class="p">(</span><span class="n">missing</span><span class="o">:</span><span class="w"> </span><span class="n">CURL_LIBRARY</span><span class="w"> </span><span class="n">CURL_INCLUDE_DIR</span><span class="p">)</span>
<span class="n">CMake</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">common</span><span class="o">/</span><span class="n">CMakeLists</span><span class="p">.</span><span class="n">txt</span><span class="o">:</span><span class="mi">85</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="o">:</span>
<span class="w">  </span><span class="n">Could</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">CURL</span><span class="p">.</span><span class="w">  </span><span class="n">Hint</span><span class="o">:</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">disable</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">feature</span><span class="p">,</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="o">-</span><span class="n">DLLAMA_CURL</span><span class="o">=</span><span class="n">OFF</span>
</code></pre></div>
<p>ä½¿ç”¨apt-getå®‰è£…libcur14ï¼Œå¦‚ä¸‹ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">sudo</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="n">get</span><span class="w"> </span><span class="n">update</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="n">get</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">libcurl4</span><span class="o">-</span><span class="n">openssl</span><span class="o">-</span><span class="n">dev</span>
</code></pre></div>
<p>å®‰è£…curlæˆåŠŸåï¼Œè§£å†³äº†ï¼Œç»§ç»­æ‰§è¡Œcmake -B buildï¼Œä¼šç”Ÿæˆbuildç›®å½•ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="w"> </span><span class="n">cmake</span><span class="w"> </span><span class="o">-</span><span class="n">B</span><span class="w"> </span><span class="n">build</span>
<span class="o">--</span><span class="w"> </span><span class="n">Warning</span><span class="o">:</span><span class="w"> </span><span class="n">ccache</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">consider</span><span class="w"> </span><span class="n">installing</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">compilation</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">disable</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">GGML_CCACHE</span><span class="o">=</span><span class="n">OFF</span>
<span class="o">--</span><span class="w"> </span><span class="n">CMAKE_SYSTEM_PROCESSOR</span><span class="o">:</span><span class="w"> </span><span class="n">x86_64</span>
<span class="o">--</span><span class="w"> </span><span class="n">GGML_SYSTEM_ARCH</span><span class="o">:</span><span class="w"> </span><span class="n">x86</span>
<span class="o">--</span><span class="w"> </span><span class="n">Including</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">backend</span>
<span class="o">--</span><span class="w"> </span><span class="n">x86</span><span class="w"> </span><span class="n">detected</span>
<span class="o">--</span><span class="w"> </span><span class="n">Adding</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="n">backend</span><span class="w"> </span><span class="n">variant</span><span class="w"> </span><span class="n">ggml</span><span class="o">-</span><span class="n">cpu</span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="n">march</span><span class="o">=</span><span class="n">native</span>
<span class="o">--</span><span class="w"> </span><span class="n">Found</span><span class="w"> </span><span class="n">CURL</span><span class="o">:</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">libcurl</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="p">(</span><span class="n">found</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s">"7.81.0"</span><span class="p">)</span>
<span class="o">--</span><span class="w"> </span><span class="n">Configuring</span><span class="w"> </span><span class="n">done</span>
<span class="o">--</span><span class="w"> </span><span class="n">Generating</span><span class="w"> </span><span class="n">done</span>
<span class="o">--</span><span class="w"> </span><span class="n">Build</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="n">to</span><span class="o">:</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">autodl</span><span class="o">-</span><span class="n">tmp</span><span class="o">/</span><span class="n">llama</span><span class="p">.</span><span class="n">cpp</span><span class="o">/</span><span class="n">build</span>
</code></pre></div>
<p>æ¥ç€llama.cppçš„æºç ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">cmake</span><span class="w"> </span><span class="o">--</span><span class="n">build</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">config</span><span class="w"> </span><span class="n">Release</span>

<span class="n">ç¼–è¯‘å®Œæˆä¹‹å</span><span class="err">ï¼Œ</span><span class="n">ç”Ÿæˆçš„äºŒè¿›åˆ¶éƒ½åœ¨llama</span><span class="p">.</span><span class="n">cpp</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">binç›®å½•ä¸‹</span><span class="err">ã€‚</span>
</code></pre></div>
<h2 id="_1">æ¨¡å‹ä¸‹è½½</h2>
<p>ä½¿ç”¨wgetä¸‹è½½æ¨¡å‹ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">wget</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//huggingface.co/bartowski/Llama-3.2-3B-Instruct-GGUF/resolve/main/Llama-3.2-3B-Instruct-Q8_0.gguf</span>
</code></pre></div>
<p>llamap.cppåªèƒ½ä½¿ç”¨GGUFæ ¼å¼çš„å¤§æ¨¡å‹ï¼Œä½¿ç”¨çš„æ¨¡å‹å¯ä»¥åœ¨Hugging Faceè·å–<a href="https://huggingface.co/">https://huggingface.co/</a>ã€‚ä¹Ÿå¯ä»¥åœ¨modelscopeä¸Šè·å–<a href="https://modelscope.cn/models">https://modelscope.cn/models</a>ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªæŠ€å·§ï¼Œå¯èƒ½ä»“åº“é‡Œé¢æœ‰å¾ˆå¤šé‡åŒ–å‚æ•°çš„æ¨¡å‹ï¼Œå¦‚æœä½¿ç”¨gitå…¨éƒ¨cloneä¸‹æ¥ä¼šæ¯”è¾ƒä¹…ï¼Œè¿™é‡Œå¯ä»¥åªä¸‹è½½æŒ‡å®šçš„GGUFæ¨¡å‹ï¼Œ<strong>ç‚¹å‡»è¦ä½¿ç”¨çš„æ¨¡å‹</strong>ï¼Œå¦‚ä¸‹:</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/06/wp_editor_md_e0a172538da0ae8e59626eb4db1c25b5.jpg"><img alt="" src="assets/doc/04-ai/aiåº”ç”¨/llama-cppéƒ¨ç½²å¤§æ¨¡å‹/images/wp_editor_md_e0a172538da0ae8e59626eb4db1c25b5.jpg"/></a></p>
<p>ç„¶åï¼Œè·å–åˆ°ä¸‹é¢çš„ä¸‹è½½é“¾æ¥ã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/06/wp_editor_md_103fac35ecc33600c7019192a6778373.jpg"><img alt="" src="assets/doc/04-ai/aiåº”ç”¨/llama-cppéƒ¨ç½²å¤§æ¨¡å‹/images/wp_editor_md_103fac35ecc33600c7019192a6778373.jpg"/></a></p>
<p>å¦‚æœæ˜¯modelsscopeï¼Œæ‰¾åˆ°<strong>ä¸‹è½½</strong>ï¼Œç„¶åé¼ æ ‡é•¿æŒ‰å·¦é”®ä¸æ¾æ‰‹æ‹–åˆ°ä¸Šé¢çš„è¾“å…¥ç½‘å€æ¡†è·å–åˆ°ä¸‹è½½é“¾æ¥ã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/06/wp_editor_md_e20dd4d7c580d7f472248ff2ef607769.jpg"><img alt="" src="assets/doc/04-ai/aiåº”ç”¨/llama-cppéƒ¨ç½²å¤§æ¨¡å‹/images/wp_editor_md_e20dd4d7c580d7f472248ff2ef607769.jpg"/></a></p>
<p>è¿™æ ·å°±å¯ä»¥ä½¿ç”¨wgetè¿›è¡Œä¸‹è½½äº†ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">wget</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//huggingface.co/Qwen/Qwen2.5-0.5B-Instruct-GGUF/resolve/main/qwen2.5-0.5b-instruct-q8_0.gguf</span>

<span class="n">wget</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//modelscope.cn/models/Qwen/Qwen2.5-3B-Instruct-GGUF/resolve/master/qwen2.5-3b-instruct-q8_0.gguf</span>
</code></pre></div>
<h2 id="_2">æ¨¡å‹æµ‹è¯•</h2>
<p>è¿è¡Œå¤§æ¨¡å‹</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="o">/</span><span class="n">llama</span><span class="p">.</span><span class="n">cpp</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">llama</span><span class="o">-</span><span class="n">cli</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">model</span><span class="o">/</span><span class="n">Llama</span><span class="mf">-3.2</span><span class="mi">-3</span><span class="n">B</span><span class="o">-</span><span class="n">Instruct</span><span class="o">-</span><span class="n">Q8_0</span><span class="p">.</span><span class="n">gguf</span>
</code></pre></div>
<p>è¿è¡Œæ—¥å¿—å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨çš„æ˜¯CPUï¼Œæ²¡æœ‰ä½¿ç”¨GPUï¼Œå› ä¸ºå‰é¢ç¼–è¯‘çš„æ—¶å€™æ²¡æœ‰ä½¿èƒ½CUDAã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/06/wp_editor_md_91fe9a4d29823b0fbd2c338a3c4ad431.jpg"><img alt="" src="assets/doc/04-ai/aiåº”ç”¨/llama-cppéƒ¨ç½²å¤§æ¨¡å‹/images/wp_editor_md_91fe9a4d29823b0fbd2c338a3c4ad431.jpg"/></a></p>
<div class="codehilite"><pre><span></span><code><span class="nl">llama_perf_sampler_print</span><span class="p">:</span><span class="w">    </span><span class="n">sampling</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w">       </span><span class="mf">8.06</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="o">/</span><span class="w">    </span><span class="mi">80</span><span class="w"> </span><span class="n">runs</span><span class="w">   </span><span class="p">(</span><span class="w">    </span><span class="mf">0.10</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w">  </span><span class="mf">9920.63</span><span class="w"> </span><span class="n">tokens</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="nl">llama_perf_context_print</span><span class="p">:</span><span class="w">        </span><span class="n">load</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w">    </span><span class="mf">1070.39</span><span class="w"> </span><span class="n">ms</span>
<span class="nl">llama_perf_context_print</span><span class="p">:</span><span class="w"> </span><span class="n">prompt</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w">     </span><span class="mf">859.42</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="o">/</span><span class="w">    </span><span class="mi">15</span><span class="w"> </span><span class="n">tokens</span><span class="w"> </span><span class="p">(</span><span class="w">   </span><span class="mf">57.29</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w">    </span><span class="mf">17.45</span><span class="w"> </span><span class="n">tokens</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="nl">llama_perf_context_print</span><span class="p">:</span><span class="w">        </span><span class="n">eval</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w">   </span><span class="mf">20880.31</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="o">/</span><span class="w">    </span><span class="mi">65</span><span class="w"> </span><span class="n">runs</span><span class="w">   </span><span class="p">(</span><span class="w">  </span><span class="mf">321.24</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w">     </span><span class="mf">3.11</span><span class="w"> </span><span class="n">tokens</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="nl">llama_perf_context_print</span><span class="p">:</span><span class="w">       </span><span class="n">total</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w">   </span><span class="mf">37979.41</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="o">/</span><span class="w">    </span><span class="mi">80</span><span class="w"> </span><span class="n">tokens</span>
</code></pre></div>
<ul>
<li>load time: æ¨¡å‹åŠ è½½æ—¶é—´ï¼Œè€—æ—¶1070.39msï¼Œå±äºä¸€æ¬¡æ€§å¼€é”€ï¼Œä¸æ¨¡å‹å¤§å°å’Œç¡¬ä»¶I/Oæ€§èƒ½ç›¸å…³ã€‚</li>
<li>prompt eaval time: æœ‰äº›ä¹Ÿç§°ä¸ºprefillï¼ˆTPSï¼‰ï¼Œè¡¨ç¤ºæç¤ºè¯å¤„ç†æ—¶é—´ï¼Œå¤„ç†15ä¸ªè¾“å…¥Tokenè€—æ—¶859.42msï¼Œå¹³å‡57.29ms/Tokenï¼Œé€Ÿåº¦17.45 Token/sã€‚</li>
<li>eval time:æœ‰äº›ä¹Ÿç§°ä¸ºdecode (TPS)ï¼Œ è¡¨ç¤ºç”Ÿæˆæ¨ç†æ—¶é—´ï¼Œç”Ÿæˆ65ä¸ªTokenè€—æ—¶20880.31msï¼Œå¹³å‡321.24ms/Tokenï¼Œé€Ÿåº¦ä»…3.11 Token/sï¼Œæ˜¾è‘—ä½äºé‡‡æ ·é˜¶æ®µçš„9920.63 Token/sï¼Œè¯´æ˜ç”Ÿæˆé˜¶æ®µå­˜åœ¨è®¡ç®—ç“¶é¢ˆã€‚</li>
<li>sampling time: é‡‡æ ·80æ¬¡ä»…8.06msï¼Œé€Ÿåº¦é«˜è¾¾9920.63 Token/s,è¡¨æ˜é‡‡æ ·ç®—æ³•æœ¬èº«æ•ˆç‡æé«˜ï¼Œéæ€§èƒ½ç“¶é¢ˆã€‚</li>
<li>total time: è¾“å…¥åˆ°è¾“å‡ºçš„æ€»è€—æ—¶ï¼ŒåŒ…æ‹¬æ¨¡å‹åŠ è½½æ—¶é—´ã€æç¤ºè¯å¤„ç†æ—¶é—´ã€ç”Ÿæˆæ¨ç†æ—¶é—´ï¼Œå…¶ä»–æ—¶é—´ï¼ˆå¯èƒ½å«å†…å­˜äº¤æ¢æˆ–è°ƒåº¦å»¶è¿Ÿï¼‰</li>
</ul>
<p>å¯ä»¥ä½¿ç”¨vscodeçš„æ‰“å¼€å¤šä¸ªç»ˆç«¯ï¼Œä¸€ä¸ªæ‰§è¡Œå¤§æ¨¡å‹äº¤äº’ï¼Œä¸€ä¸ªä½¿ç”¨htopçœ‹çœ‹CPUå’Œå†…å­˜ä½¿ç”¨æƒ…å†µã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/06/wp_editor_md_28b48b767dcddf3f44160b9867b4580a.jpg"><img alt="" src="assets/doc/04-ai/aiåº”ç”¨/llama-cppéƒ¨ç½²å¤§æ¨¡å‹/images/wp_editor_md_28b48b767dcddf3f44160b9867b4580a.jpg"/></a></p>
<p>ä»ä¸Šé¢çœ‹è¾“å…¥æ˜¯17.45 token/sï¼Œè¾“å‡ºæ˜¯3.11 token/sï¼Œé€Ÿåº¦è¿˜æ˜¯æ¯”è¾ƒæ…¢ã€‚</p>
<p>æ²¡æœ‰ä½¿ç”¨GPUï¼Œéƒ½æ˜¯ç”¨cpuåœ¨æ¨ç†ã€‚é‚£ä¹ˆæ€ä¹ˆä½¿èƒ½ä½¿ç”¨gpuäº†ï¼Ÿä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ï¼Œæ„å»ºç¼–è¯‘çš„æ—¶å€™æ‰“å¼€CUDAï¼Œç„¶åé‡æ–°ç¼–è¯‘è¯•ä¸€ä¸‹ã€‚è¦ç”¨å¤šçº¿ç¨‹ç¼–è¯‘ï¼Œå¦åˆ™ç¼–è¯‘è´¼æ…¢ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="n">cd</span><span class="w"> </span><span class="n">llama</span><span class="p">.</span><span class="n">cpp</span>
<span class="n">cmake</span><span class="w"> </span><span class="o">-</span><span class="n">B</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">DGGML_CUDA</span><span class="o">=</span><span class="n">ON</span>
<span class="n">cmake</span><span class="w"> </span><span class="o">--</span><span class="n">build</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">config</span><span class="w"> </span><span class="n">Release</span><span class="w"> </span><span class="o">-</span><span class="n">j16</span>
</code></pre></div>
<p>é‡æ–°è¿è¡Œæ¨¡å‹åï¼Œçœ‹åˆ°ç¡¬ä»¶ä¿¡æ¯ç”¨äº†GPUäº†ã€‚</p>
<p><a href="https://www.laumy.tech/wp-content/uploads/2025/06/wp_editor_md_06b476afbba5c4c17677f500135b2217.jpg"><img alt="" src="assets/doc/04-ai/aiåº”ç”¨/llama-cppéƒ¨ç½²å¤§æ¨¡å‹/images/wp_editor_md_06b476afbba5c4c17677f500135b2217.jpg"/></a></p>
<div class="codehilite"><pre><span></span><code><span class="nl">llama_perf_sampler_print</span><span class="p">:</span><span class="w">    </span><span class="n">sampling</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w">      </span><span class="mf">10.88</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="o">/</span><span class="w">   </span><span class="mi">105</span><span class="w"> </span><span class="n">runs</span><span class="w">   </span><span class="p">(</span><span class="w">    </span><span class="mf">0.10</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w">  </span><span class="mf">9649.85</span><span class="w"> </span><span class="n">tokens</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="nl">llama_perf_context_print</span><span class="p">:</span><span class="w">        </span><span class="n">load</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w">     </span><span class="mf">959.88</span><span class="w"> </span><span class="n">ms</span>
<span class="nl">llama_perf_context_print</span><span class="p">:</span><span class="w"> </span><span class="n">prompt</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w">     </span><span class="mf">573.18</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="o">/</span><span class="w">    </span><span class="mi">14</span><span class="w"> </span><span class="n">tokens</span><span class="w"> </span><span class="p">(</span><span class="w">   </span><span class="mf">40.94</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w">    </span><span class="mf">24.43</span><span class="w"> </span><span class="n">tokens</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="nl">llama_perf_context_print</span><span class="p">:</span><span class="w">        </span><span class="n">eval</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w">   </span><span class="mf">17212.83</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="o">/</span><span class="w">    </span><span class="mi">91</span><span class="w"> </span><span class="n">runs</span><span class="w">   </span><span class="p">(</span><span class="w">  </span><span class="mf">189.15</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w">     </span><span class="mf">5.29</span><span class="w"> </span><span class="n">tokens</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="nl">llama_perf_context_print</span><span class="p">:</span><span class="w">       </span><span class="n">total</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w">   </span><span class="mf">34584.56</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="o">/</span><span class="w">   </span><span class="mi">105</span><span class="w"> </span><span class="n">tokens</span>
</code></pre></div>
<p>è¾“å‡ºtokenæœ‰æå‡ï¼Œä½†æ˜¯çœ‹èµ·æ¥ä¸æ˜æ˜¾ï¼Œä¸ºå•¥äº†ï¼Ÿ</p></div>
  <div class="post-nav">
    <a class="prev" href="ç«¯ä¾§vscode-aiå¼€å‘ç¯å¢ƒæ­å»º.html">â† ç«¯ä¾§vscode AIå¼€å‘ç¯å¢ƒæ­å»º</a>
    <a class="next" href="è‡ªæ³¨æ„åŠ›æœºåˆ¶.html">è‡ªæ³¨æ„åŠ›æœºåˆ¶ â†’</a>
  </div>
</article>

      </section>

      <aside class="right-panel">
        
      </aside>
    </main>

    <footer class="site-footer">
      <div class="container">Copyright Â©2022-2025 laumy ç‰ˆæƒæ‰€æœ‰</div>
    </footer>

    <script src="assets/site.js"></script>
  </body>
  </html>

